{"ast":null,"code":"// Object.keys\nif (!Object.keys) {\n  Object.keys = function (object) {\n    var keys = [];\n    for (var name in object) {\n      if (Object.prototype.hasOwnProperty.call(object, name)) {\n        keys.push(name);\n      }\n    }\n    return keys;\n  };\n}\n\n// ChildNode.remove\nif (!(\"remove\" in Element.prototype)) {\n  Element.prototype.remove = function () {\n    if (this.parentNode) {\n      this.parentNode.removeChild(this);\n    }\n  };\n}\nimport { raf } from './helpers/raf.js';\nimport { caf } from './helpers/caf.js';\nimport { extend } from './helpers/extend.js';\nimport { checkStorageValue } from './helpers/checkStorageValue.js';\nimport { setLocalStorage } from './helpers/setLocalStorage.js';\nimport { getSlideId } from './helpers/getSlideId.js';\nimport { calc } from './helpers/calc.js';\nimport { percentageLayout } from './helpers/percentageLayout.js';\nimport { mediaquerySupport } from './helpers/mediaquerySupport.js';\nimport { createStyleSheet } from './helpers/createStyleSheet.js';\nimport { addCSSRule } from './helpers/addCSSRule.js';\nimport { removeCSSRule } from './helpers/removeCSSRule.js';\nimport { getCssRulesLength } from './helpers/getCssRulesLength.js';\nimport { toDegree } from './helpers/toDegree.js';\nimport { getTouchDirection } from './helpers/getTouchDirection.js';\nimport { forEach } from './helpers/forEach.js';\nimport { hasClass } from './helpers/hasClass.js';\nimport { addClass } from './helpers/addClass.js';\nimport { removeClass } from './helpers/removeClass.js';\nimport { hasAttr } from './helpers/hasAttr.js';\nimport { getAttr } from './helpers/getAttr.js';\nimport { setAttrs } from './helpers/setAttrs.js';\nimport { removeAttrs } from './helpers/removeAttrs.js';\nimport { arrayFromNodeList } from './helpers/arrayFromNodeList.js';\nimport { hideElement } from './helpers/hideElement.js';\nimport { showElement } from './helpers/showElement.js';\nimport { isVisible } from './helpers/isVisible.js';\nimport { whichProperty } from './helpers/whichProperty.js';\nimport { has3DTransforms } from './helpers/has3DTransforms.js';\nimport { getEndProperty } from './helpers/getEndProperty.js';\nimport { addEvents } from './helpers/addEvents.js';\nimport { removeEvents } from './helpers/removeEvents.js';\nimport { Events } from './helpers/events.js';\nimport { jsTransform } from './helpers/jsTransform.js';\nexport var tns = function (options) {\n  options = extend({\n    container: '.slider',\n    mode: 'carousel',\n    axis: 'horizontal',\n    items: 1,\n    gutter: 0,\n    edgePadding: 0,\n    fixedWidth: false,\n    autoWidth: false,\n    viewportMax: false,\n    slideBy: 1,\n    center: false,\n    controls: true,\n    controlsPosition: 'top',\n    controlsText: ['prev', 'next'],\n    controlsContainer: false,\n    prevButton: false,\n    nextButton: false,\n    nav: true,\n    navPosition: 'top',\n    navContainer: false,\n    navAsThumbnails: false,\n    arrowKeys: false,\n    speed: 300,\n    autoplay: false,\n    autoplayPosition: 'top',\n    autoplayTimeout: 5000,\n    autoplayDirection: 'forward',\n    autoplayText: ['start', 'stop'],\n    autoplayHoverPause: false,\n    autoplayButton: false,\n    autoplayButtonOutput: true,\n    autoplayResetOnVisibility: true,\n    animateIn: 'tns-fadeIn',\n    animateOut: 'tns-fadeOut',\n    animateNormal: 'tns-normal',\n    animateDelay: false,\n    loop: true,\n    rewind: false,\n    autoHeight: false,\n    responsive: false,\n    lazyload: false,\n    lazyloadSelector: '.tns-lazy-img',\n    touch: true,\n    mouseDrag: false,\n    swipeAngle: 15,\n    nested: false,\n    preventActionWhenRunning: false,\n    preventScrollOnTouch: false,\n    freezable: true,\n    onInit: false,\n    useLocalStorage: true,\n    nonce: false\n  }, options || {});\n  var doc = document,\n    win = window,\n    KEYS = {\n      ENTER: 13,\n      SPACE: 32,\n      LEFT: 37,\n      RIGHT: 39\n    },\n    tnsStorage = {},\n    localStorageAccess = options.useLocalStorage;\n  if (localStorageAccess) {\n    // check browser version and local storage access\n    var browserInfo = navigator.userAgent;\n    var uid = new Date();\n    try {\n      tnsStorage = win.localStorage;\n      if (tnsStorage) {\n        tnsStorage.setItem(uid, uid);\n        localStorageAccess = tnsStorage.getItem(uid) == uid;\n        tnsStorage.removeItem(uid);\n      } else {\n        localStorageAccess = false;\n      }\n      if (!localStorageAccess) {\n        tnsStorage = {};\n      }\n    } catch (e) {\n      localStorageAccess = false;\n    }\n    if (localStorageAccess) {\n      // remove storage when browser version changes\n      if (tnsStorage['tnsApp'] && tnsStorage['tnsApp'] !== browserInfo) {\n        ['tC', 'tPL', 'tMQ', 'tTf', 't3D', 'tTDu', 'tTDe', 'tADu', 'tADe', 'tTE', 'tAE'].forEach(function (item) {\n          tnsStorage.removeItem(item);\n        });\n      }\n      // update browserInfo\n      localStorage['tnsApp'] = browserInfo;\n    }\n  }\n  var CALC = tnsStorage['tC'] ? checkStorageValue(tnsStorage['tC']) : setLocalStorage(tnsStorage, 'tC', calc(), localStorageAccess),\n    PERCENTAGELAYOUT = tnsStorage['tPL'] ? checkStorageValue(tnsStorage['tPL']) : setLocalStorage(tnsStorage, 'tPL', percentageLayout(), localStorageAccess),\n    CSSMQ = tnsStorage['tMQ'] ? checkStorageValue(tnsStorage['tMQ']) : setLocalStorage(tnsStorage, 'tMQ', mediaquerySupport(), localStorageAccess),\n    TRANSFORM = tnsStorage['tTf'] ? checkStorageValue(tnsStorage['tTf']) : setLocalStorage(tnsStorage, 'tTf', whichProperty('transform'), localStorageAccess),\n    HAS3DTRANSFORMS = tnsStorage['t3D'] ? checkStorageValue(tnsStorage['t3D']) : setLocalStorage(tnsStorage, 't3D', has3DTransforms(TRANSFORM), localStorageAccess),\n    TRANSITIONDURATION = tnsStorage['tTDu'] ? checkStorageValue(tnsStorage['tTDu']) : setLocalStorage(tnsStorage, 'tTDu', whichProperty('transitionDuration'), localStorageAccess),\n    TRANSITIONDELAY = tnsStorage['tTDe'] ? checkStorageValue(tnsStorage['tTDe']) : setLocalStorage(tnsStorage, 'tTDe', whichProperty('transitionDelay'), localStorageAccess),\n    ANIMATIONDURATION = tnsStorage['tADu'] ? checkStorageValue(tnsStorage['tADu']) : setLocalStorage(tnsStorage, 'tADu', whichProperty('animationDuration'), localStorageAccess),\n    ANIMATIONDELAY = tnsStorage['tADe'] ? checkStorageValue(tnsStorage['tADe']) : setLocalStorage(tnsStorage, 'tADe', whichProperty('animationDelay'), localStorageAccess),\n    TRANSITIONEND = tnsStorage['tTE'] ? checkStorageValue(tnsStorage['tTE']) : setLocalStorage(tnsStorage, 'tTE', getEndProperty(TRANSITIONDURATION, 'Transition'), localStorageAccess),\n    ANIMATIONEND = tnsStorage['tAE'] ? checkStorageValue(tnsStorage['tAE']) : setLocalStorage(tnsStorage, 'tAE', getEndProperty(ANIMATIONDURATION, 'Animation'), localStorageAccess);\n\n  // get element nodes from selectors\n  var supportConsoleWarn = win.console && typeof win.console.warn === \"function\",\n    tnsList = ['container', 'controlsContainer', 'prevButton', 'nextButton', 'navContainer', 'autoplayButton'],\n    optionsElements = {};\n  tnsList.forEach(function (item) {\n    if (typeof options[item] === 'string') {\n      var str = options[item],\n        el = doc.querySelector(str);\n      optionsElements[item] = str;\n      if (el && el.nodeName) {\n        options[item] = el;\n      } else {\n        if (supportConsoleWarn) {\n          console.warn('Can\\'t find', options[item]);\n        }\n        return;\n      }\n    }\n  });\n\n  // make sure at least 1 slide\n  if (options.container.children.length < 1) {\n    if (supportConsoleWarn) {\n      console.warn('No slides found in', options.container);\n    }\n    return;\n  }\n\n  // update options\n  var responsive = options.responsive,\n    nested = options.nested,\n    carousel = options.mode === 'carousel' ? true : false;\n  if (responsive) {\n    // apply responsive[0] to options and remove it\n    if (0 in responsive) {\n      options = extend(options, responsive[0]);\n      delete responsive[0];\n    }\n    var responsiveTem = {};\n    for (var key in responsive) {\n      var val = responsive[key];\n      // update responsive\n      // from: 300: 2\n      // to:\n      //   300: {\n      //     items: 2\n      //   }\n      val = typeof val === 'number' ? {\n        items: val\n      } : val;\n      responsiveTem[key] = val;\n    }\n    responsive = responsiveTem;\n    responsiveTem = null;\n  }\n\n  // update options\n  function updateOptions(obj) {\n    for (var key in obj) {\n      if (!carousel) {\n        if (key === 'slideBy') {\n          obj[key] = 'page';\n        }\n        if (key === 'edgePadding') {\n          obj[key] = false;\n        }\n        if (key === 'autoHeight') {\n          obj[key] = false;\n        }\n      }\n\n      // update responsive options\n      if (key === 'responsive') {\n        updateOptions(obj[key]);\n      }\n    }\n  }\n  if (!carousel) {\n    updateOptions(options);\n  }\n\n  // === define and set variables ===\n  if (!carousel) {\n    options.axis = 'horizontal';\n    options.slideBy = 'page';\n    options.edgePadding = false;\n    var animateIn = options.animateIn,\n      animateOut = options.animateOut,\n      animateDelay = options.animateDelay,\n      animateNormal = options.animateNormal;\n  }\n  var horizontal = options.axis === 'horizontal' ? true : false,\n    outerWrapper = doc.createElement('div'),\n    innerWrapper = doc.createElement('div'),\n    middleWrapper,\n    container = options.container,\n    containerParent = container.parentNode,\n    containerHTML = container.outerHTML,\n    slideItems = container.children,\n    slideCount = slideItems.length,\n    breakpointZone,\n    windowWidth = getWindowWidth(),\n    isOn = false;\n  if (responsive) {\n    setBreakpointZone();\n  }\n  if (carousel) {\n    container.className += ' tns-vpfix';\n  }\n\n  // fixedWidth: viewport > rightBoundary > indexMax\n  var autoWidth = options.autoWidth,\n    fixedWidth = getOption('fixedWidth'),\n    edgePadding = getOption('edgePadding'),\n    gutter = getOption('gutter'),\n    viewport = getViewportWidth(),\n    center = getOption('center'),\n    items = !autoWidth ? Math.floor(getOption('items')) : 1,\n    slideBy = getOption('slideBy'),\n    viewportMax = options.viewportMax || options.fixedWidthViewportWidth,\n    arrowKeys = getOption('arrowKeys'),\n    speed = getOption('speed'),\n    rewind = options.rewind,\n    loop = rewind ? false : options.loop,\n    autoHeight = getOption('autoHeight'),\n    controls = getOption('controls'),\n    controlsText = getOption('controlsText'),\n    nav = getOption('nav'),\n    touch = getOption('touch'),\n    mouseDrag = getOption('mouseDrag'),\n    autoplay = getOption('autoplay'),\n    autoplayTimeout = getOption('autoplayTimeout'),\n    autoplayText = getOption('autoplayText'),\n    autoplayHoverPause = getOption('autoplayHoverPause'),\n    autoplayResetOnVisibility = getOption('autoplayResetOnVisibility'),\n    sheet = createStyleSheet(null, getOption('nonce')),\n    lazyload = options.lazyload,\n    lazyloadSelector = options.lazyloadSelector,\n    slidePositions,\n    // collection of slide positions\n    slideItemsOut = [],\n    cloneCount = loop ? getCloneCountForLoop() : 0,\n    slideCountNew = !carousel ? slideCount + cloneCount : slideCount + cloneCount * 2,\n    hasRightDeadZone = (fixedWidth || autoWidth) && !loop ? true : false,\n    rightBoundary = fixedWidth ? getRightBoundary() : null,\n    updateIndexBeforeTransform = !carousel || !loop ? true : false,\n    // transform\n    transformAttr = horizontal ? 'left' : 'top',\n    transformPrefix = '',\n    transformPostfix = '',\n    // index\n    getIndexMax = function () {\n      if (fixedWidth) {\n        return function () {\n          return center && !loop ? slideCount - 1 : Math.ceil(-rightBoundary / (fixedWidth + gutter));\n        };\n      } else if (autoWidth) {\n        return function () {\n          for (var i = 0; i < slideCountNew; i++) {\n            if (slidePositions[i] >= -rightBoundary) {\n              return i;\n            }\n          }\n        };\n      } else {\n        return function () {\n          if (center && carousel && !loop) {\n            return slideCount - 1;\n          } else {\n            return loop || carousel ? Math.max(0, slideCountNew - Math.ceil(items)) : slideCountNew - 1;\n          }\n        };\n      }\n    }(),\n    index = getStartIndex(getOption('startIndex')),\n    indexCached = index,\n    displayIndex = getCurrentSlide(),\n    indexMin = 0,\n    indexMax = !autoWidth ? getIndexMax() : null,\n    // resize\n    resizeTimer,\n    preventActionWhenRunning = options.preventActionWhenRunning,\n    swipeAngle = options.swipeAngle,\n    moveDirectionExpected = swipeAngle ? '?' : true,\n    running = false,\n    onInit = options.onInit,\n    events = new Events(),\n    // id, class\n    newContainerClasses = ' tns-slider tns-' + options.mode,\n    slideId = container.id || getSlideId(),\n    disable = getOption('disable'),\n    disabled = false,\n    freezable = options.freezable,\n    freeze = freezable && !autoWidth ? getFreeze() : false,\n    frozen = false,\n    controlsEvents = {\n      'click': onControlsClick,\n      'keydown': onControlsKeydown\n    },\n    navEvents = {\n      'click': onNavClick,\n      'keydown': onNavKeydown\n    },\n    hoverEvents = {\n      'mouseover': mouseoverPause,\n      'mouseout': mouseoutRestart\n    },\n    visibilityEvent = {\n      'visibilitychange': onVisibilityChange\n    },\n    docmentKeydownEvent = {\n      'keydown': onDocumentKeydown\n    },\n    touchEvents = {\n      'touchstart': onPanStart,\n      'touchmove': onPanMove,\n      'touchend': onPanEnd,\n      'touchcancel': onPanEnd\n    },\n    dragEvents = {\n      'mousedown': onPanStart,\n      'mousemove': onPanMove,\n      'mouseup': onPanEnd,\n      'mouseleave': onPanEnd\n    },\n    hasControls = hasOption('controls'),\n    hasNav = hasOption('nav'),\n    navAsThumbnails = autoWidth ? true : options.navAsThumbnails,\n    hasAutoplay = hasOption('autoplay'),\n    hasTouch = hasOption('touch'),\n    hasMouseDrag = hasOption('mouseDrag'),\n    slideActiveClass = 'tns-slide-active',\n    slideClonedClass = 'tns-slide-cloned',\n    imgCompleteClass = 'tns-complete',\n    imgEvents = {\n      'load': onImgLoaded,\n      'error': onImgFailed\n    },\n    imgsComplete,\n    liveregionCurrent,\n    preventScroll = options.preventScrollOnTouch === 'force' ? true : false;\n\n  // controls\n  if (hasControls) {\n    var controlsContainer = options.controlsContainer,\n      controlsContainerHTML = options.controlsContainer ? options.controlsContainer.outerHTML : '',\n      prevButton = options.prevButton,\n      nextButton = options.nextButton,\n      prevButtonHTML = options.prevButton ? options.prevButton.outerHTML : '',\n      nextButtonHTML = options.nextButton ? options.nextButton.outerHTML : '',\n      prevIsButton,\n      nextIsButton;\n  }\n\n  // nav\n  if (hasNav) {\n    var navContainer = options.navContainer,\n      navContainerHTML = options.navContainer ? options.navContainer.outerHTML : '',\n      navItems,\n      pages = autoWidth ? slideCount : getPages(),\n      pagesCached = 0,\n      navClicked = -1,\n      navCurrentIndex = getCurrentNavIndex(),\n      navCurrentIndexCached = navCurrentIndex,\n      navActiveClass = 'tns-nav-active',\n      navStr = 'Carousel Page ',\n      navStrCurrent = ' (Current Slide)';\n  }\n\n  // autoplay\n  if (hasAutoplay) {\n    var autoplayDirection = options.autoplayDirection === 'forward' ? 1 : -1,\n      autoplayButton = options.autoplayButton,\n      autoplayButtonHTML = options.autoplayButton ? options.autoplayButton.outerHTML : '',\n      autoplayHtmlStrings = ['<span class=\\'tns-visually-hidden\\'>', ' animation</span>'],\n      autoplayTimer,\n      animating,\n      autoplayHoverPaused,\n      autoplayUserPaused,\n      autoplayVisibilityPaused;\n  }\n  if (hasTouch || hasMouseDrag) {\n    var initPosition = {},\n      lastPosition = {},\n      translateInit,\n      disX,\n      disY,\n      panStart = false,\n      rafIndex,\n      getDist = horizontal ? function (a, b) {\n        return a.x - b.x;\n      } : function (a, b) {\n        return a.y - b.y;\n      };\n  }\n\n  // disable slider when slidecount <= items\n  if (!autoWidth) {\n    resetVariblesWhenDisable(disable || freeze);\n  }\n  if (TRANSFORM) {\n    transformAttr = TRANSFORM;\n    transformPrefix = 'translate';\n    if (HAS3DTRANSFORMS) {\n      transformPrefix += horizontal ? '3d(' : '3d(0px, ';\n      transformPostfix = horizontal ? ', 0px, 0px)' : ', 0px)';\n    } else {\n      transformPrefix += horizontal ? 'X(' : 'Y(';\n      transformPostfix = ')';\n    }\n  }\n  if (carousel) {\n    container.className = container.className.replace('tns-vpfix', '');\n  }\n  initStructure();\n  initSheet();\n  initSliderTransform();\n\n  // === COMMON FUNCTIONS === //\n  function resetVariblesWhenDisable(condition) {\n    if (condition) {\n      controls = nav = touch = mouseDrag = arrowKeys = autoplay = autoplayHoverPause = autoplayResetOnVisibility = false;\n    }\n  }\n  function getCurrentSlide() {\n    var tem = carousel ? index - cloneCount : index;\n    while (tem < 0) {\n      tem += slideCount;\n    }\n    return tem % slideCount + 1;\n  }\n  function getStartIndex(ind) {\n    ind = ind ? Math.max(0, Math.min(loop ? slideCount - 1 : slideCount - items, ind)) : 0;\n    return carousel ? ind + cloneCount : ind;\n  }\n  function getAbsIndex(i) {\n    if (i == null) {\n      i = index;\n    }\n    if (carousel) {\n      i -= cloneCount;\n    }\n    while (i < 0) {\n      i += slideCount;\n    }\n    return Math.floor(i % slideCount);\n  }\n  function getCurrentNavIndex() {\n    var absIndex = getAbsIndex(),\n      result;\n    result = navAsThumbnails ? absIndex : fixedWidth || autoWidth ? Math.ceil((absIndex + 1) * pages / slideCount - 1) : Math.floor(absIndex / items);\n\n    // set active nav to the last one when reaches the right edge\n    if (!loop && carousel && index === indexMax) {\n      result = pages - 1;\n    }\n    return result;\n  }\n  function getItemsMax() {\n    // fixedWidth or autoWidth while viewportMax is not available\n    if (autoWidth || fixedWidth && !viewportMax) {\n      return slideCount - 1;\n      // most cases\n    } else {\n      var str = fixedWidth ? 'fixedWidth' : 'items',\n        arr = [];\n      if (fixedWidth || options[str] < slideCount) {\n        arr.push(options[str]);\n      }\n      if (responsive) {\n        for (var bp in responsive) {\n          var tem = responsive[bp][str];\n          if (tem && (fixedWidth || tem < slideCount)) {\n            arr.push(tem);\n          }\n        }\n      }\n      if (!arr.length) {\n        arr.push(0);\n      }\n      return Math.ceil(fixedWidth ? viewportMax / Math.min.apply(null, arr) : Math.max.apply(null, arr));\n    }\n  }\n  function getCloneCountForLoop() {\n    var itemsMax = getItemsMax(),\n      result = carousel ? Math.ceil((itemsMax * 5 - slideCount) / 2) : itemsMax * 4 - slideCount;\n    result = Math.max(itemsMax, result);\n    return hasOption('edgePadding') ? result + 1 : result;\n  }\n  function getWindowWidth() {\n    return win.innerWidth || doc.documentElement.clientWidth || doc.body.clientWidth;\n  }\n  function getInsertPosition(pos) {\n    return pos === 'top' ? 'afterbegin' : 'beforeend';\n  }\n  function getClientWidth(el) {\n    if (el == null) {\n      return;\n    }\n    var div = doc.createElement('div'),\n      rect,\n      width;\n    el.appendChild(div);\n    rect = div.getBoundingClientRect();\n    width = rect.right - rect.left;\n    div.remove();\n    return width || getClientWidth(el.parentNode);\n  }\n  function getViewportWidth() {\n    var gap = edgePadding ? edgePadding * 2 - gutter : 0;\n    return getClientWidth(containerParent) - gap;\n  }\n  function hasOption(item) {\n    if (options[item]) {\n      return true;\n    } else {\n      if (responsive) {\n        for (var bp in responsive) {\n          if (responsive[bp][item]) {\n            return true;\n          }\n        }\n      }\n      return false;\n    }\n  }\n\n  // get option:\n  // fixed width: viewport, fixedWidth, gutter => items\n  // others: window width => all variables\n  // all: items => slideBy\n  function getOption(item, ww) {\n    if (ww == null) {\n      ww = windowWidth;\n    }\n    if (item === 'items' && fixedWidth) {\n      return Math.floor((viewport + gutter) / (fixedWidth + gutter)) || 1;\n    } else {\n      var result = options[item];\n      if (responsive) {\n        for (var bp in responsive) {\n          // bp: convert string to number\n          if (ww >= parseInt(bp)) {\n            if (item in responsive[bp]) {\n              result = responsive[bp][item];\n            }\n          }\n        }\n      }\n      if (item === 'slideBy' && result === 'page') {\n        result = getOption('items');\n      }\n      if (!carousel && (item === 'slideBy' || item === 'items')) {\n        result = Math.floor(result);\n      }\n      return result;\n    }\n  }\n  function getSlideMarginLeft(i) {\n    return CALC ? CALC + '(' + i * 100 + '% / ' + slideCountNew + ')' : i * 100 / slideCountNew + '%';\n  }\n  function getInnerWrapperStyles(edgePaddingTem, gutterTem, fixedWidthTem, speedTem, autoHeightBP) {\n    var str = '';\n    if (edgePaddingTem !== undefined) {\n      var gap = edgePaddingTem;\n      if (gutterTem) {\n        gap -= gutterTem;\n      }\n      str = horizontal ? 'margin: 0 ' + gap + 'px 0 ' + edgePaddingTem + 'px;' : 'margin: ' + edgePaddingTem + 'px 0 ' + gap + 'px 0;';\n    } else if (gutterTem && !fixedWidthTem) {\n      var gutterTemUnit = '-' + gutterTem + 'px',\n        dir = horizontal ? gutterTemUnit + ' 0 0' : '0 ' + gutterTemUnit + ' 0';\n      str = 'margin: 0 ' + dir + ';';\n    }\n    if (!carousel && autoHeightBP && TRANSITIONDURATION && speedTem) {\n      str += getTransitionDurationStyle(speedTem);\n    }\n    return str;\n  }\n  function getContainerWidth(fixedWidthTem, gutterTem, itemsTem) {\n    if (fixedWidthTem) {\n      return (fixedWidthTem + gutterTem) * slideCountNew + 'px';\n    } else {\n      return CALC ? CALC + '(' + slideCountNew * 100 + '% / ' + itemsTem + ')' : slideCountNew * 100 / itemsTem + '%';\n    }\n  }\n  function getSlideWidthStyle(fixedWidthTem, gutterTem, itemsTem) {\n    var width;\n    if (fixedWidthTem) {\n      width = fixedWidthTem + gutterTem + 'px';\n    } else {\n      if (!carousel) {\n        itemsTem = Math.floor(itemsTem);\n      }\n      var dividend = carousel ? slideCountNew : itemsTem;\n      width = CALC ? CALC + '(100% / ' + dividend + ')' : 100 / dividend + '%';\n    }\n    width = 'width:' + width;\n\n    // inner slider: overwrite outer slider styles\n    return nested !== 'inner' ? width + ';' : width + ' !important;';\n  }\n  function getSlideGutterStyle(gutterTem) {\n    var str = '';\n\n    // gutter maybe interger || 0\n    // so can't use 'if (gutter)'\n    if (gutterTem !== false) {\n      var prop = horizontal ? 'padding-' : 'margin-',\n        dir = horizontal ? 'right' : 'bottom';\n      str = prop + dir + ': ' + gutterTem + 'px;';\n    }\n    return str;\n  }\n  function getCSSPrefix(name, num) {\n    var prefix = name.substring(0, name.length - num).toLowerCase();\n    if (prefix) {\n      prefix = '-' + prefix + '-';\n    }\n    return prefix;\n  }\n  function getTransitionDurationStyle(speed) {\n    return getCSSPrefix(TRANSITIONDURATION, 18) + 'transition-duration:' + speed / 1000 + 's;';\n  }\n  function getAnimationDurationStyle(speed) {\n    return getCSSPrefix(ANIMATIONDURATION, 17) + 'animation-duration:' + speed / 1000 + 's;';\n  }\n  function initStructure() {\n    var classOuter = 'tns-outer',\n      classInner = 'tns-inner',\n      hasGutter = hasOption('gutter');\n    outerWrapper.className = classOuter;\n    innerWrapper.className = classInner;\n    outerWrapper.id = slideId + '-ow';\n    innerWrapper.id = slideId + '-iw';\n\n    // set container properties\n    if (container.id === '') {\n      container.id = slideId;\n    }\n    newContainerClasses += PERCENTAGELAYOUT || autoWidth ? ' tns-subpixel' : ' tns-no-subpixel';\n    newContainerClasses += CALC ? ' tns-calc' : ' tns-no-calc';\n    if (autoWidth) {\n      newContainerClasses += ' tns-autowidth';\n    }\n    newContainerClasses += ' tns-' + options.axis;\n    container.className += newContainerClasses;\n\n    // add constrain layer for carousel\n    if (carousel) {\n      middleWrapper = doc.createElement('div');\n      middleWrapper.id = slideId + '-mw';\n      middleWrapper.className = 'tns-ovh';\n      outerWrapper.appendChild(middleWrapper);\n      middleWrapper.appendChild(innerWrapper);\n    } else {\n      outerWrapper.appendChild(innerWrapper);\n    }\n    if (autoHeight) {\n      var wp = middleWrapper ? middleWrapper : innerWrapper;\n      wp.className += ' tns-ah';\n    }\n    containerParent.insertBefore(outerWrapper, container);\n    innerWrapper.appendChild(container);\n\n    // add id, class, aria attributes\n    // before clone slides\n    forEach(slideItems, function (item, i) {\n      addClass(item, 'tns-item');\n      if (!item.id) {\n        item.id = slideId + '-item' + i;\n      }\n      if (!carousel && animateNormal) {\n        addClass(item, animateNormal);\n      }\n      setAttrs(item, {\n        'aria-hidden': 'true',\n        'tabindex': '-1'\n      });\n    });\n\n    // ## clone slides\n    // carousel: n + slides + n\n    // gallery:      slides + n\n    if (cloneCount) {\n      var fragmentBefore = doc.createDocumentFragment(),\n        fragmentAfter = doc.createDocumentFragment();\n      for (var j = cloneCount; j--;) {\n        var num = j % slideCount,\n          cloneFirst = slideItems[num].cloneNode(true);\n        addClass(cloneFirst, slideClonedClass);\n        removeAttrs(cloneFirst, 'id');\n        fragmentAfter.insertBefore(cloneFirst, fragmentAfter.firstChild);\n        if (carousel) {\n          var cloneLast = slideItems[slideCount - 1 - num].cloneNode(true);\n          addClass(cloneLast, slideClonedClass);\n          removeAttrs(cloneLast, 'id');\n          fragmentBefore.appendChild(cloneLast);\n        }\n      }\n      container.insertBefore(fragmentBefore, container.firstChild);\n      container.appendChild(fragmentAfter);\n      slideItems = container.children;\n    }\n  }\n  function initSliderTransform() {\n    // ## images loaded/failed\n    if (hasOption('autoHeight') || autoWidth || !horizontal) {\n      var imgs = container.querySelectorAll('img');\n\n      // add img load event listener\n      forEach(imgs, function (img) {\n        var src = img.src;\n        if (!lazyload) {\n          // not data img\n          if (src && src.indexOf('data:image') < 0) {\n            img.src = '';\n            addEvents(img, imgEvents);\n            addClass(img, 'loading');\n            img.src = src;\n            // data img\n          } else {\n            imgLoaded(img);\n          }\n        }\n      });\n\n      // set imgsComplete\n      raf(function () {\n        imgsLoadedCheck(arrayFromNodeList(imgs), function () {\n          imgsComplete = true;\n        });\n      });\n\n      // reset imgs for auto height: check visible imgs only\n      if (hasOption('autoHeight')) {\n        imgs = getImageArray(index, Math.min(index + items - 1, slideCountNew - 1));\n      }\n      lazyload ? initSliderTransformStyleCheck() : raf(function () {\n        imgsLoadedCheck(arrayFromNodeList(imgs), initSliderTransformStyleCheck);\n      });\n    } else {\n      // set container transform property\n      if (carousel) {\n        doContainerTransformSilent();\n      }\n\n      // update slider tools and events\n      initTools();\n      initEvents();\n    }\n  }\n  function initSliderTransformStyleCheck() {\n    if (autoWidth && slideCount > 1) {\n      // check styles application\n      var num = loop ? index : slideCount - 1;\n      (function stylesApplicationCheck() {\n        var left = slideItems[num].getBoundingClientRect().left;\n        var right = slideItems[num - 1].getBoundingClientRect().right;\n        Math.abs(left - right) <= 1 ? initSliderTransformCore() : setTimeout(function () {\n          stylesApplicationCheck();\n        }, 16);\n      })();\n    } else {\n      initSliderTransformCore();\n    }\n  }\n  function initSliderTransformCore() {\n    // run Fn()s which are rely on image loading\n    if (!horizontal || autoWidth) {\n      setSlidePositions();\n      if (autoWidth) {\n        rightBoundary = getRightBoundary();\n        if (freezable) {\n          freeze = getFreeze();\n        }\n        indexMax = getIndexMax(); // <= slidePositions, rightBoundary <=\n        resetVariblesWhenDisable(disable || freeze);\n      } else {\n        updateContentWrapperHeight();\n      }\n    }\n\n    // set container transform property\n    if (carousel) {\n      doContainerTransformSilent();\n    }\n\n    // update slider tools and events\n    initTools();\n    initEvents();\n  }\n  function initSheet() {\n    // gallery:\n    // set animation classes and left value for gallery slider\n    if (!carousel) {\n      for (var i = index, l = index + Math.min(slideCount, items); i < l; i++) {\n        var item = slideItems[i];\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, animateIn);\n        removeClass(item, animateNormal);\n      }\n    }\n\n    // #### LAYOUT\n\n    // ## INLINE-BLOCK VS FLOAT\n\n    // ## PercentageLayout:\n    // slides: inline-block\n    // remove blank space between slides by set font-size: 0\n\n    // ## Non PercentageLayout:\n    // slides: float\n    //         margin-right: -100%\n    //         margin-left: ~\n\n    // Resource: https://docs.google.com/spreadsheets/d/147up245wwTXeQYve3BRSAD4oVcvQmuGsFteJOeA5xNQ/edit?usp=sharing\n    if (horizontal) {\n      if (PERCENTAGELAYOUT || autoWidth) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', 'font-size:' + win.getComputedStyle(slideItems[0]).fontSize + ';', getCssRulesLength(sheet));\n        addCSSRule(sheet, '#' + slideId, 'font-size:0;', getCssRulesLength(sheet));\n      } else if (carousel) {\n        forEach(slideItems, function (slide, i) {\n          slide.style.marginLeft = getSlideMarginLeft(i);\n        });\n      }\n    }\n\n    // ## BASIC STYLES\n    if (CSSMQ) {\n      // middle wrapper style\n      if (TRANSITIONDURATION) {\n        var str = middleWrapper && options.autoHeight ? getTransitionDurationStyle(options.speed) : '';\n        addCSSRule(sheet, '#' + slideId + '-mw', str, getCssRulesLength(sheet));\n      }\n\n      // inner wrapper styles\n      str = getInnerWrapperStyles(options.edgePadding, options.gutter, options.fixedWidth, options.speed, options.autoHeight);\n      addCSSRule(sheet, '#' + slideId + '-iw', str, getCssRulesLength(sheet));\n\n      // container styles\n      if (carousel) {\n        str = horizontal && !autoWidth ? 'width:' + getContainerWidth(options.fixedWidth, options.gutter, options.items) + ';' : '';\n        if (TRANSITIONDURATION) {\n          str += getTransitionDurationStyle(speed);\n        }\n        addCSSRule(sheet, '#' + slideId, str, getCssRulesLength(sheet));\n      }\n\n      // slide styles\n      str = horizontal && !autoWidth ? getSlideWidthStyle(options.fixedWidth, options.gutter, options.items) : '';\n      if (options.gutter) {\n        str += getSlideGutterStyle(options.gutter);\n      }\n      // set gallery items transition-duration\n      if (!carousel) {\n        if (TRANSITIONDURATION) {\n          str += getTransitionDurationStyle(speed);\n        }\n        if (ANIMATIONDURATION) {\n          str += getAnimationDurationStyle(speed);\n        }\n      }\n      if (str) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n      }\n\n      // non CSS mediaqueries: IE8\n      // ## update inner wrapper, container, slides if needed\n      // set inline styles for inner wrapper & container\n      // insert stylesheet (one line) for slides only (since slides are many)\n    } else {\n      // middle wrapper styles\n      update_carousel_transition_duration();\n\n      // inner wrapper styles\n      innerWrapper.style.cssText = getInnerWrapperStyles(edgePadding, gutter, fixedWidth, autoHeight);\n\n      // container styles\n      if (carousel && horizontal && !autoWidth) {\n        container.style.width = getContainerWidth(fixedWidth, gutter, items);\n      }\n\n      // slide styles\n      var str = horizontal && !autoWidth ? getSlideWidthStyle(fixedWidth, gutter, items) : '';\n      if (gutter) {\n        str += getSlideGutterStyle(gutter);\n      }\n\n      // append to the last line\n      if (str) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n      }\n    }\n\n    // ## MEDIAQUERIES\n    if (responsive && CSSMQ) {\n      for (var bp in responsive) {\n        // bp: convert string to number\n        bp = parseInt(bp);\n        var opts = responsive[bp],\n          str = '',\n          middleWrapperStr = '',\n          innerWrapperStr = '',\n          containerStr = '',\n          slideStr = '',\n          itemsBP = !autoWidth ? getOption('items', bp) : null,\n          fixedWidthBP = getOption('fixedWidth', bp),\n          speedBP = getOption('speed', bp),\n          edgePaddingBP = getOption('edgePadding', bp),\n          autoHeightBP = getOption('autoHeight', bp),\n          gutterBP = getOption('gutter', bp);\n\n        // middle wrapper string\n        if (TRANSITIONDURATION && middleWrapper && getOption('autoHeight', bp) && 'speed' in opts) {\n          middleWrapperStr = '#' + slideId + '-mw{' + getTransitionDurationStyle(speedBP) + '}';\n        }\n\n        // inner wrapper string\n        if ('edgePadding' in opts || 'gutter' in opts) {\n          innerWrapperStr = '#' + slideId + '-iw{' + getInnerWrapperStyles(edgePaddingBP, gutterBP, fixedWidthBP, speedBP, autoHeightBP) + '}';\n        }\n\n        // container string\n        if (carousel && horizontal && !autoWidth && ('fixedWidth' in opts || 'items' in opts || fixedWidth && 'gutter' in opts)) {\n          containerStr = 'width:' + getContainerWidth(fixedWidthBP, gutterBP, itemsBP) + ';';\n        }\n        if (TRANSITIONDURATION && 'speed' in opts) {\n          containerStr += getTransitionDurationStyle(speedBP);\n        }\n        if (containerStr) {\n          containerStr = '#' + slideId + '{' + containerStr + '}';\n        }\n\n        // slide string\n        if ('fixedWidth' in opts || fixedWidth && 'gutter' in opts || !carousel && 'items' in opts) {\n          slideStr += getSlideWidthStyle(fixedWidthBP, gutterBP, itemsBP);\n        }\n        if ('gutter' in opts) {\n          slideStr += getSlideGutterStyle(gutterBP);\n        }\n        // set gallery items transition-duration\n        if (!carousel && 'speed' in opts) {\n          if (TRANSITIONDURATION) {\n            slideStr += getTransitionDurationStyle(speedBP);\n          }\n          if (ANIMATIONDURATION) {\n            slideStr += getAnimationDurationStyle(speedBP);\n          }\n        }\n        if (slideStr) {\n          slideStr = '#' + slideId + ' > .tns-item{' + slideStr + '}';\n        }\n\n        // add up\n        str = middleWrapperStr + innerWrapperStr + containerStr + slideStr;\n        if (str) {\n          sheet.insertRule('@media (min-width: ' + bp / 16 + 'em) {' + str + '}', sheet.cssRules.length);\n        }\n      }\n    }\n  }\n  function initTools() {\n    // == slides ==\n    updateSlideStatus();\n\n    // == live region ==\n    outerWrapper.insertAdjacentHTML('afterbegin', '<div class=\"tns-liveregion tns-visually-hidden\" aria-live=\"polite\" aria-atomic=\"true\">slide <span class=\"current\">' + getLiveRegionStr() + '</span>  of ' + slideCount + '</div>');\n    liveregionCurrent = outerWrapper.querySelector('.tns-liveregion .current');\n\n    // == autoplayInit ==\n    if (hasAutoplay) {\n      var txt = autoplay ? 'stop' : 'start';\n      if (autoplayButton) {\n        setAttrs(autoplayButton, {\n          'data-action': txt\n        });\n      } else if (options.autoplayButtonOutput) {\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.autoplayPosition), '<button type=\"button\" data-action=\"' + txt + '\">' + autoplayHtmlStrings[0] + txt + autoplayHtmlStrings[1] + autoplayText[0] + '</button>');\n        autoplayButton = outerWrapper.querySelector('[data-action]');\n      }\n\n      // add event\n      if (autoplayButton) {\n        addEvents(autoplayButton, {\n          'click': toggleAutoplay\n        });\n      }\n      if (autoplay) {\n        startAutoplay();\n        if (autoplayHoverPause) {\n          addEvents(container, hoverEvents);\n        }\n        if (autoplayResetOnVisibility) {\n          addEvents(container, visibilityEvent);\n        }\n      }\n    }\n\n    // == navInit ==\n    if (hasNav) {\n      var initIndex = !carousel ? 0 : cloneCount;\n      // customized nav\n      // will not hide the navs in case they're thumbnails\n      if (navContainer) {\n        setAttrs(navContainer, {\n          'aria-label': 'Carousel Pagination'\n        });\n        navItems = navContainer.children;\n        forEach(navItems, function (item, i) {\n          setAttrs(item, {\n            'data-nav': i,\n            'tabindex': '-1',\n            'aria-label': navStr + (i + 1),\n            'aria-controls': slideId\n          });\n        });\n\n        // generated nav\n      } else {\n        var navHtml = '',\n          hiddenStr = navAsThumbnails ? '' : 'style=\"display:none\"';\n        for (var i = 0; i < slideCount; i++) {\n          // hide nav items by default\n          navHtml += '<button type=\"button\" data-nav=\"' + i + '\" tabindex=\"-1\" aria-controls=\"' + slideId + '\" ' + hiddenStr + ' aria-label=\"' + navStr + (i + 1) + '\"></button>';\n        }\n        navHtml = '<div class=\"tns-nav\" aria-label=\"Carousel Pagination\">' + navHtml + '</div>';\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.navPosition), navHtml);\n        navContainer = outerWrapper.querySelector('.tns-nav');\n        navItems = navContainer.children;\n      }\n      updateNavVisibility();\n\n      // add transition\n      if (TRANSITIONDURATION) {\n        var prefix = TRANSITIONDURATION.substring(0, TRANSITIONDURATION.length - 18).toLowerCase(),\n          str = 'transition: all ' + speed / 1000 + 's';\n        if (prefix) {\n          str = '-' + prefix + '-' + str;\n        }\n        addCSSRule(sheet, '[aria-controls^=' + slideId + '-item]', str, getCssRulesLength(sheet));\n      }\n      setAttrs(navItems[navCurrentIndex], {\n        'aria-label': navStr + (navCurrentIndex + 1) + navStrCurrent\n      });\n      removeAttrs(navItems[navCurrentIndex], 'tabindex');\n      addClass(navItems[navCurrentIndex], navActiveClass);\n\n      // add events\n      addEvents(navContainer, navEvents);\n    }\n\n    // == controlsInit ==\n    if (hasControls) {\n      if (!controlsContainer && (!prevButton || !nextButton)) {\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.controlsPosition), '<div class=\"tns-controls\" aria-label=\"Carousel Navigation\" tabindex=\"0\"><button type=\"button\" data-controls=\"prev\" tabindex=\"-1\" aria-controls=\"' + slideId + '\">' + controlsText[0] + '</button><button type=\"button\" data-controls=\"next\" tabindex=\"-1\" aria-controls=\"' + slideId + '\">' + controlsText[1] + '</button></div>');\n        controlsContainer = outerWrapper.querySelector('.tns-controls');\n      }\n      if (!prevButton || !nextButton) {\n        prevButton = controlsContainer.children[0];\n        nextButton = controlsContainer.children[1];\n      }\n      if (options.controlsContainer) {\n        setAttrs(controlsContainer, {\n          'aria-label': 'Carousel Navigation',\n          'tabindex': '0'\n        });\n      }\n      if (options.controlsContainer || options.prevButton && options.nextButton) {\n        setAttrs([prevButton, nextButton], {\n          'aria-controls': slideId,\n          'tabindex': '-1'\n        });\n      }\n      if (options.controlsContainer || options.prevButton && options.nextButton) {\n        setAttrs(prevButton, {\n          'data-controls': 'prev'\n        });\n        setAttrs(nextButton, {\n          'data-controls': 'next'\n        });\n      }\n      prevIsButton = isButton(prevButton);\n      nextIsButton = isButton(nextButton);\n      updateControlsStatus();\n\n      // add events\n      if (controlsContainer) {\n        addEvents(controlsContainer, controlsEvents);\n      } else {\n        addEvents(prevButton, controlsEvents);\n        addEvents(nextButton, controlsEvents);\n      }\n    }\n\n    // hide tools if needed\n    disableUI();\n  }\n  function initEvents() {\n    // add events\n    if (carousel && TRANSITIONEND) {\n      var eve = {};\n      eve[TRANSITIONEND] = onTransitionEnd;\n      addEvents(container, eve);\n    }\n    if (touch) {\n      addEvents(container, touchEvents, options.preventScrollOnTouch);\n    }\n    if (mouseDrag) {\n      addEvents(container, dragEvents);\n    }\n    if (arrowKeys) {\n      addEvents(doc, docmentKeydownEvent);\n    }\n    if (nested === 'inner') {\n      events.on('outerResized', function () {\n        resizeTasks();\n        events.emit('innerLoaded', info());\n      });\n    } else if (responsive || fixedWidth || autoWidth || autoHeight || !horizontal) {\n      addEvents(win, {\n        'resize': onResize\n      });\n    }\n    if (autoHeight) {\n      if (nested === 'outer') {\n        events.on('innerLoaded', doAutoHeight);\n      } else if (!disable) {\n        doAutoHeight();\n      }\n    }\n    doLazyLoad();\n    if (disable) {\n      disableSlider();\n    } else if (freeze) {\n      freezeSlider();\n    }\n    events.on('indexChanged', additionalUpdates);\n    if (nested === 'inner') {\n      events.emit('innerLoaded', info());\n    }\n    if (typeof onInit === 'function') {\n      onInit(info());\n    }\n    isOn = true;\n  }\n  function destroy() {\n    // sheet\n    sheet.disabled = true;\n    if (sheet.ownerNode) {\n      sheet.ownerNode.remove();\n    }\n\n    // remove win event listeners\n    removeEvents(win, {\n      'resize': onResize\n    });\n\n    // arrowKeys, controls, nav\n    if (arrowKeys) {\n      removeEvents(doc, docmentKeydownEvent);\n    }\n    if (controlsContainer) {\n      removeEvents(controlsContainer, controlsEvents);\n    }\n    if (navContainer) {\n      removeEvents(navContainer, navEvents);\n    }\n\n    // autoplay\n    removeEvents(container, hoverEvents);\n    removeEvents(container, visibilityEvent);\n    if (autoplayButton) {\n      removeEvents(autoplayButton, {\n        'click': toggleAutoplay\n      });\n    }\n    if (autoplay) {\n      clearInterval(autoplayTimer);\n    }\n\n    // container\n    if (carousel && TRANSITIONEND) {\n      var eve = {};\n      eve[TRANSITIONEND] = onTransitionEnd;\n      removeEvents(container, eve);\n    }\n    if (touch) {\n      removeEvents(container, touchEvents);\n    }\n    if (mouseDrag) {\n      removeEvents(container, dragEvents);\n    }\n\n    // cache Object values in options && reset HTML\n    var htmlList = [containerHTML, controlsContainerHTML, prevButtonHTML, nextButtonHTML, navContainerHTML, autoplayButtonHTML];\n    tnsList.forEach(function (item, i) {\n      var el = item === 'container' ? outerWrapper : options[item];\n      if (typeof el === 'object' && el) {\n        var prevEl = el.previousElementSibling ? el.previousElementSibling : false,\n          parentEl = el.parentNode;\n        el.outerHTML = htmlList[i];\n        options[item] = prevEl ? prevEl.nextElementSibling : parentEl.firstElementChild;\n      }\n    });\n\n    // reset variables\n    tnsList = animateIn = animateOut = animateDelay = animateNormal = horizontal = outerWrapper = innerWrapper = container = containerParent = containerHTML = slideItems = slideCount = breakpointZone = windowWidth = autoWidth = fixedWidth = edgePadding = gutter = viewport = items = slideBy = viewportMax = arrowKeys = speed = rewind = loop = autoHeight = sheet = lazyload = slidePositions = slideItemsOut = cloneCount = slideCountNew = hasRightDeadZone = rightBoundary = updateIndexBeforeTransform = transformAttr = transformPrefix = transformPostfix = getIndexMax = index = indexCached = indexMin = indexMax = resizeTimer = swipeAngle = moveDirectionExpected = running = onInit = events = newContainerClasses = slideId = disable = disabled = freezable = freeze = frozen = controlsEvents = navEvents = hoverEvents = visibilityEvent = docmentKeydownEvent = touchEvents = dragEvents = hasControls = hasNav = navAsThumbnails = hasAutoplay = hasTouch = hasMouseDrag = slideActiveClass = imgCompleteClass = imgEvents = imgsComplete = controls = controlsText = controlsContainer = controlsContainerHTML = prevButton = nextButton = prevIsButton = nextIsButton = nav = navContainer = navContainerHTML = navItems = pages = pagesCached = navClicked = navCurrentIndex = navCurrentIndexCached = navActiveClass = navStr = navStrCurrent = autoplay = autoplayTimeout = autoplayDirection = autoplayText = autoplayHoverPause = autoplayButton = autoplayButtonHTML = autoplayResetOnVisibility = autoplayHtmlStrings = autoplayTimer = animating = autoplayHoverPaused = autoplayUserPaused = autoplayVisibilityPaused = initPosition = lastPosition = translateInit = disX = disY = panStart = rafIndex = getDist = touch = mouseDrag = null;\n    // check variables\n    // [animateIn, animateOut, animateDelay, animateNormal, horizontal, outerWrapper, innerWrapper, container, containerParent, containerHTML, slideItems, slideCount, breakpointZone, windowWidth, autoWidth, fixedWidth, edgePadding, gutter, viewport, items, slideBy, viewportMax, arrowKeys, speed, rewind, loop, autoHeight, sheet, lazyload, slidePositions, slideItemsOut, cloneCount, slideCountNew, hasRightDeadZone, rightBoundary, updateIndexBeforeTransform, transformAttr, transformPrefix, transformPostfix, getIndexMax, index, indexCached, indexMin, indexMax, resizeTimer, swipeAngle, moveDirectionExpected, running, onInit, events, newContainerClasses, slideId, disable, disabled, freezable, freeze, frozen, controlsEvents, navEvents, hoverEvents, visibilityEvent, docmentKeydownEvent, touchEvents, dragEvents, hasControls, hasNav, navAsThumbnails, hasAutoplay, hasTouch, hasMouseDrag, slideActiveClass, imgCompleteClass, imgEvents, imgsComplete, controls, controlsText, controlsContainer, controlsContainerHTML, prevButton, nextButton, prevIsButton, nextIsButton, nav, navContainer, navContainerHTML, navItems, pages, pagesCached, navClicked, navCurrentIndex, navCurrentIndexCached, navActiveClass, navStr, navStrCurrent, autoplay, autoplayTimeout, autoplayDirection, autoplayText, autoplayHoverPause, autoplayButton, autoplayButtonHTML, autoplayResetOnVisibility, autoplayHtmlStrings, autoplayTimer, animating, autoplayHoverPaused, autoplayUserPaused, autoplayVisibilityPaused, initPosition, lastPosition, translateInit, disX, disY, panStart, rafIndex, getDist, touch, mouseDrag ].forEach(function(item) { if (item !== null) { console.log(item); } });\n\n    for (var a in this) {\n      if (a !== 'rebuild') {\n        this[a] = null;\n      }\n    }\n    isOn = false;\n  }\n\n  // === ON RESIZE ===\n  // responsive || fixedWidth || autoWidth || !horizontal\n  function onResize(e) {\n    raf(function () {\n      resizeTasks(getEvent(e));\n    });\n  }\n  function resizeTasks(e) {\n    if (!isOn) {\n      return;\n    }\n    if (nested === 'outer') {\n      events.emit('outerResized', info(e));\n    }\n    windowWidth = getWindowWidth();\n    var bpChanged,\n      breakpointZoneTem = breakpointZone,\n      needContainerTransform = false;\n    if (responsive) {\n      setBreakpointZone();\n      bpChanged = breakpointZoneTem !== breakpointZone;\n      // if (hasRightDeadZone) { needContainerTransform = true; } // *?\n      if (bpChanged) {\n        events.emit('newBreakpointStart', info(e));\n      }\n    }\n    var indChanged,\n      itemsChanged,\n      itemsTem = items,\n      disableTem = disable,\n      freezeTem = freeze,\n      arrowKeysTem = arrowKeys,\n      controlsTem = controls,\n      navTem = nav,\n      touchTem = touch,\n      mouseDragTem = mouseDrag,\n      autoplayTem = autoplay,\n      autoplayHoverPauseTem = autoplayHoverPause,\n      autoplayResetOnVisibilityTem = autoplayResetOnVisibility,\n      indexTem = index;\n    if (bpChanged) {\n      var fixedWidthTem = fixedWidth,\n        autoHeightTem = autoHeight,\n        controlsTextTem = controlsText,\n        centerTem = center,\n        autoplayTextTem = autoplayText;\n      if (!CSSMQ) {\n        var gutterTem = gutter,\n          edgePaddingTem = edgePadding;\n      }\n    }\n\n    // get option:\n    // fixed width: viewport, fixedWidth, gutter => items\n    // others: window width => all variables\n    // all: items => slideBy\n    arrowKeys = getOption('arrowKeys');\n    controls = getOption('controls');\n    nav = getOption('nav');\n    touch = getOption('touch');\n    center = getOption('center');\n    mouseDrag = getOption('mouseDrag');\n    autoplay = getOption('autoplay');\n    autoplayHoverPause = getOption('autoplayHoverPause');\n    autoplayResetOnVisibility = getOption('autoplayResetOnVisibility');\n    if (bpChanged) {\n      disable = getOption('disable');\n      fixedWidth = getOption('fixedWidth');\n      speed = getOption('speed');\n      autoHeight = getOption('autoHeight');\n      controlsText = getOption('controlsText');\n      autoplayText = getOption('autoplayText');\n      autoplayTimeout = getOption('autoplayTimeout');\n      if (!CSSMQ) {\n        edgePadding = getOption('edgePadding');\n        gutter = getOption('gutter');\n      }\n    }\n    // update options\n    resetVariblesWhenDisable(disable);\n    viewport = getViewportWidth(); // <= edgePadding, gutter\n    if ((!horizontal || autoWidth) && !disable) {\n      setSlidePositions();\n      if (!horizontal) {\n        updateContentWrapperHeight(); // <= setSlidePositions\n        needContainerTransform = true;\n      }\n    }\n    if (fixedWidth || autoWidth) {\n      rightBoundary = getRightBoundary(); // autoWidth: <= viewport, slidePositions, gutter\n      // fixedWidth: <= viewport, fixedWidth, gutter\n      indexMax = getIndexMax(); // autoWidth: <= rightBoundary, slidePositions\n      // fixedWidth: <= rightBoundary, fixedWidth, gutter\n    }\n    if (bpChanged || fixedWidth) {\n      items = getOption('items');\n      slideBy = getOption('slideBy');\n      itemsChanged = items !== itemsTem;\n      if (itemsChanged) {\n        if (!fixedWidth && !autoWidth) {\n          indexMax = getIndexMax();\n        } // <= items\n        // check index before transform in case\n        // slider reach the right edge then items become bigger\n        updateIndex();\n      }\n    }\n    if (bpChanged) {\n      if (disable !== disableTem) {\n        if (disable) {\n          disableSlider();\n        } else {\n          enableSlider(); // <= slidePositions, rightBoundary, indexMax\n        }\n      }\n    }\n    if (freezable && (bpChanged || fixedWidth || autoWidth)) {\n      freeze = getFreeze(); // <= autoWidth: slidePositions, gutter, viewport, rightBoundary\n      // <= fixedWidth: fixedWidth, gutter, rightBoundary\n      // <= others: items\n\n      if (freeze !== freezeTem) {\n        if (freeze) {\n          doContainerTransform(getContainerTransformValue(getStartIndex(0)));\n          freezeSlider();\n        } else {\n          unfreezeSlider();\n          needContainerTransform = true;\n        }\n      }\n    }\n    resetVariblesWhenDisable(disable || freeze); // controls, nav, touch, mouseDrag, arrowKeys, autoplay, autoplayHoverPause, autoplayResetOnVisibility\n    if (!autoplay) {\n      autoplayHoverPause = autoplayResetOnVisibility = false;\n    }\n    if (arrowKeys !== arrowKeysTem) {\n      arrowKeys ? addEvents(doc, docmentKeydownEvent) : removeEvents(doc, docmentKeydownEvent);\n    }\n    if (controls !== controlsTem) {\n      if (controls) {\n        if (controlsContainer) {\n          showElement(controlsContainer);\n        } else {\n          if (prevButton) {\n            showElement(prevButton);\n          }\n          if (nextButton) {\n            showElement(nextButton);\n          }\n        }\n      } else {\n        if (controlsContainer) {\n          hideElement(controlsContainer);\n        } else {\n          if (prevButton) {\n            hideElement(prevButton);\n          }\n          if (nextButton) {\n            hideElement(nextButton);\n          }\n        }\n      }\n    }\n    if (nav !== navTem) {\n      if (nav) {\n        showElement(navContainer);\n        updateNavVisibility();\n      } else {\n        hideElement(navContainer);\n      }\n    }\n    if (touch !== touchTem) {\n      touch ? addEvents(container, touchEvents, options.preventScrollOnTouch) : removeEvents(container, touchEvents);\n    }\n    if (mouseDrag !== mouseDragTem) {\n      mouseDrag ? addEvents(container, dragEvents) : removeEvents(container, dragEvents);\n    }\n    if (autoplay !== autoplayTem) {\n      if (autoplay) {\n        if (autoplayButton) {\n          showElement(autoplayButton);\n        }\n        if (!animating && !autoplayUserPaused) {\n          startAutoplay();\n        }\n      } else {\n        if (autoplayButton) {\n          hideElement(autoplayButton);\n        }\n        if (animating) {\n          stopAutoplay();\n        }\n      }\n    }\n    if (autoplayHoverPause !== autoplayHoverPauseTem) {\n      autoplayHoverPause ? addEvents(container, hoverEvents) : removeEvents(container, hoverEvents);\n    }\n    if (autoplayResetOnVisibility !== autoplayResetOnVisibilityTem) {\n      autoplayResetOnVisibility ? addEvents(doc, visibilityEvent) : removeEvents(doc, visibilityEvent);\n    }\n    if (bpChanged) {\n      if (fixedWidth !== fixedWidthTem || center !== centerTem) {\n        needContainerTransform = true;\n      }\n      if (autoHeight !== autoHeightTem) {\n        if (!autoHeight) {\n          innerWrapper.style.height = '';\n        }\n      }\n      if (controls && controlsText !== controlsTextTem) {\n        prevButton.innerHTML = controlsText[0];\n        nextButton.innerHTML = controlsText[1];\n      }\n      if (autoplayButton && autoplayText !== autoplayTextTem) {\n        var i = autoplay ? 1 : 0,\n          html = autoplayButton.innerHTML,\n          len = html.length - autoplayTextTem[i].length;\n        if (html.substring(len) === autoplayTextTem[i]) {\n          autoplayButton.innerHTML = html.substring(0, len) + autoplayText[i];\n        }\n      }\n    } else {\n      if (center && (fixedWidth || autoWidth)) {\n        needContainerTransform = true;\n      }\n    }\n    if (itemsChanged || fixedWidth && !autoWidth) {\n      pages = getPages();\n      updateNavVisibility();\n    }\n    indChanged = index !== indexTem;\n    if (indChanged) {\n      events.emit('indexChanged', info());\n      needContainerTransform = true;\n    } else if (itemsChanged) {\n      if (!indChanged) {\n        additionalUpdates();\n      }\n    } else if (fixedWidth || autoWidth) {\n      doLazyLoad();\n      updateSlideStatus();\n      updateLiveRegion();\n    }\n    if (itemsChanged && !carousel) {\n      updateGallerySlidePositions();\n    }\n    if (!disable && !freeze) {\n      // non-mediaqueries: IE8\n      if (bpChanged && !CSSMQ) {\n        // middle wrapper styles\n\n        // inner wrapper styles\n        if (edgePadding !== edgePaddingTem || gutter !== gutterTem) {\n          innerWrapper.style.cssText = getInnerWrapperStyles(edgePadding, gutter, fixedWidth, speed, autoHeight);\n        }\n        if (horizontal) {\n          // container styles\n          if (carousel) {\n            container.style.width = getContainerWidth(fixedWidth, gutter, items);\n          }\n\n          // slide styles\n          var str = getSlideWidthStyle(fixedWidth, gutter, items) + getSlideGutterStyle(gutter);\n\n          // remove the last line and\n          // add new styles\n          removeCSSRule(sheet, getCssRulesLength(sheet) - 1);\n          addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n        }\n      }\n\n      // auto height\n      if (autoHeight) {\n        doAutoHeight();\n      }\n      if (needContainerTransform) {\n        doContainerTransformSilent();\n        indexCached = index;\n      }\n    }\n    if (bpChanged) {\n      events.emit('newBreakpointEnd', info(e));\n    }\n  }\n\n  // === INITIALIZATION FUNCTIONS === //\n  function getFreeze() {\n    if (!fixedWidth && !autoWidth) {\n      var a = center ? items - (items - 1) / 2 : items;\n      return slideCount <= a;\n    }\n    var width = fixedWidth ? (fixedWidth + gutter) * slideCount : slidePositions[slideCount],\n      vp = edgePadding ? viewport + edgePadding * 2 : viewport + gutter;\n    if (center) {\n      vp -= fixedWidth ? (viewport - fixedWidth) / 2 : (viewport - (slidePositions[index + 1] - slidePositions[index] - gutter)) / 2;\n    }\n    return width <= vp;\n  }\n  function setBreakpointZone() {\n    breakpointZone = 0;\n    for (var bp in responsive) {\n      bp = parseInt(bp); // convert string to number\n      if (windowWidth >= bp) {\n        breakpointZone = bp;\n      }\n    }\n  }\n\n  // (slideBy, indexMin, indexMax) => index\n  var updateIndex = function () {\n    return loop ? carousel ?\n    // loop + carousel\n    function () {\n      var leftEdge = indexMin,\n        rightEdge = indexMax;\n      leftEdge += slideBy;\n      rightEdge -= slideBy;\n\n      // adjust edges when has edge paddings\n      // or fixed-width slider with extra space on the right side\n      if (edgePadding) {\n        leftEdge += 1;\n        rightEdge -= 1;\n      } else if (fixedWidth) {\n        if ((viewport + gutter) % (fixedWidth + gutter)) {\n          rightEdge -= 1;\n        }\n      }\n      if (cloneCount) {\n        if (index > rightEdge) {\n          index -= slideCount;\n        } else if (index < leftEdge) {\n          index += slideCount;\n        }\n      }\n    } :\n    // loop + gallery\n    function () {\n      if (index > indexMax) {\n        while (index >= indexMin + slideCount) {\n          index -= slideCount;\n        }\n      } else if (index < indexMin) {\n        while (index <= indexMax - slideCount) {\n          index += slideCount;\n        }\n      }\n    } :\n    // non-loop\n    function () {\n      index = Math.max(indexMin, Math.min(indexMax, index));\n    };\n  }();\n  function disableUI() {\n    if (!autoplay && autoplayButton) {\n      hideElement(autoplayButton);\n    }\n    if (!nav && navContainer) {\n      hideElement(navContainer);\n    }\n    if (!controls) {\n      if (controlsContainer) {\n        hideElement(controlsContainer);\n      } else {\n        if (prevButton) {\n          hideElement(prevButton);\n        }\n        if (nextButton) {\n          hideElement(nextButton);\n        }\n      }\n    }\n  }\n  function enableUI() {\n    if (autoplay && autoplayButton) {\n      showElement(autoplayButton);\n    }\n    if (nav && navContainer) {\n      showElement(navContainer);\n    }\n    if (controls) {\n      if (controlsContainer) {\n        showElement(controlsContainer);\n      } else {\n        if (prevButton) {\n          showElement(prevButton);\n        }\n        if (nextButton) {\n          showElement(nextButton);\n        }\n      }\n    }\n  }\n  function freezeSlider() {\n    if (frozen) {\n      return;\n    }\n\n    // remove edge padding from inner wrapper\n    if (edgePadding) {\n      innerWrapper.style.margin = '0px';\n    }\n\n    // add class tns-transparent to cloned slides\n    if (cloneCount) {\n      var str = 'tns-transparent';\n      for (var i = cloneCount; i--;) {\n        if (carousel) {\n          addClass(slideItems[i], str);\n        }\n        addClass(slideItems[slideCountNew - i - 1], str);\n      }\n    }\n\n    // update tools\n    disableUI();\n    frozen = true;\n  }\n  function unfreezeSlider() {\n    if (!frozen) {\n      return;\n    }\n\n    // restore edge padding for inner wrapper\n    // for mordern browsers\n    if (edgePadding && CSSMQ) {\n      innerWrapper.style.margin = '';\n    }\n\n    // remove class tns-transparent to cloned slides\n    if (cloneCount) {\n      var str = 'tns-transparent';\n      for (var i = cloneCount; i--;) {\n        if (carousel) {\n          removeClass(slideItems[i], str);\n        }\n        removeClass(slideItems[slideCountNew - i - 1], str);\n      }\n    }\n\n    // update tools\n    enableUI();\n    frozen = false;\n  }\n  function disableSlider() {\n    if (disabled) {\n      return;\n    }\n    sheet.disabled = true;\n    container.className = container.className.replace(newContainerClasses.substring(1), '');\n    removeAttrs(container, ['style']);\n    if (loop) {\n      for (var j = cloneCount; j--;) {\n        if (carousel) {\n          hideElement(slideItems[j]);\n        }\n        hideElement(slideItems[slideCountNew - j - 1]);\n      }\n    }\n\n    // vertical slider\n    if (!horizontal || !carousel) {\n      removeAttrs(innerWrapper, ['style']);\n    }\n\n    // gallery\n    if (!carousel) {\n      for (var i = index, l = index + slideCount; i < l; i++) {\n        var item = slideItems[i];\n        removeAttrs(item, ['style']);\n        removeClass(item, animateIn);\n        removeClass(item, animateNormal);\n      }\n    }\n\n    // update tools\n    disableUI();\n    disabled = true;\n  }\n  function enableSlider() {\n    if (!disabled) {\n      return;\n    }\n    sheet.disabled = false;\n    container.className += newContainerClasses;\n    doContainerTransformSilent();\n    if (loop) {\n      for (var j = cloneCount; j--;) {\n        if (carousel) {\n          showElement(slideItems[j]);\n        }\n        showElement(slideItems[slideCountNew - j - 1]);\n      }\n    }\n\n    // gallery\n    if (!carousel) {\n      for (var i = index, l = index + slideCount; i < l; i++) {\n        var item = slideItems[i],\n          classN = i < index + items ? animateIn : animateNormal;\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, classN);\n      }\n    }\n\n    // update tools\n    enableUI();\n    disabled = false;\n  }\n  function updateLiveRegion() {\n    var str = getLiveRegionStr();\n    if (liveregionCurrent.innerHTML !== str) {\n      liveregionCurrent.innerHTML = str;\n    }\n  }\n  function getLiveRegionStr() {\n    var arr = getVisibleSlideRange(),\n      start = arr[0] + 1,\n      end = arr[1] + 1;\n    return start === end ? start + '' : start + ' to ' + end;\n  }\n  function getVisibleSlideRange(val) {\n    if (val == null) {\n      val = getContainerTransformValue();\n    }\n    var start = index,\n      end,\n      rangestart,\n      rangeend;\n\n    // get range start, range end for autoWidth and fixedWidth\n    if (center || edgePadding) {\n      if (autoWidth || fixedWidth) {\n        rangestart = -(parseFloat(val) + edgePadding);\n        rangeend = rangestart + viewport + edgePadding * 2;\n      }\n    } else {\n      if (autoWidth) {\n        rangestart = slidePositions[index];\n        rangeend = rangestart + viewport;\n      }\n    }\n\n    // get start, end\n    // - check auto width\n    if (autoWidth) {\n      slidePositions.forEach(function (point, i) {\n        if (i < slideCountNew) {\n          if ((center || edgePadding) && point <= rangestart + 0.5) {\n            start = i;\n          }\n          if (rangeend - point >= 0.5) {\n            end = i;\n          }\n        }\n      });\n\n      // - check percentage width, fixed width\n    } else {\n      if (fixedWidth) {\n        var cell = fixedWidth + gutter;\n        if (center || edgePadding) {\n          start = Math.floor(rangestart / cell);\n          end = Math.ceil(rangeend / cell - 1);\n        } else {\n          end = start + Math.ceil(viewport / cell) - 1;\n        }\n      } else {\n        if (center || edgePadding) {\n          var a = items - 1;\n          if (center) {\n            start -= a / 2;\n            end = index + a / 2;\n          } else {\n            end = index + a;\n          }\n          if (edgePadding) {\n            var b = edgePadding * items / viewport;\n            start -= b;\n            end += b;\n          }\n          start = Math.floor(start);\n          end = Math.ceil(end);\n        } else {\n          end = start + items - 1;\n        }\n      }\n      start = Math.max(start, 0);\n      end = Math.min(end, slideCountNew - 1);\n    }\n    return [start, end];\n  }\n  function doLazyLoad() {\n    if (lazyload && !disable) {\n      var arg = getVisibleSlideRange();\n      arg.push(lazyloadSelector);\n      getImageArray.apply(null, arg).forEach(function (img) {\n        if (!hasClass(img, imgCompleteClass)) {\n          // stop propagation transitionend event to container\n          var eve = {};\n          eve[TRANSITIONEND] = function (e) {\n            e.stopPropagation();\n          };\n          addEvents(img, eve);\n          addEvents(img, imgEvents);\n\n          // update src\n          img.src = getAttr(img, 'data-src');\n\n          // update srcset\n          var srcset = getAttr(img, 'data-srcset');\n          if (srcset) {\n            img.srcset = srcset;\n          }\n          addClass(img, 'loading');\n        }\n      });\n    }\n  }\n  function onImgLoaded(e) {\n    imgLoaded(getTarget(e));\n  }\n  function onImgFailed(e) {\n    imgFailed(getTarget(e));\n  }\n  function imgLoaded(img) {\n    addClass(img, 'loaded');\n    imgCompleted(img);\n  }\n  function imgFailed(img) {\n    addClass(img, 'failed');\n    imgCompleted(img);\n  }\n  function imgCompleted(img) {\n    addClass(img, imgCompleteClass);\n    removeClass(img, 'loading');\n    removeEvents(img, imgEvents);\n  }\n  function getImageArray(start, end, imgSelector) {\n    var imgs = [];\n    if (!imgSelector) {\n      imgSelector = 'img';\n    }\n    while (start <= end) {\n      forEach(slideItems[start].querySelectorAll(imgSelector), function (img) {\n        imgs.push(img);\n      });\n      start++;\n    }\n    return imgs;\n  }\n\n  // check if all visible images are loaded\n  // and update container height if it's done\n  function doAutoHeight() {\n    var imgs = getImageArray.apply(null, getVisibleSlideRange());\n    raf(function () {\n      imgsLoadedCheck(imgs, updateInnerWrapperHeight);\n    });\n  }\n  function imgsLoadedCheck(imgs, cb) {\n    // execute callback function if all images are complete\n    if (imgsComplete) {\n      return cb();\n    }\n\n    // check image classes\n    imgs.forEach(function (img, index) {\n      if (!lazyload && img.complete) {\n        imgCompleted(img);\n      } // Check image.complete\n      if (hasClass(img, imgCompleteClass)) {\n        imgs.splice(index, 1);\n      }\n    });\n\n    // execute callback function if selected images are all complete\n    if (!imgs.length) {\n      return cb();\n    }\n\n    // otherwise execute this functiona again\n    raf(function () {\n      imgsLoadedCheck(imgs, cb);\n    });\n  }\n  function additionalUpdates() {\n    doLazyLoad();\n    updateSlideStatus();\n    updateLiveRegion();\n    updateControlsStatus();\n    updateNavStatus();\n  }\n  function update_carousel_transition_duration() {\n    if (carousel && autoHeight) {\n      middleWrapper.style[TRANSITIONDURATION] = speed / 1000 + 's';\n    }\n  }\n  function getMaxSlideHeight(slideStart, slideRange) {\n    var heights = [];\n    for (var i = slideStart, l = Math.min(slideStart + slideRange, slideCountNew); i < l; i++) {\n      heights.push(slideItems[i].offsetHeight);\n    }\n    return Math.max.apply(null, heights);\n  }\n\n  // update inner wrapper height\n  // 1. get the max-height of the visible slides\n  // 2. set transitionDuration to speed\n  // 3. update inner wrapper height to max-height\n  // 4. set transitionDuration to 0s after transition done\n  function updateInnerWrapperHeight() {\n    var maxHeight = autoHeight ? getMaxSlideHeight(index, items) : getMaxSlideHeight(cloneCount, slideCount),\n      wp = middleWrapper ? middleWrapper : innerWrapper;\n    if (wp.style.height !== maxHeight) {\n      wp.style.height = maxHeight + 'px';\n    }\n  }\n\n  // get the distance from the top edge of the first slide to each slide\n  // (init) => slidePositions\n  function setSlidePositions() {\n    slidePositions = [0];\n    var attr = horizontal ? 'left' : 'top',\n      attr2 = horizontal ? 'right' : 'bottom',\n      base = slideItems[0].getBoundingClientRect()[attr];\n    forEach(slideItems, function (item, i) {\n      // skip the first slide\n      if (i) {\n        slidePositions.push(item.getBoundingClientRect()[attr] - base);\n      }\n      // add the end edge\n      if (i === slideCountNew - 1) {\n        slidePositions.push(item.getBoundingClientRect()[attr2] - base);\n      }\n    });\n  }\n\n  // update slide\n  function updateSlideStatus() {\n    var range = getVisibleSlideRange(),\n      start = range[0],\n      end = range[1];\n    forEach(slideItems, function (item, i) {\n      // show slides\n      if (i >= start && i <= end) {\n        if (hasAttr(item, 'aria-hidden')) {\n          removeAttrs(item, ['aria-hidden', 'tabindex']);\n          addClass(item, slideActiveClass);\n        }\n        // hide slides\n      } else {\n        if (!hasAttr(item, 'aria-hidden')) {\n          setAttrs(item, {\n            'aria-hidden': 'true',\n            'tabindex': '-1'\n          });\n          removeClass(item, slideActiveClass);\n        }\n      }\n    });\n  }\n\n  // gallery: update slide position\n  function updateGallerySlidePositions() {\n    var l = index + Math.min(slideCount, items);\n    for (var i = slideCountNew; i--;) {\n      var item = slideItems[i];\n      if (i >= index && i < l) {\n        // add transitions to visible slides when adjusting their positions\n        addClass(item, 'tns-moving');\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, animateIn);\n        removeClass(item, animateNormal);\n      } else if (item.style.left) {\n        item.style.left = '';\n        addClass(item, animateNormal);\n        removeClass(item, animateIn);\n      }\n\n      // remove outlet animation\n      removeClass(item, animateOut);\n    }\n\n    // removing '.tns-moving'\n    setTimeout(function () {\n      forEach(slideItems, function (el) {\n        removeClass(el, 'tns-moving');\n      });\n    }, 300);\n  }\n\n  // set tabindex on Nav\n  function updateNavStatus() {\n    // get current nav\n    if (nav) {\n      navCurrentIndex = navClicked >= 0 ? navClicked : getCurrentNavIndex();\n      navClicked = -1;\n      if (navCurrentIndex !== navCurrentIndexCached) {\n        var navPrev = navItems[navCurrentIndexCached],\n          navCurrent = navItems[navCurrentIndex];\n        setAttrs(navPrev, {\n          'tabindex': '-1',\n          'aria-label': navStr + (navCurrentIndexCached + 1)\n        });\n        removeClass(navPrev, navActiveClass);\n        setAttrs(navCurrent, {\n          'aria-label': navStr + (navCurrentIndex + 1) + navStrCurrent\n        });\n        removeAttrs(navCurrent, 'tabindex');\n        addClass(navCurrent, navActiveClass);\n        navCurrentIndexCached = navCurrentIndex;\n      }\n    }\n  }\n  function getLowerCaseNodeName(el) {\n    return el.nodeName.toLowerCase();\n  }\n  function isButton(el) {\n    return getLowerCaseNodeName(el) === 'button';\n  }\n  function isAriaDisabled(el) {\n    return el.getAttribute('aria-disabled') === 'true';\n  }\n  function disEnableElement(isButton, el, val) {\n    if (isButton) {\n      el.disabled = val;\n    } else {\n      el.setAttribute('aria-disabled', val.toString());\n    }\n  }\n\n  // set 'disabled' to true on controls when reach the edges\n  function updateControlsStatus() {\n    if (!controls || rewind || loop) {\n      return;\n    }\n    var prevDisabled = prevIsButton ? prevButton.disabled : isAriaDisabled(prevButton),\n      nextDisabled = nextIsButton ? nextButton.disabled : isAriaDisabled(nextButton),\n      disablePrev = index <= indexMin ? true : false,\n      disableNext = !rewind && index >= indexMax ? true : false;\n    if (disablePrev && !prevDisabled) {\n      disEnableElement(prevIsButton, prevButton, true);\n    }\n    if (!disablePrev && prevDisabled) {\n      disEnableElement(prevIsButton, prevButton, false);\n    }\n    if (disableNext && !nextDisabled) {\n      disEnableElement(nextIsButton, nextButton, true);\n    }\n    if (!disableNext && nextDisabled) {\n      disEnableElement(nextIsButton, nextButton, false);\n    }\n  }\n\n  // set duration\n  function resetDuration(el, str) {\n    if (TRANSITIONDURATION) {\n      el.style[TRANSITIONDURATION] = str;\n    }\n  }\n  function getSliderWidth() {\n    return fixedWidth ? (fixedWidth + gutter) * slideCountNew : slidePositions[slideCountNew];\n  }\n  function getCenterGap(num) {\n    if (num == null) {\n      num = index;\n    }\n    var gap = edgePadding ? gutter : 0;\n    return autoWidth ? (viewport - gap - (slidePositions[num + 1] - slidePositions[num] - gutter)) / 2 : fixedWidth ? (viewport - fixedWidth) / 2 : (items - 1) / 2;\n  }\n  function getRightBoundary() {\n    var gap = edgePadding ? gutter : 0,\n      result = viewport + gap - getSliderWidth();\n    if (center && !loop) {\n      result = fixedWidth ? -(fixedWidth + gutter) * (slideCountNew - 1) - getCenterGap() : getCenterGap(slideCountNew - 1) - slidePositions[slideCountNew - 1];\n    }\n    if (result > 0) {\n      result = 0;\n    }\n    return result;\n  }\n  function getContainerTransformValue(num) {\n    if (num == null) {\n      num = index;\n    }\n    var val;\n    if (horizontal && !autoWidth) {\n      if (fixedWidth) {\n        val = -(fixedWidth + gutter) * num;\n        if (center) {\n          val += getCenterGap();\n        }\n      } else {\n        var denominator = TRANSFORM ? slideCountNew : items;\n        if (center) {\n          num -= getCenterGap();\n        }\n        val = -num * 100 / denominator;\n      }\n    } else {\n      val = -slidePositions[num];\n      if (center && autoWidth) {\n        val += getCenterGap();\n      }\n    }\n    if (hasRightDeadZone) {\n      val = Math.max(val, rightBoundary);\n    }\n    val += horizontal && !autoWidth && !fixedWidth ? '%' : 'px';\n    return val;\n  }\n  function doContainerTransformSilent(val) {\n    resetDuration(container, '0s');\n    doContainerTransform(val);\n  }\n  function doContainerTransform(val) {\n    if (val == null) {\n      val = getContainerTransformValue();\n    }\n    container.style[transformAttr] = transformPrefix + val + transformPostfix;\n  }\n  function animateSlide(number, classOut, classIn, isOut) {\n    var l = number + items;\n    if (!loop) {\n      l = Math.min(l, slideCountNew);\n    }\n    for (var i = number; i < l; i++) {\n      var item = slideItems[i];\n\n      // set item positions\n      if (!isOut) {\n        item.style.left = (i - index) * 100 / items + '%';\n      }\n      if (animateDelay && TRANSITIONDELAY) {\n        item.style[TRANSITIONDELAY] = item.style[ANIMATIONDELAY] = animateDelay * (i - number) / 1000 + 's';\n      }\n      removeClass(item, classOut);\n      addClass(item, classIn);\n      if (isOut) {\n        slideItemsOut.push(item);\n      }\n    }\n  }\n\n  // make transfer after click/drag:\n  // 1. change 'transform' property for mordern browsers\n  // 2. change 'left' property for legacy browsers\n  var transformCore = function () {\n    return carousel ? function () {\n      resetDuration(container, '');\n      if (TRANSITIONDURATION || !speed) {\n        // for morden browsers with non-zero duration or\n        // zero duration for all browsers\n        doContainerTransform();\n        // run fallback function manually\n        // when duration is 0 / container is hidden\n        if (!speed || !isVisible(container)) {\n          onTransitionEnd();\n        }\n      } else {\n        // for old browser with non-zero duration\n        jsTransform(container, transformAttr, transformPrefix, transformPostfix, getContainerTransformValue(), speed, onTransitionEnd);\n      }\n      if (!horizontal) {\n        updateContentWrapperHeight();\n      }\n    } : function () {\n      slideItemsOut = [];\n      var eve = {};\n      eve[TRANSITIONEND] = eve[ANIMATIONEND] = onTransitionEnd;\n      removeEvents(slideItems[indexCached], eve);\n      addEvents(slideItems[index], eve);\n      animateSlide(indexCached, animateIn, animateOut, true);\n      animateSlide(index, animateNormal, animateIn);\n\n      // run fallback function manually\n      // when transition or animation not supported / duration is 0\n      if (!TRANSITIONEND || !ANIMATIONEND || !speed || !isVisible(container)) {\n        onTransitionEnd();\n      }\n    };\n  }();\n  function render(e, sliderMoved) {\n    if (updateIndexBeforeTransform) {\n      updateIndex();\n    }\n\n    // render when slider was moved (touch or drag) even though index may not change\n    if (index !== indexCached || sliderMoved) {\n      // events\n      events.emit('indexChanged', info());\n      events.emit('transitionStart', info());\n      if (autoHeight) {\n        doAutoHeight();\n      }\n\n      // pause autoplay when click or keydown from user\n      if (animating && e && ['click', 'keydown'].indexOf(e.type) >= 0) {\n        stopAutoplay();\n      }\n      running = true;\n      transformCore();\n    }\n  }\n\n  /*\n   * Transfer prefixed properties to the same format\n   * CSS: -Webkit-Transform => webkittransform\n   * JS: WebkitTransform => webkittransform\n   * @param {string} str - property\n   *\n   */\n  function strTrans(str) {\n    return str.toLowerCase().replace(/-/g, '');\n  }\n\n  // AFTER TRANSFORM\n  // Things need to be done after a transfer:\n  // 1. check index\n  // 2. add classes to visible slide\n  // 3. disable controls buttons when reach the first/last slide in non-loop slider\n  // 4. update nav status\n  // 5. lazyload images\n  // 6. update container height\n  function onTransitionEnd(event) {\n    // check running on gallery mode\n    // make sure trantionend/animationend events run only once\n    if (carousel || running) {\n      events.emit('transitionEnd', info(event));\n      if (!carousel && slideItemsOut.length > 0) {\n        for (var i = 0; i < slideItemsOut.length; i++) {\n          var item = slideItemsOut[i];\n          // set item positions\n          item.style.left = '';\n          if (ANIMATIONDELAY && TRANSITIONDELAY) {\n            item.style[ANIMATIONDELAY] = '';\n            item.style[TRANSITIONDELAY] = '';\n          }\n          removeClass(item, animateOut);\n          addClass(item, animateNormal);\n        }\n      }\n\n      /* update slides, nav, controls after checking ...\n       * => legacy browsers who don't support 'event'\n       *    have to check event first, otherwise event.target will cause an error\n       * => or 'gallery' mode:\n       *   + event target is slide item\n       * => or 'carousel' mode:\n       *   + event target is container,\n       *   + event.property is the same with transform attribute\n       */\n      if (!event || !carousel && event.target.parentNode === container || event.target === container && strTrans(event.propertyName) === strTrans(transformAttr)) {\n        if (!updateIndexBeforeTransform) {\n          var indexTem = index;\n          updateIndex();\n          if (index !== indexTem) {\n            events.emit('indexChanged', info());\n            doContainerTransformSilent();\n          }\n        }\n        if (nested === 'inner') {\n          events.emit('innerLoaded', info());\n        }\n        running = false;\n        indexCached = index;\n      }\n    }\n  }\n\n  // # ACTIONS\n  function goTo(targetIndex, e) {\n    if (freeze) {\n      return;\n    }\n\n    // prev slideBy\n    if (targetIndex === 'prev') {\n      onControlsClick(e, -1);\n\n      // next slideBy\n    } else if (targetIndex === 'next') {\n      onControlsClick(e, 1);\n\n      // go to exact slide\n    } else {\n      if (running) {\n        if (preventActionWhenRunning) {\n          return;\n        } else {\n          onTransitionEnd();\n        }\n      }\n      var absIndex = getAbsIndex(),\n        indexGap = 0;\n      if (targetIndex === 'first') {\n        indexGap = -absIndex;\n      } else if (targetIndex === 'last') {\n        indexGap = carousel ? slideCount - items - absIndex : slideCount - 1 - absIndex;\n      } else {\n        if (typeof targetIndex !== 'number') {\n          targetIndex = parseInt(targetIndex);\n        }\n        if (!isNaN(targetIndex)) {\n          // from directly called goTo function\n          if (!e) {\n            targetIndex = Math.max(0, Math.min(slideCount - 1, targetIndex));\n          }\n          indexGap = targetIndex - absIndex;\n        }\n      }\n\n      // gallery: make sure new page won't overlap with current page\n      if (!carousel && indexGap && Math.abs(indexGap) < items) {\n        var factor = indexGap > 0 ? 1 : -1;\n        indexGap += index + indexGap - slideCount >= indexMin ? slideCount * factor : slideCount * 2 * factor * -1;\n      }\n      index += indexGap;\n\n      // make sure index is in range\n      if (carousel && loop) {\n        if (index < indexMin) {\n          index += slideCount;\n        }\n        if (index > indexMax) {\n          index -= slideCount;\n        }\n      }\n\n      // if index is changed, start rendering\n      if (getAbsIndex(index) !== getAbsIndex(indexCached)) {\n        render(e);\n      }\n    }\n  }\n\n  // on controls click\n  function onControlsClick(e, dir) {\n    if (running) {\n      if (preventActionWhenRunning) {\n        return;\n      } else {\n        onTransitionEnd();\n      }\n    }\n    var passEventObject;\n    if (!dir) {\n      e = getEvent(e);\n      var target = getTarget(e);\n      while (target !== controlsContainer && [prevButton, nextButton].indexOf(target) < 0) {\n        target = target.parentNode;\n      }\n      var targetIn = [prevButton, nextButton].indexOf(target);\n      if (targetIn >= 0) {\n        passEventObject = true;\n        dir = targetIn === 0 ? -1 : 1;\n      }\n    }\n    if (rewind) {\n      if (index === indexMin && dir === -1) {\n        goTo('last', e);\n        return;\n      } else if (index === indexMax && dir === 1) {\n        goTo('first', e);\n        return;\n      }\n    }\n    if (dir) {\n      index += slideBy * dir;\n      if (autoWidth) {\n        index = Math.floor(index);\n      }\n      // pass e when click control buttons or keydown\n      render(passEventObject || e && e.type === 'keydown' ? e : null);\n    }\n  }\n\n  // on nav click\n  function onNavClick(e) {\n    if (running) {\n      if (preventActionWhenRunning) {\n        return;\n      } else {\n        onTransitionEnd();\n      }\n    }\n    e = getEvent(e);\n    var target = getTarget(e),\n      navIndex;\n\n    // find the clicked nav item\n    while (target !== navContainer && !hasAttr(target, 'data-nav')) {\n      target = target.parentNode;\n    }\n    if (hasAttr(target, 'data-nav')) {\n      var navIndex = navClicked = Number(getAttr(target, 'data-nav')),\n        targetIndexBase = fixedWidth || autoWidth ? navIndex * slideCount / pages : navIndex * items,\n        targetIndex = navAsThumbnails ? navIndex : Math.min(Math.ceil(targetIndexBase), slideCount - 1);\n      goTo(targetIndex, e);\n      if (navCurrentIndex === navIndex) {\n        if (animating) {\n          stopAutoplay();\n        }\n        navClicked = -1; // reset navClicked\n      }\n    }\n  }\n\n  // autoplay functions\n  function setAutoplayTimer() {\n    autoplayTimer = setInterval(function () {\n      onControlsClick(null, autoplayDirection);\n    }, autoplayTimeout);\n    animating = true;\n  }\n  function stopAutoplayTimer() {\n    clearInterval(autoplayTimer);\n    animating = false;\n  }\n  function updateAutoplayButton(action, txt) {\n    setAttrs(autoplayButton, {\n      'data-action': action\n    });\n    autoplayButton.innerHTML = autoplayHtmlStrings[0] + action + autoplayHtmlStrings[1] + txt;\n  }\n  function startAutoplay() {\n    setAutoplayTimer();\n    if (autoplayButton) {\n      updateAutoplayButton('stop', autoplayText[1]);\n    }\n  }\n  function stopAutoplay() {\n    stopAutoplayTimer();\n    if (autoplayButton) {\n      updateAutoplayButton('start', autoplayText[0]);\n    }\n  }\n\n  // programaitcally play/pause the slider\n  function play() {\n    if (autoplay && !animating) {\n      startAutoplay();\n      autoplayUserPaused = false;\n    }\n  }\n  function pause() {\n    if (animating) {\n      stopAutoplay();\n      autoplayUserPaused = true;\n    }\n  }\n  function toggleAutoplay() {\n    if (animating) {\n      stopAutoplay();\n      autoplayUserPaused = true;\n    } else {\n      startAutoplay();\n      autoplayUserPaused = false;\n    }\n  }\n  function onVisibilityChange() {\n    if (doc.hidden) {\n      if (animating) {\n        stopAutoplayTimer();\n        autoplayVisibilityPaused = true;\n      }\n    } else if (autoplayVisibilityPaused) {\n      setAutoplayTimer();\n      autoplayVisibilityPaused = false;\n    }\n  }\n  function mouseoverPause() {\n    if (animating) {\n      stopAutoplayTimer();\n      autoplayHoverPaused = true;\n    }\n  }\n  function mouseoutRestart() {\n    if (autoplayHoverPaused) {\n      setAutoplayTimer();\n      autoplayHoverPaused = false;\n    }\n  }\n\n  // keydown events on document\n  function onDocumentKeydown(e) {\n    e = getEvent(e);\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT].indexOf(e.keyCode);\n    if (keyIndex >= 0) {\n      onControlsClick(e, keyIndex === 0 ? -1 : 1);\n    }\n  }\n\n  // on key control\n  function onControlsKeydown(e) {\n    e = getEvent(e);\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT].indexOf(e.keyCode);\n    if (keyIndex >= 0) {\n      if (keyIndex === 0) {\n        if (!prevButton.disabled) {\n          onControlsClick(e, -1);\n        }\n      } else if (!nextButton.disabled) {\n        onControlsClick(e, 1);\n      }\n    }\n  }\n\n  // set focus\n  function setFocus(el) {\n    el.focus();\n  }\n\n  // on key nav\n  function onNavKeydown(e) {\n    e = getEvent(e);\n    var curElement = doc.activeElement;\n    if (!hasAttr(curElement, 'data-nav')) {\n      return;\n    }\n\n    // var code = e.keyCode,\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT, KEYS.ENTER, KEYS.SPACE].indexOf(e.keyCode),\n      navIndex = Number(getAttr(curElement, 'data-nav'));\n    if (keyIndex >= 0) {\n      if (keyIndex === 0) {\n        if (navIndex > 0) {\n          setFocus(navItems[navIndex - 1]);\n        }\n      } else if (keyIndex === 1) {\n        if (navIndex < pages - 1) {\n          setFocus(navItems[navIndex + 1]);\n        }\n      } else {\n        navClicked = navIndex;\n        goTo(navIndex, e);\n      }\n    }\n  }\n  function getEvent(e) {\n    e = e || win.event;\n    return isTouchEvent(e) ? e.changedTouches[0] : e;\n  }\n  function getTarget(e) {\n    return e.target || win.event.srcElement;\n  }\n  function isTouchEvent(e) {\n    return e.type.indexOf('touch') >= 0;\n  }\n  function preventDefaultBehavior(e) {\n    e.preventDefault ? e.preventDefault() : e.returnValue = false;\n  }\n  function getMoveDirectionExpected() {\n    return getTouchDirection(toDegree(lastPosition.y - initPosition.y, lastPosition.x - initPosition.x), swipeAngle) === options.axis;\n  }\n  function onPanStart(e) {\n    if (running) {\n      if (preventActionWhenRunning) {\n        return;\n      } else {\n        onTransitionEnd();\n      }\n    }\n    if (autoplay && animating) {\n      stopAutoplayTimer();\n    }\n    panStart = true;\n    if (rafIndex) {\n      caf(rafIndex);\n      rafIndex = null;\n    }\n    var $ = getEvent(e);\n    events.emit(isTouchEvent(e) ? 'touchStart' : 'dragStart', info(e));\n    if (!isTouchEvent(e) && ['img', 'a'].indexOf(getLowerCaseNodeName(getTarget(e))) >= 0) {\n      preventDefaultBehavior(e);\n    }\n    lastPosition.x = initPosition.x = $.clientX;\n    lastPosition.y = initPosition.y = $.clientY;\n    if (carousel) {\n      translateInit = parseFloat(container.style[transformAttr].replace(transformPrefix, ''));\n      resetDuration(container, '0s');\n    }\n  }\n  function onPanMove(e) {\n    if (panStart) {\n      var $ = getEvent(e);\n      lastPosition.x = $.clientX;\n      lastPosition.y = $.clientY;\n      if (carousel) {\n        if (!rafIndex) {\n          rafIndex = raf(function () {\n            panUpdate(e);\n          });\n        }\n      } else {\n        if (moveDirectionExpected === '?') {\n          moveDirectionExpected = getMoveDirectionExpected();\n        }\n        if (moveDirectionExpected) {\n          preventScroll = true;\n        }\n      }\n      if ((typeof e.cancelable !== 'boolean' || e.cancelable) && preventScroll) {\n        e.preventDefault();\n      }\n    }\n  }\n  function panUpdate(e) {\n    if (!moveDirectionExpected) {\n      panStart = false;\n      return;\n    }\n    caf(rafIndex);\n    if (panStart) {\n      rafIndex = raf(function () {\n        panUpdate(e);\n      });\n    }\n    if (moveDirectionExpected === '?') {\n      moveDirectionExpected = getMoveDirectionExpected();\n    }\n    if (moveDirectionExpected) {\n      if (!preventScroll && isTouchEvent(e)) {\n        preventScroll = true;\n      }\n      try {\n        if (e.type) {\n          events.emit(isTouchEvent(e) ? 'touchMove' : 'dragMove', info(e));\n        }\n      } catch (err) {}\n      var x = translateInit,\n        dist = getDist(lastPosition, initPosition);\n      if (!horizontal || fixedWidth || autoWidth) {\n        x += dist;\n        x += 'px';\n      } else {\n        var percentageX = TRANSFORM ? dist * items * 100 / ((viewport + gutter) * slideCountNew) : dist * 100 / (viewport + gutter);\n        x += percentageX;\n        x += '%';\n      }\n      container.style[transformAttr] = transformPrefix + x + transformPostfix;\n    }\n  }\n  function onPanEnd(e) {\n    if (panStart) {\n      if (rafIndex) {\n        caf(rafIndex);\n        rafIndex = null;\n      }\n      if (carousel) {\n        resetDuration(container, '');\n      }\n      panStart = false;\n      var $ = getEvent(e);\n      lastPosition.x = $.clientX;\n      lastPosition.y = $.clientY;\n      var dist = getDist(lastPosition, initPosition);\n      if (Math.abs(dist)) {\n        // drag vs click\n        if (!isTouchEvent(e)) {\n          // prevent \"click\"\n          var target = getTarget(e);\n          addEvents(target, {\n            'click': function preventClick(e) {\n              preventDefaultBehavior(e);\n              removeEvents(target, {\n                'click': preventClick\n              });\n            }\n          });\n        }\n        if (carousel) {\n          rafIndex = raf(function () {\n            if (horizontal && !autoWidth) {\n              var indexMoved = -dist * items / (viewport + gutter);\n              indexMoved = dist > 0 ? Math.floor(indexMoved) : Math.ceil(indexMoved);\n              index += indexMoved;\n            } else {\n              var moved = -(translateInit + dist);\n              if (moved <= 0) {\n                index = indexMin;\n              } else if (moved >= slidePositions[slideCountNew - 1]) {\n                index = indexMax;\n              } else {\n                var i = 0;\n                while (i < slideCountNew && moved >= slidePositions[i]) {\n                  index = i;\n                  if (moved > slidePositions[i] && dist < 0) {\n                    index += 1;\n                  }\n                  i++;\n                }\n              }\n            }\n            render(e, dist);\n            events.emit(isTouchEvent(e) ? 'touchEnd' : 'dragEnd', info(e));\n          });\n        } else {\n          if (moveDirectionExpected) {\n            onControlsClick(e, dist > 0 ? -1 : 1);\n          }\n        }\n      }\n    }\n\n    // reset\n    if (options.preventScrollOnTouch === 'auto') {\n      preventScroll = false;\n    }\n    if (swipeAngle) {\n      moveDirectionExpected = '?';\n    }\n    if (autoplay && !animating) {\n      setAutoplayTimer();\n    }\n  }\n\n  // === RESIZE FUNCTIONS === //\n  // (slidePositions, index, items) => vertical_conentWrapper.height\n  function updateContentWrapperHeight() {\n    var wp = middleWrapper ? middleWrapper : innerWrapper;\n    wp.style.height = slidePositions[index + items] - slidePositions[index] + 'px';\n  }\n  function getPages() {\n    var rough = fixedWidth ? (fixedWidth + gutter) * slideCount / viewport : slideCount / items;\n    return Math.min(Math.ceil(rough), slideCount);\n  }\n\n  /*\n   * 1. update visible nav items list\n   * 2. add \"hidden\" attributes to previous visible nav items\n   * 3. remove \"hidden\" attrubutes to new visible nav items\n   */\n  function updateNavVisibility() {\n    if (!nav || navAsThumbnails) {\n      return;\n    }\n    if (pages !== pagesCached) {\n      var min = pagesCached,\n        max = pages,\n        fn = showElement;\n      if (pagesCached > pages) {\n        min = pages;\n        max = pagesCached;\n        fn = hideElement;\n      }\n      while (min < max) {\n        fn(navItems[min]);\n        min++;\n      }\n\n      // cache pages\n      pagesCached = pages;\n    }\n  }\n  function info(e) {\n    return {\n      container: container,\n      slideItems: slideItems,\n      navContainer: navContainer,\n      navItems: navItems,\n      controlsContainer: controlsContainer,\n      hasControls: hasControls,\n      prevButton: prevButton,\n      nextButton: nextButton,\n      items: items,\n      slideBy: slideBy,\n      cloneCount: cloneCount,\n      slideCount: slideCount,\n      slideCountNew: slideCountNew,\n      index: index,\n      indexCached: indexCached,\n      displayIndex: getCurrentSlide(),\n      navCurrentIndex: navCurrentIndex,\n      navCurrentIndexCached: navCurrentIndexCached,\n      pages: pages,\n      pagesCached: pagesCached,\n      sheet: sheet,\n      isOn: isOn,\n      event: e || {}\n    };\n  }\n  return {\n    version: '2.9.4',\n    getInfo: info,\n    events: events,\n    goTo: goTo,\n    play: play,\n    pause: pause,\n    isOn: isOn,\n    updateSliderHeight: updateInnerWrapperHeight,\n    refresh: initSliderTransform,\n    destroy: destroy,\n    rebuild: function () {\n      return tns(extend(options, optionsElements));\n    }\n  };\n};","map":{"version":3,"names":["Object","keys","object","name","prototype","hasOwnProperty","call","push","Element","remove","parentNode","removeChild","raf","caf","extend","checkStorageValue","setLocalStorage","getSlideId","calc","percentageLayout","mediaquerySupport","createStyleSheet","addCSSRule","removeCSSRule","getCssRulesLength","toDegree","getTouchDirection","forEach","hasClass","addClass","removeClass","hasAttr","getAttr","setAttrs","removeAttrs","arrayFromNodeList","hideElement","showElement","isVisible","whichProperty","has3DTransforms","getEndProperty","addEvents","removeEvents","Events","jsTransform","tns","options","container","mode","axis","items","gutter","edgePadding","fixedWidth","autoWidth","viewportMax","slideBy","center","controls","controlsPosition","controlsText","controlsContainer","prevButton","nextButton","nav","navPosition","navContainer","navAsThumbnails","arrowKeys","speed","autoplay","autoplayPosition","autoplayTimeout","autoplayDirection","autoplayText","autoplayHoverPause","autoplayButton","autoplayButtonOutput","autoplayResetOnVisibility","animateIn","animateOut","animateNormal","animateDelay","loop","rewind","autoHeight","responsive","lazyload","lazyloadSelector","touch","mouseDrag","swipeAngle","nested","preventActionWhenRunning","preventScrollOnTouch","freezable","onInit","useLocalStorage","nonce","doc","document","win","window","KEYS","ENTER","SPACE","LEFT","RIGHT","tnsStorage","localStorageAccess","browserInfo","navigator","userAgent","uid","Date","localStorage","setItem","getItem","removeItem","e","item","CALC","PERCENTAGELAYOUT","CSSMQ","TRANSFORM","HAS3DTRANSFORMS","TRANSITIONDURATION","TRANSITIONDELAY","ANIMATIONDURATION","ANIMATIONDELAY","TRANSITIONEND","ANIMATIONEND","supportConsoleWarn","console","warn","tnsList","optionsElements","str","el","querySelector","nodeName","children","length","carousel","responsiveTem","key","val","updateOptions","obj","horizontal","outerWrapper","createElement","innerWrapper","middleWrapper","containerParent","containerHTML","outerHTML","slideItems","slideCount","breakpointZone","windowWidth","getWindowWidth","isOn","setBreakpointZone","className","getOption","viewport","getViewportWidth","Math","floor","fixedWidthViewportWidth","sheet","slidePositions","slideItemsOut","cloneCount","getCloneCountForLoop","slideCountNew","hasRightDeadZone","rightBoundary","getRightBoundary","updateIndexBeforeTransform","transformAttr","transformPrefix","transformPostfix","getIndexMax","ceil","i","max","index","getStartIndex","indexCached","displayIndex","getCurrentSlide","indexMin","indexMax","resizeTimer","moveDirectionExpected","running","events","newContainerClasses","slideId","id","disable","disabled","freeze","getFreeze","frozen","controlsEvents","onControlsClick","onControlsKeydown","navEvents","onNavClick","onNavKeydown","hoverEvents","mouseoverPause","mouseoutRestart","visibilityEvent","onVisibilityChange","docmentKeydownEvent","onDocumentKeydown","touchEvents","onPanStart","onPanMove","onPanEnd","dragEvents","hasControls","hasOption","hasNav","hasAutoplay","hasTouch","hasMouseDrag","slideActiveClass","slideClonedClass","imgCompleteClass","imgEvents","onImgLoaded","onImgFailed","imgsComplete","liveregionCurrent","preventScroll","controlsContainerHTML","prevButtonHTML","nextButtonHTML","prevIsButton","nextIsButton","navContainerHTML","navItems","pages","getPages","pagesCached","navClicked","navCurrentIndex","getCurrentNavIndex","navCurrentIndexCached","navActiveClass","navStr","navStrCurrent","autoplayButtonHTML","autoplayHtmlStrings","autoplayTimer","animating","autoplayHoverPaused","autoplayUserPaused","autoplayVisibilityPaused","initPosition","lastPosition","translateInit","disX","disY","panStart","rafIndex","getDist","a","b","x","y","resetVariblesWhenDisable","replace","initStructure","initSheet","initSliderTransform","condition","tem","ind","min","getAbsIndex","absIndex","result","getItemsMax","arr","bp","apply","itemsMax","innerWidth","documentElement","clientWidth","body","getInsertPosition","pos","getClientWidth","div","rect","width","appendChild","getBoundingClientRect","right","left","gap","ww","parseInt","getSlideMarginLeft","getInnerWrapperStyles","edgePaddingTem","gutterTem","fixedWidthTem","speedTem","autoHeightBP","undefined","gutterTemUnit","dir","getTransitionDurationStyle","getContainerWidth","itemsTem","getSlideWidthStyle","dividend","getSlideGutterStyle","prop","getCSSPrefix","num","prefix","substring","toLowerCase","getAnimationDurationStyle","classOuter","classInner","hasGutter","wp","insertBefore","fragmentBefore","createDocumentFragment","fragmentAfter","j","cloneFirst","cloneNode","firstChild","cloneLast","imgs","querySelectorAll","img","src","indexOf","imgLoaded","imgsLoadedCheck","getImageArray","initSliderTransformStyleCheck","doContainerTransformSilent","initTools","initEvents","stylesApplicationCheck","abs","initSliderTransformCore","setTimeout","setSlidePositions","updateContentWrapperHeight","l","style","getComputedStyle","fontSize","slide","marginLeft","update_carousel_transition_duration","cssText","opts","middleWrapperStr","innerWrapperStr","containerStr","slideStr","itemsBP","fixedWidthBP","speedBP","edgePaddingBP","gutterBP","insertRule","cssRules","updateSlideStatus","insertAdjacentHTML","getLiveRegionStr","txt","toggleAutoplay","startAutoplay","initIndex","navHtml","hiddenStr","updateNavVisibility","isButton","updateControlsStatus","disableUI","eve","onTransitionEnd","on","resizeTasks","emit","info","onResize","doAutoHeight","doLazyLoad","disableSlider","freezeSlider","additionalUpdates","destroy","ownerNode","clearInterval","htmlList","prevEl","previousElementSibling","parentEl","nextElementSibling","firstElementChild","getEvent","bpChanged","breakpointZoneTem","needContainerTransform","indChanged","itemsChanged","disableTem","freezeTem","arrowKeysTem","controlsTem","navTem","touchTem","mouseDragTem","autoplayTem","autoplayHoverPauseTem","autoplayResetOnVisibilityTem","indexTem","autoHeightTem","controlsTextTem","centerTem","autoplayTextTem","updateIndex","enableSlider","doContainerTransform","getContainerTransformValue","unfreezeSlider","stopAutoplay","height","innerHTML","html","len","updateLiveRegion","updateGallerySlidePositions","vp","leftEdge","rightEdge","enableUI","margin","classN","getVisibleSlideRange","start","end","rangestart","rangeend","parseFloat","point","cell","arg","stopPropagation","srcset","getTarget","imgFailed","imgCompleted","imgSelector","updateInnerWrapperHeight","cb","complete","splice","updateNavStatus","getMaxSlideHeight","slideStart","slideRange","heights","offsetHeight","maxHeight","attr","attr2","base","range","navPrev","navCurrent","getLowerCaseNodeName","isAriaDisabled","getAttribute","disEnableElement","setAttribute","toString","prevDisabled","nextDisabled","disablePrev","disableNext","resetDuration","getSliderWidth","getCenterGap","denominator","animateSlide","number","classOut","classIn","isOut","transformCore","render","sliderMoved","type","strTrans","event","target","propertyName","goTo","targetIndex","indexGap","isNaN","factor","passEventObject","targetIn","navIndex","Number","targetIndexBase","setAutoplayTimer","setInterval","stopAutoplayTimer","updateAutoplayButton","action","play","pause","hidden","keyIndex","keyCode","setFocus","focus","curElement","activeElement","isTouchEvent","changedTouches","srcElement","preventDefaultBehavior","preventDefault","returnValue","getMoveDirectionExpected","$","clientX","clientY","panUpdate","cancelable","err","dist","percentageX","preventClick","indexMoved","moved","rough","fn","version","getInfo","updateSliderHeight","refresh","rebuild"],"sources":["/Users/anubhav/Desktop/workbench/tinyslider-testing/node_modules/tiny-slider/src/tiny-slider.js"],"sourcesContent":["// Object.keys\nif (!Object.keys) {\n  Object.keys = function(object) {\n    var keys = [];\n    for (var name in object) {\n      if (Object.prototype.hasOwnProperty.call(object, name)) {\n        keys.push(name);\n      }\n    }\n    return keys;\n  };\n}\n\n// ChildNode.remove\nif(!(\"remove\" in Element.prototype)){\n  Element.prototype.remove = function(){\n    if(this.parentNode) {\n      this.parentNode.removeChild(this);\n    }\n  };\n}\n\nimport { raf } from './helpers/raf.js';\nimport { caf } from './helpers/caf.js';\nimport { extend } from './helpers/extend.js';\nimport { checkStorageValue } from './helpers/checkStorageValue.js';\nimport { setLocalStorage } from './helpers/setLocalStorage.js';\nimport { getSlideId } from './helpers/getSlideId.js';\nimport { calc } from './helpers/calc.js';\nimport { percentageLayout } from './helpers/percentageLayout.js';\nimport { mediaquerySupport } from './helpers/mediaquerySupport.js';\nimport { createStyleSheet } from './helpers/createStyleSheet.js';\nimport { addCSSRule } from './helpers/addCSSRule.js';\nimport { removeCSSRule } from './helpers/removeCSSRule.js';\nimport { getCssRulesLength } from './helpers/getCssRulesLength.js';\nimport { toDegree } from './helpers/toDegree.js';\nimport { getTouchDirection } from './helpers/getTouchDirection.js';\nimport { forEach } from './helpers/forEach.js';\nimport { hasClass } from './helpers/hasClass.js';\nimport { addClass } from './helpers/addClass.js';\nimport { removeClass } from './helpers/removeClass.js';\nimport { hasAttr } from './helpers/hasAttr.js';\nimport { getAttr } from './helpers/getAttr.js';\nimport { setAttrs } from './helpers/setAttrs.js';\nimport { removeAttrs } from './helpers/removeAttrs.js';\nimport { arrayFromNodeList } from './helpers/arrayFromNodeList.js';\nimport { hideElement } from './helpers/hideElement.js';\nimport { showElement } from './helpers/showElement.js';\nimport { isVisible } from './helpers/isVisible.js';\nimport { whichProperty } from './helpers/whichProperty.js';\nimport { has3DTransforms } from './helpers/has3DTransforms.js';\nimport { getEndProperty } from './helpers/getEndProperty.js';\nimport { addEvents } from './helpers/addEvents.js';\nimport { removeEvents } from './helpers/removeEvents.js';\nimport { Events } from './helpers/events.js';\nimport { jsTransform } from './helpers/jsTransform.js';\n\nexport var tns = function(options) {\n  options = extend({\n    container: '.slider',\n    mode: 'carousel',\n    axis: 'horizontal',\n    items: 1,\n    gutter: 0,\n    edgePadding: 0,\n    fixedWidth: false,\n    autoWidth: false,\n    viewportMax: false,\n    slideBy: 1,\n    center: false,\n    controls: true,\n    controlsPosition: 'top',\n    controlsText: ['prev', 'next'],\n    controlsContainer: false,\n    prevButton: false,\n    nextButton: false,\n    nav: true,\n    navPosition: 'top',\n    navContainer: false,\n    navAsThumbnails: false,\n    arrowKeys: false,\n    speed: 300,\n    autoplay: false,\n    autoplayPosition: 'top',\n    autoplayTimeout: 5000,\n    autoplayDirection: 'forward',\n    autoplayText: ['start', 'stop'],\n    autoplayHoverPause: false,\n    autoplayButton: false,\n    autoplayButtonOutput: true,\n    autoplayResetOnVisibility: true,\n    animateIn: 'tns-fadeIn',\n    animateOut: 'tns-fadeOut',\n    animateNormal: 'tns-normal',\n    animateDelay: false,\n    loop: true,\n    rewind: false,\n    autoHeight: false,\n    responsive: false,\n    lazyload: false,\n    lazyloadSelector: '.tns-lazy-img',\n    touch: true,\n    mouseDrag: false,\n    swipeAngle: 15,\n    nested: false,\n    preventActionWhenRunning: false,\n    preventScrollOnTouch: false,\n    freezable: true,\n    onInit: false,\n    useLocalStorage: true,\n    nonce: false\n  }, options || {});\n\n  var doc = document,\n      win = window,\n      KEYS = {\n        ENTER: 13,\n        SPACE: 32,\n        LEFT: 37,\n        RIGHT: 39\n      },\n      tnsStorage = {},\n      localStorageAccess = options.useLocalStorage;\n\n  if (localStorageAccess) {\n    // check browser version and local storage access\n    var browserInfo = navigator.userAgent;\n    var uid = new Date;\n\n    try {\n      tnsStorage = win.localStorage;\n      if (tnsStorage) {\n        tnsStorage.setItem(uid, uid);\n        localStorageAccess = tnsStorage.getItem(uid) == uid;\n        tnsStorage.removeItem(uid);\n      } else {\n        localStorageAccess = false;\n      }\n      if (!localStorageAccess) { tnsStorage = {}; }\n    } catch(e) {\n      localStorageAccess = false;\n    }\n\n    if (localStorageAccess) {\n      // remove storage when browser version changes\n      if (tnsStorage['tnsApp'] && tnsStorage['tnsApp'] !== browserInfo) {\n        ['tC', 'tPL', 'tMQ', 'tTf', 't3D', 'tTDu', 'tTDe', 'tADu', 'tADe', 'tTE', 'tAE'].forEach(function(item) { tnsStorage.removeItem(item); });\n      }\n      // update browserInfo\n      localStorage['tnsApp'] = browserInfo;\n    }\n  }\n\n  var CALC = tnsStorage['tC'] ? checkStorageValue(tnsStorage['tC']) : setLocalStorage(tnsStorage, 'tC', calc(), localStorageAccess),\n      PERCENTAGELAYOUT = tnsStorage['tPL'] ? checkStorageValue(tnsStorage['tPL']) : setLocalStorage(tnsStorage, 'tPL', percentageLayout(), localStorageAccess),\n      CSSMQ = tnsStorage['tMQ'] ? checkStorageValue(tnsStorage['tMQ']) : setLocalStorage(tnsStorage, 'tMQ', mediaquerySupport(), localStorageAccess),\n      TRANSFORM = tnsStorage['tTf'] ? checkStorageValue(tnsStorage['tTf']) : setLocalStorage(tnsStorage, 'tTf', whichProperty('transform'), localStorageAccess),\n      HAS3DTRANSFORMS = tnsStorage['t3D'] ? checkStorageValue(tnsStorage['t3D']) : setLocalStorage(tnsStorage, 't3D', has3DTransforms(TRANSFORM), localStorageAccess),\n      TRANSITIONDURATION = tnsStorage['tTDu'] ? checkStorageValue(tnsStorage['tTDu']) : setLocalStorage(tnsStorage, 'tTDu', whichProperty('transitionDuration'), localStorageAccess),\n      TRANSITIONDELAY = tnsStorage['tTDe'] ? checkStorageValue(tnsStorage['tTDe']) : setLocalStorage(tnsStorage, 'tTDe', whichProperty('transitionDelay'), localStorageAccess),\n      ANIMATIONDURATION = tnsStorage['tADu'] ? checkStorageValue(tnsStorage['tADu']) : setLocalStorage(tnsStorage, 'tADu', whichProperty('animationDuration'), localStorageAccess),\n      ANIMATIONDELAY = tnsStorage['tADe'] ? checkStorageValue(tnsStorage['tADe']) : setLocalStorage(tnsStorage, 'tADe', whichProperty('animationDelay'), localStorageAccess),\n      TRANSITIONEND = tnsStorage['tTE'] ? checkStorageValue(tnsStorage['tTE']) : setLocalStorage(tnsStorage, 'tTE', getEndProperty(TRANSITIONDURATION, 'Transition'), localStorageAccess),\n      ANIMATIONEND = tnsStorage['tAE'] ? checkStorageValue(tnsStorage['tAE']) : setLocalStorage(tnsStorage, 'tAE', getEndProperty(ANIMATIONDURATION, 'Animation'), localStorageAccess);\n\n  // get element nodes from selectors\n  var supportConsoleWarn = win.console && typeof win.console.warn === \"function\",\n      tnsList = ['container', 'controlsContainer', 'prevButton', 'nextButton', 'navContainer', 'autoplayButton'],\n      optionsElements = {};\n\n  tnsList.forEach(function(item) {\n    if (typeof options[item] === 'string') {\n      var str = options[item],\n          el = doc.querySelector(str);\n      optionsElements[item] = str;\n\n      if (el && el.nodeName) {\n        options[item] = el;\n      } else {\n        if (supportConsoleWarn) { console.warn('Can\\'t find', options[item]); }\n        return;\n      }\n    }\n  });\n\n  // make sure at least 1 slide\n  if (options.container.children.length < 1) {\n    if (supportConsoleWarn) { console.warn('No slides found in', options.container); }\n    return;\n   }\n\n  // update options\n  var responsive = options.responsive,\n      nested = options.nested,\n      carousel = options.mode === 'carousel' ? true : false;\n\n  if (responsive) {\n    // apply responsive[0] to options and remove it\n    if (0 in responsive) {\n      options = extend(options, responsive[0]);\n      delete responsive[0];\n    }\n\n    var responsiveTem = {};\n    for (var key in responsive) {\n      var val = responsive[key];\n      // update responsive\n      // from: 300: 2\n      // to:\n      //   300: {\n      //     items: 2\n      //   }\n      val = typeof val === 'number' ? {items: val} : val;\n      responsiveTem[key] = val;\n    }\n    responsive = responsiveTem;\n    responsiveTem = null;\n  }\n\n  // update options\n  function updateOptions (obj) {\n    for (var key in obj) {\n      if (!carousel) {\n        if (key === 'slideBy') { obj[key] = 'page'; }\n        if (key === 'edgePadding') { obj[key] = false; }\n        if (key === 'autoHeight') { obj[key] = false; }\n      }\n\n      // update responsive options\n      if (key === 'responsive') { updateOptions(obj[key]); }\n    }\n  }\n  if (!carousel) { updateOptions(options); }\n\n\n  // === define and set variables ===\n  if (!carousel) {\n    options.axis = 'horizontal';\n    options.slideBy = 'page';\n    options.edgePadding = false;\n\n    var animateIn = options.animateIn,\n        animateOut = options.animateOut,\n        animateDelay = options.animateDelay,\n        animateNormal = options.animateNormal;\n  }\n\n  var horizontal = options.axis === 'horizontal' ? true : false,\n      outerWrapper = doc.createElement('div'),\n      innerWrapper = doc.createElement('div'),\n      middleWrapper,\n      container = options.container,\n      containerParent = container.parentNode,\n      containerHTML = container.outerHTML,\n      slideItems = container.children,\n      slideCount = slideItems.length,\n      breakpointZone,\n      windowWidth = getWindowWidth(),\n      isOn = false;\n  if (responsive) { setBreakpointZone(); }\n  if (carousel) { container.className += ' tns-vpfix'; }\n\n  // fixedWidth: viewport > rightBoundary > indexMax\n  var autoWidth = options.autoWidth,\n      fixedWidth = getOption('fixedWidth'),\n      edgePadding = getOption('edgePadding'),\n      gutter = getOption('gutter'),\n      viewport = getViewportWidth(),\n      center = getOption('center'),\n      items = !autoWidth ? Math.floor(getOption('items')) : 1,\n      slideBy = getOption('slideBy'),\n      viewportMax = options.viewportMax || options.fixedWidthViewportWidth,\n      arrowKeys = getOption('arrowKeys'),\n      speed = getOption('speed'),\n      rewind = options.rewind,\n      loop = rewind ? false : options.loop,\n      autoHeight = getOption('autoHeight'),\n      controls = getOption('controls'),\n      controlsText = getOption('controlsText'),\n      nav = getOption('nav'),\n      touch = getOption('touch'),\n      mouseDrag = getOption('mouseDrag'),\n      autoplay = getOption('autoplay'),\n      autoplayTimeout = getOption('autoplayTimeout'),\n      autoplayText = getOption('autoplayText'),\n      autoplayHoverPause = getOption('autoplayHoverPause'),\n      autoplayResetOnVisibility = getOption('autoplayResetOnVisibility'),\n      sheet = createStyleSheet(null, getOption('nonce')),\n      lazyload = options.lazyload,\n      lazyloadSelector = options.lazyloadSelector,\n      slidePositions, // collection of slide positions\n      slideItemsOut = [],\n      cloneCount = loop ? getCloneCountForLoop() : 0,\n      slideCountNew = !carousel ? slideCount + cloneCount : slideCount + cloneCount * 2,\n      hasRightDeadZone = (fixedWidth || autoWidth) && !loop ? true : false,\n      rightBoundary = fixedWidth ? getRightBoundary() : null,\n      updateIndexBeforeTransform = (!carousel || !loop) ? true : false,\n      // transform\n      transformAttr = horizontal ? 'left' : 'top',\n      transformPrefix = '',\n      transformPostfix = '',\n      // index\n      getIndexMax = (function () {\n        if (fixedWidth) {\n          return function() { return center && !loop ? slideCount - 1 : Math.ceil(- rightBoundary / (fixedWidth + gutter)); };\n        } else if (autoWidth) {\n          return function() {\n            for (var i = 0; i < slideCountNew; i++) {\n              if (slidePositions[i] >= - rightBoundary) { return i; }\n            }\n          };\n        } else {\n          return function() {\n            if (center && carousel && !loop) {\n              return slideCount - 1;\n            } else {\n              return loop || carousel ? Math.max(0, slideCountNew - Math.ceil(items)) : slideCountNew - 1;\n            }\n          };\n        }\n      })(),\n      index = getStartIndex(getOption('startIndex')),\n      indexCached = index,\n      displayIndex = getCurrentSlide(),\n      indexMin = 0,\n      indexMax = !autoWidth ? getIndexMax() : null,\n      // resize\n      resizeTimer,\n      preventActionWhenRunning = options.preventActionWhenRunning,\n      swipeAngle = options.swipeAngle,\n      moveDirectionExpected = swipeAngle ? '?' : true,\n      running = false,\n      onInit = options.onInit,\n      events = new Events(),\n      // id, class\n      newContainerClasses = ' tns-slider tns-' + options.mode,\n      slideId = container.id || getSlideId(),\n      disable = getOption('disable'),\n      disabled = false,\n      freezable = options.freezable,\n      freeze = freezable && !autoWidth ? getFreeze() : false,\n      frozen = false,\n      controlsEvents = {\n        'click': onControlsClick,\n        'keydown': onControlsKeydown\n      },\n      navEvents = {\n        'click': onNavClick,\n        'keydown': onNavKeydown\n      },\n      hoverEvents = {\n        'mouseover': mouseoverPause,\n        'mouseout': mouseoutRestart\n      },\n      visibilityEvent = {'visibilitychange': onVisibilityChange},\n      docmentKeydownEvent = {'keydown': onDocumentKeydown},\n      touchEvents = {\n        'touchstart': onPanStart,\n        'touchmove': onPanMove,\n        'touchend': onPanEnd,\n        'touchcancel': onPanEnd\n      }, dragEvents = {\n        'mousedown': onPanStart,\n        'mousemove': onPanMove,\n        'mouseup': onPanEnd,\n        'mouseleave': onPanEnd\n      },\n      hasControls = hasOption('controls'),\n      hasNav = hasOption('nav'),\n      navAsThumbnails = autoWidth ? true : options.navAsThumbnails,\n      hasAutoplay = hasOption('autoplay'),\n      hasTouch = hasOption('touch'),\n      hasMouseDrag = hasOption('mouseDrag'),\n      slideActiveClass = 'tns-slide-active',\n      slideClonedClass = 'tns-slide-cloned',\n      imgCompleteClass = 'tns-complete',\n      imgEvents = {\n        'load': onImgLoaded,\n        'error': onImgFailed\n      },\n      imgsComplete,\n      liveregionCurrent,\n      preventScroll = options.preventScrollOnTouch === 'force' ? true : false;\n\n  // controls\n  if (hasControls) {\n    var controlsContainer = options.controlsContainer,\n        controlsContainerHTML = options.controlsContainer ? options.controlsContainer.outerHTML : '',\n        prevButton = options.prevButton,\n        nextButton = options.nextButton,\n        prevButtonHTML = options.prevButton ? options.prevButton.outerHTML : '',\n        nextButtonHTML = options.nextButton ? options.nextButton.outerHTML : '',\n        prevIsButton,\n        nextIsButton;\n  }\n\n  // nav\n  if (hasNav) {\n    var navContainer = options.navContainer,\n        navContainerHTML = options.navContainer ? options.navContainer.outerHTML : '',\n        navItems,\n        pages = autoWidth ? slideCount : getPages(),\n        pagesCached = 0,\n        navClicked = -1,\n        navCurrentIndex = getCurrentNavIndex(),\n        navCurrentIndexCached = navCurrentIndex,\n        navActiveClass = 'tns-nav-active',\n        navStr = 'Carousel Page ',\n        navStrCurrent = ' (Current Slide)';\n  }\n\n  // autoplay\n  if (hasAutoplay) {\n    var autoplayDirection = options.autoplayDirection === 'forward' ? 1 : -1,\n        autoplayButton = options.autoplayButton,\n        autoplayButtonHTML = options.autoplayButton ? options.autoplayButton.outerHTML : '',\n        autoplayHtmlStrings = ['<span class=\\'tns-visually-hidden\\'>', ' animation</span>'],\n        autoplayTimer,\n        animating,\n        autoplayHoverPaused,\n        autoplayUserPaused,\n        autoplayVisibilityPaused;\n  }\n\n  if (hasTouch || hasMouseDrag) {\n    var initPosition = {},\n        lastPosition = {},\n        translateInit,\n        disX,\n        disY,\n        panStart = false,\n        rafIndex,\n        getDist = horizontal ?\n          function(a, b) { return a.x - b.x; } :\n          function(a, b) { return a.y - b.y; };\n  }\n\n  // disable slider when slidecount <= items\n  if (!autoWidth) { resetVariblesWhenDisable(disable || freeze); }\n\n  if (TRANSFORM) {\n    transformAttr = TRANSFORM;\n    transformPrefix = 'translate';\n\n    if (HAS3DTRANSFORMS) {\n      transformPrefix += horizontal ? '3d(' : '3d(0px, ';\n      transformPostfix = horizontal ? ', 0px, 0px)' : ', 0px)';\n    } else {\n      transformPrefix += horizontal ? 'X(' : 'Y(';\n      transformPostfix = ')';\n    }\n\n  }\n\n  if (carousel) { container.className = container.className.replace('tns-vpfix', ''); }\n  initStructure();\n  initSheet();\n  initSliderTransform();\n\n  // === COMMON FUNCTIONS === //\n  function resetVariblesWhenDisable (condition) {\n    if (condition) {\n      controls = nav = touch = mouseDrag = arrowKeys = autoplay = autoplayHoverPause = autoplayResetOnVisibility = false;\n    }\n  }\n\n  function getCurrentSlide () {\n    var tem = carousel ? index - cloneCount : index;\n    while (tem < 0) { tem += slideCount; }\n    return tem%slideCount + 1;\n  }\n\n  function getStartIndex (ind) {\n    ind = ind ? Math.max(0, Math.min(loop ? slideCount - 1 : slideCount - items, ind)) : 0;\n    return carousel ? ind + cloneCount : ind;\n  }\n\n  function getAbsIndex (i) {\n    if (i == null) { i = index; }\n\n    if (carousel) { i -= cloneCount; }\n    while (i < 0) { i += slideCount; }\n\n    return Math.floor(i%slideCount);\n  }\n\n  function getCurrentNavIndex () {\n    var absIndex = getAbsIndex(),\n        result;\n\n    result = navAsThumbnails ? absIndex :\n      fixedWidth || autoWidth ? Math.ceil((absIndex + 1) * pages / slideCount - 1) :\n          Math.floor(absIndex / items);\n\n    // set active nav to the last one when reaches the right edge\n    if (!loop && carousel && index === indexMax) { result = pages - 1; }\n\n    return result;\n  }\n\n  function getItemsMax () {\n    // fixedWidth or autoWidth while viewportMax is not available\n    if (autoWidth || (fixedWidth && !viewportMax)) {\n      return slideCount - 1;\n    // most cases\n    } else {\n      var str = fixedWidth ? 'fixedWidth' : 'items',\n          arr = [];\n\n      if (fixedWidth || options[str] < slideCount) { arr.push(options[str]); }\n\n      if (responsive) {\n        for (var bp in responsive) {\n          var tem = responsive[bp][str];\n          if (tem && (fixedWidth || tem < slideCount)) { arr.push(tem); }\n        }\n      }\n\n      if (!arr.length) { arr.push(0); }\n\n      return Math.ceil(fixedWidth ? viewportMax / Math.min.apply(null, arr) : Math.max.apply(null, arr));\n    }\n  }\n\n  function getCloneCountForLoop () {\n    var itemsMax = getItemsMax(),\n        result = carousel ? Math.ceil((itemsMax * 5 - slideCount)/2) : (itemsMax * 4 - slideCount);\n    result = Math.max(itemsMax, result);\n\n    return hasOption('edgePadding') ? result + 1 : result;\n  }\n\n  function getWindowWidth () {\n    return win.innerWidth || doc.documentElement.clientWidth || doc.body.clientWidth;\n  }\n\n  function getInsertPosition (pos) {\n    return pos === 'top' ? 'afterbegin' : 'beforeend';\n  }\n\n  function getClientWidth (el) {\n    if (el == null) { return; }\n    var div = doc.createElement('div'), rect, width;\n    el.appendChild(div);\n    rect = div.getBoundingClientRect();\n    width = rect.right - rect.left;\n    div.remove();\n    return width || getClientWidth(el.parentNode);\n  }\n\n  function getViewportWidth () {\n    var gap = edgePadding ? edgePadding * 2 - gutter : 0;\n    return getClientWidth(containerParent) - gap;\n  }\n\n  function hasOption (item) {\n    if (options[item]) {\n      return true;\n    } else {\n      if (responsive) {\n        for (var bp in responsive) {\n          if (responsive[bp][item]) { return true; }\n        }\n      }\n      return false;\n    }\n  }\n\n  // get option:\n  // fixed width: viewport, fixedWidth, gutter => items\n  // others: window width => all variables\n  // all: items => slideBy\n  function getOption (item, ww) {\n    if (ww == null) { ww = windowWidth; }\n\n    if (item === 'items' && fixedWidth) {\n      return Math.floor((viewport + gutter) / (fixedWidth + gutter)) || 1;\n\n    } else {\n      var result = options[item];\n\n      if (responsive) {\n        for (var bp in responsive) {\n          // bp: convert string to number\n          if (ww >= parseInt(bp)) {\n            if (item in responsive[bp]) { result = responsive[bp][item]; }\n          }\n        }\n      }\n\n      if (item === 'slideBy' && result === 'page') { result = getOption('items'); }\n      if (!carousel && (item === 'slideBy' || item === 'items')) { result = Math.floor(result); }\n\n      return result;\n    }\n  }\n\n  function getSlideMarginLeft (i) {\n    return CALC ?\n      CALC + '(' + i * 100 + '% / ' + slideCountNew + ')' :\n      i * 100 / slideCountNew + '%';\n  }\n\n  function getInnerWrapperStyles (edgePaddingTem, gutterTem, fixedWidthTem, speedTem, autoHeightBP) {\n    var str = '';\n\n    if (edgePaddingTem !== undefined) {\n      var gap = edgePaddingTem;\n      if (gutterTem) { gap -= gutterTem; }\n      str = horizontal ?\n        'margin: 0 ' + gap + 'px 0 ' + edgePaddingTem + 'px;' :\n        'margin: ' + edgePaddingTem + 'px 0 ' + gap + 'px 0;';\n    } else if (gutterTem && !fixedWidthTem) {\n      var gutterTemUnit = '-' + gutterTem + 'px',\n          dir = horizontal ? gutterTemUnit + ' 0 0' : '0 ' + gutterTemUnit + ' 0';\n      str = 'margin: 0 ' + dir + ';'\n    }\n\n    if (!carousel && autoHeightBP && TRANSITIONDURATION && speedTem) { str += getTransitionDurationStyle(speedTem); }\n    return str;\n  }\n\n  function getContainerWidth (fixedWidthTem, gutterTem, itemsTem) {\n    if (fixedWidthTem) {\n      return (fixedWidthTem + gutterTem) * slideCountNew + 'px';\n    } else {\n      return CALC ?\n        CALC + '(' + slideCountNew * 100 + '% / ' + itemsTem + ')' :\n        slideCountNew * 100 / itemsTem + '%';\n    }\n  }\n\n  function getSlideWidthStyle (fixedWidthTem, gutterTem, itemsTem) {\n    var width;\n\n    if (fixedWidthTem) {\n      width = (fixedWidthTem + gutterTem) + 'px';\n    } else {\n      if (!carousel) { itemsTem = Math.floor(itemsTem); }\n      var dividend = carousel ? slideCountNew : itemsTem;\n      width = CALC ?\n        CALC + '(100% / ' + dividend + ')' :\n        100 / dividend + '%';\n    }\n\n    width = 'width:' + width;\n\n    // inner slider: overwrite outer slider styles\n    return nested !== 'inner' ? width + ';' : width + ' !important;';\n  }\n\n  function getSlideGutterStyle (gutterTem) {\n    var str = '';\n\n    // gutter maybe interger || 0\n    // so can't use 'if (gutter)'\n    if (gutterTem !== false) {\n      var prop = horizontal ? 'padding-' : 'margin-',\n          dir = horizontal ? 'right' : 'bottom';\n      str = prop +  dir + ': ' + gutterTem + 'px;';\n    }\n\n    return str;\n  }\n\n  function getCSSPrefix (name, num) {\n    var prefix = name.substring(0, name.length - num).toLowerCase();\n    if (prefix) { prefix = '-' + prefix + '-'; }\n\n    return prefix;\n  }\n\n  function getTransitionDurationStyle (speed) {\n    return getCSSPrefix(TRANSITIONDURATION, 18) + 'transition-duration:' + speed / 1000 + 's;';\n  }\n\n  function getAnimationDurationStyle (speed) {\n    return getCSSPrefix(ANIMATIONDURATION, 17) + 'animation-duration:' + speed / 1000 + 's;';\n  }\n\n  function initStructure () {\n    var classOuter = 'tns-outer',\n        classInner = 'tns-inner',\n        hasGutter = hasOption('gutter');\n\n    outerWrapper.className = classOuter;\n    innerWrapper.className = classInner;\n    outerWrapper.id = slideId + '-ow';\n    innerWrapper.id = slideId + '-iw';\n\n    // set container properties\n    if (container.id === '') { container.id = slideId; }\n    newContainerClasses += PERCENTAGELAYOUT || autoWidth ? ' tns-subpixel' : ' tns-no-subpixel';\n    newContainerClasses += CALC ? ' tns-calc' : ' tns-no-calc';\n    if (autoWidth) { newContainerClasses += ' tns-autowidth'; }\n    newContainerClasses += ' tns-' + options.axis;\n    container.className += newContainerClasses;\n\n    // add constrain layer for carousel\n    if (carousel) {\n      middleWrapper = doc.createElement('div');\n      middleWrapper.id = slideId + '-mw';\n      middleWrapper.className = 'tns-ovh';\n\n      outerWrapper.appendChild(middleWrapper);\n      middleWrapper.appendChild(innerWrapper);\n    } else {\n      outerWrapper.appendChild(innerWrapper);\n    }\n\n    if (autoHeight) {\n      var wp = middleWrapper ? middleWrapper : innerWrapper;\n      wp.className += ' tns-ah';\n    }\n\n    containerParent.insertBefore(outerWrapper, container);\n    innerWrapper.appendChild(container);\n\n    // add id, class, aria attributes\n    // before clone slides\n    forEach(slideItems, function(item, i) {\n      addClass(item, 'tns-item');\n      if (!item.id) { item.id = slideId + '-item' + i; }\n      if (!carousel && animateNormal) { addClass(item, animateNormal); }\n      setAttrs(item, {\n        'aria-hidden': 'true',\n        'tabindex': '-1'\n      });\n    });\n\n    // ## clone slides\n    // carousel: n + slides + n\n    // gallery:      slides + n\n    if (cloneCount) {\n      var fragmentBefore = doc.createDocumentFragment(),\n          fragmentAfter = doc.createDocumentFragment();\n\n      for (var j = cloneCount; j--;) {\n        var num = j%slideCount,\n            cloneFirst = slideItems[num].cloneNode(true);\n        addClass(cloneFirst, slideClonedClass);\n        removeAttrs(cloneFirst, 'id');\n        fragmentAfter.insertBefore(cloneFirst, fragmentAfter.firstChild);\n\n        if (carousel) {\n          var cloneLast = slideItems[slideCount - 1 - num].cloneNode(true);\n          addClass(cloneLast, slideClonedClass);\n          removeAttrs(cloneLast, 'id');\n          fragmentBefore.appendChild(cloneLast);\n        }\n      }\n\n      container.insertBefore(fragmentBefore, container.firstChild);\n      container.appendChild(fragmentAfter);\n      slideItems = container.children;\n    }\n\n  }\n\n  function initSliderTransform () {\n    // ## images loaded/failed\n    if (hasOption('autoHeight') || autoWidth || !horizontal) {\n      var imgs = container.querySelectorAll('img');\n\n      // add img load event listener\n      forEach(imgs, function(img) {\n        var src = img.src;\n\n        if (!lazyload) {\n          // not data img\n          if (src && src.indexOf('data:image') < 0) {\n            img.src = '';\n            addEvents(img, imgEvents);\n            addClass(img, 'loading');\n\n            img.src = src;\n          // data img\n          } else {\n            imgLoaded(img);\n          }\n        }\n      });\n\n      // set imgsComplete\n      raf(function(){ imgsLoadedCheck(arrayFromNodeList(imgs), function() { imgsComplete = true; }); });\n\n      // reset imgs for auto height: check visible imgs only\n      if (hasOption('autoHeight')) { imgs = getImageArray(index, Math.min(index + items - 1, slideCountNew - 1)); }\n\n      lazyload ? initSliderTransformStyleCheck() : raf(function(){ imgsLoadedCheck(arrayFromNodeList(imgs), initSliderTransformStyleCheck); });\n\n    } else {\n      // set container transform property\n      if (carousel) { doContainerTransformSilent(); }\n\n      // update slider tools and events\n      initTools();\n      initEvents();\n    }\n  }\n\n  function initSliderTransformStyleCheck () {\n    if (autoWidth && slideCount > 1) {\n      // check styles application\n      var num = loop ? index : slideCount - 1;\n\n      (function stylesApplicationCheck() {\n        var left = slideItems[num].getBoundingClientRect().left;\n        var right = slideItems[num - 1].getBoundingClientRect().right;\n\n        (Math.abs(left - right) <= 1) ?\n          initSliderTransformCore() :\n          setTimeout(function(){ stylesApplicationCheck() }, 16);\n      })();\n\n    } else {\n      initSliderTransformCore();\n    }\n  }\n\n\n  function initSliderTransformCore () {\n    // run Fn()s which are rely on image loading\n    if (!horizontal || autoWidth) {\n      setSlidePositions();\n\n      if (autoWidth) {\n        rightBoundary = getRightBoundary();\n        if (freezable) { freeze = getFreeze(); }\n        indexMax = getIndexMax(); // <= slidePositions, rightBoundary <=\n        resetVariblesWhenDisable(disable || freeze);\n      } else {\n        updateContentWrapperHeight();\n      }\n    }\n\n    // set container transform property\n    if (carousel) { doContainerTransformSilent(); }\n\n    // update slider tools and events\n    initTools();\n    initEvents();\n  }\n\n  function initSheet () {\n    // gallery:\n    // set animation classes and left value for gallery slider\n    if (!carousel) {\n      for (var i = index, l = index + Math.min(slideCount, items); i < l; i++) {\n        var item = slideItems[i];\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, animateIn);\n        removeClass(item, animateNormal);\n      }\n    }\n\n    // #### LAYOUT\n\n    // ## INLINE-BLOCK VS FLOAT\n\n    // ## PercentageLayout:\n    // slides: inline-block\n    // remove blank space between slides by set font-size: 0\n\n    // ## Non PercentageLayout:\n    // slides: float\n    //         margin-right: -100%\n    //         margin-left: ~\n\n    // Resource: https://docs.google.com/spreadsheets/d/147up245wwTXeQYve3BRSAD4oVcvQmuGsFteJOeA5xNQ/edit?usp=sharing\n    if (horizontal) {\n      if (PERCENTAGELAYOUT || autoWidth) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', 'font-size:' + win.getComputedStyle(slideItems[0]).fontSize + ';', getCssRulesLength(sheet));\n        addCSSRule(sheet, '#' + slideId, 'font-size:0;', getCssRulesLength(sheet));\n      } else if (carousel) {\n        forEach(slideItems, function (slide, i) {\n          slide.style.marginLeft = getSlideMarginLeft(i);\n        });\n      }\n    }\n\n\n    // ## BASIC STYLES\n    if (CSSMQ) {\n      // middle wrapper style\n      if (TRANSITIONDURATION) {\n        var str = middleWrapper && options.autoHeight ? getTransitionDurationStyle(options.speed) : '';\n        addCSSRule(sheet, '#' + slideId + '-mw', str, getCssRulesLength(sheet));\n      }\n\n      // inner wrapper styles\n      str = getInnerWrapperStyles(options.edgePadding, options.gutter, options.fixedWidth, options.speed, options.autoHeight);\n      addCSSRule(sheet, '#' + slideId + '-iw', str, getCssRulesLength(sheet));\n\n      // container styles\n      if (carousel) {\n        str = horizontal && !autoWidth ? 'width:' + getContainerWidth(options.fixedWidth, options.gutter, options.items) + ';' : '';\n        if (TRANSITIONDURATION) { str += getTransitionDurationStyle(speed); }\n        addCSSRule(sheet, '#' + slideId, str, getCssRulesLength(sheet));\n      }\n\n      // slide styles\n      str = horizontal && !autoWidth ? getSlideWidthStyle(options.fixedWidth, options.gutter, options.items) : '';\n      if (options.gutter) { str += getSlideGutterStyle(options.gutter); }\n      // set gallery items transition-duration\n      if (!carousel) {\n        if (TRANSITIONDURATION) { str += getTransitionDurationStyle(speed); }\n        if (ANIMATIONDURATION) { str += getAnimationDurationStyle(speed); }\n      }\n      if (str) { addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet)); }\n\n    // non CSS mediaqueries: IE8\n    // ## update inner wrapper, container, slides if needed\n    // set inline styles for inner wrapper & container\n    // insert stylesheet (one line) for slides only (since slides are many)\n    } else {\n      // middle wrapper styles\n      update_carousel_transition_duration();\n\n      // inner wrapper styles\n      innerWrapper.style.cssText = getInnerWrapperStyles(edgePadding, gutter, fixedWidth, autoHeight);\n\n      // container styles\n      if (carousel && horizontal && !autoWidth) {\n        container.style.width = getContainerWidth(fixedWidth, gutter, items);\n      }\n\n      // slide styles\n      var str = horizontal && !autoWidth ? getSlideWidthStyle(fixedWidth, gutter, items) : '';\n      if (gutter) { str += getSlideGutterStyle(gutter); }\n\n      // append to the last line\n      if (str) { addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet)); }\n    }\n\n    // ## MEDIAQUERIES\n    if (responsive && CSSMQ) {\n      for (var bp in responsive) {\n        // bp: convert string to number\n        bp = parseInt(bp);\n\n        var opts = responsive[bp],\n            str = '',\n            middleWrapperStr = '',\n            innerWrapperStr = '',\n            containerStr = '',\n            slideStr = '',\n            itemsBP = !autoWidth ? getOption('items', bp) : null,\n            fixedWidthBP = getOption('fixedWidth', bp),\n            speedBP = getOption('speed', bp),\n            edgePaddingBP = getOption('edgePadding', bp),\n            autoHeightBP = getOption('autoHeight', bp),\n            gutterBP = getOption('gutter', bp);\n\n        // middle wrapper string\n        if (TRANSITIONDURATION && middleWrapper && getOption('autoHeight', bp) && 'speed' in opts) {\n          middleWrapperStr = '#' + slideId + '-mw{' + getTransitionDurationStyle(speedBP) + '}';\n        }\n\n        // inner wrapper string\n        if ('edgePadding' in opts || 'gutter' in opts) {\n          innerWrapperStr = '#' + slideId + '-iw{' + getInnerWrapperStyles(edgePaddingBP, gutterBP, fixedWidthBP, speedBP, autoHeightBP) + '}';\n        }\n\n        // container string\n        if (carousel && horizontal && !autoWidth && ('fixedWidth' in opts || 'items' in opts || (fixedWidth && 'gutter' in opts))) {\n          containerStr = 'width:' + getContainerWidth(fixedWidthBP, gutterBP, itemsBP) + ';';\n        }\n        if (TRANSITIONDURATION && 'speed' in opts) {\n          containerStr += getTransitionDurationStyle(speedBP);\n        }\n        if (containerStr) {\n          containerStr = '#' + slideId + '{' + containerStr + '}';\n        }\n\n        // slide string\n        if ('fixedWidth' in opts || (fixedWidth && 'gutter' in opts) || !carousel && 'items' in opts) {\n          slideStr += getSlideWidthStyle(fixedWidthBP, gutterBP, itemsBP);\n        }\n        if ('gutter' in opts) {\n          slideStr += getSlideGutterStyle(gutterBP);\n        }\n        // set gallery items transition-duration\n        if (!carousel && 'speed' in opts) {\n          if (TRANSITIONDURATION) { slideStr += getTransitionDurationStyle(speedBP); }\n          if (ANIMATIONDURATION) { slideStr += getAnimationDurationStyle(speedBP); }\n        }\n        if (slideStr) { slideStr = '#' + slideId + ' > .tns-item{' + slideStr + '}'; }\n\n        // add up\n        str = middleWrapperStr + innerWrapperStr + containerStr + slideStr;\n\n        if (str) {\n          sheet.insertRule('@media (min-width: ' + bp / 16 + 'em) {' + str + '}', sheet.cssRules.length);\n        }\n      }\n    }\n  }\n\n  function initTools () {\n    // == slides ==\n    updateSlideStatus();\n\n    // == live region ==\n    outerWrapper.insertAdjacentHTML('afterbegin', '<div class=\"tns-liveregion tns-visually-hidden\" aria-live=\"polite\" aria-atomic=\"true\">slide <span class=\"current\">' + getLiveRegionStr() + '</span>  of ' + slideCount + '</div>');\n    liveregionCurrent = outerWrapper.querySelector('.tns-liveregion .current');\n\n    // == autoplayInit ==\n    if (hasAutoplay) {\n      var txt = autoplay ? 'stop' : 'start';\n      if (autoplayButton) {\n        setAttrs(autoplayButton, {'data-action': txt});\n      } else if (options.autoplayButtonOutput) {\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.autoplayPosition), '<button type=\"button\" data-action=\"' + txt + '\">' + autoplayHtmlStrings[0] + txt + autoplayHtmlStrings[1] + autoplayText[0] + '</button>');\n        autoplayButton = outerWrapper.querySelector('[data-action]');\n      }\n\n      // add event\n      if (autoplayButton) {\n        addEvents(autoplayButton, {'click': toggleAutoplay});\n      }\n\n      if (autoplay) {\n        startAutoplay();\n        if (autoplayHoverPause) { addEvents(container, hoverEvents); }\n        if (autoplayResetOnVisibility) { addEvents(container, visibilityEvent); }\n      }\n    }\n\n    // == navInit ==\n    if (hasNav) {\n      var initIndex = !carousel ? 0 : cloneCount;\n      // customized nav\n      // will not hide the navs in case they're thumbnails\n      if (navContainer) {\n        setAttrs(navContainer, {'aria-label': 'Carousel Pagination'});\n        navItems = navContainer.children;\n        forEach(navItems, function(item, i) {\n          setAttrs(item, {\n            'data-nav': i,\n            'tabindex': '-1',\n            'aria-label': navStr + (i + 1),\n            'aria-controls': slideId,\n          });\n        });\n\n      // generated nav\n      } else {\n        var navHtml = '',\n            hiddenStr = navAsThumbnails ? '' : 'style=\"display:none\"';\n        for (var i = 0; i < slideCount; i++) {\n          // hide nav items by default\n          navHtml += '<button type=\"button\" data-nav=\"' + i +'\" tabindex=\"-1\" aria-controls=\"' + slideId + '\" ' + hiddenStr + ' aria-label=\"' + navStr + (i + 1) +'\"></button>';\n        }\n        navHtml = '<div class=\"tns-nav\" aria-label=\"Carousel Pagination\">' + navHtml + '</div>';\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.navPosition), navHtml);\n\n        navContainer = outerWrapper.querySelector('.tns-nav');\n        navItems = navContainer.children;\n      }\n\n      updateNavVisibility();\n\n      // add transition\n      if (TRANSITIONDURATION) {\n        var prefix = TRANSITIONDURATION.substring(0, TRANSITIONDURATION.length - 18).toLowerCase(),\n            str = 'transition: all ' + speed / 1000 + 's';\n\n        if (prefix) {\n          str = '-' + prefix + '-' + str;\n        }\n\n        addCSSRule(sheet, '[aria-controls^=' + slideId + '-item]', str, getCssRulesLength(sheet));\n      }\n\n      setAttrs(navItems[navCurrentIndex], {'aria-label': navStr + (navCurrentIndex + 1) + navStrCurrent});\n      removeAttrs(navItems[navCurrentIndex], 'tabindex');\n      addClass(navItems[navCurrentIndex], navActiveClass);\n\n      // add events\n      addEvents(navContainer, navEvents);\n    }\n\n\n\n    // == controlsInit ==\n    if (hasControls) {\n      if (!controlsContainer && (!prevButton || !nextButton)) {\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.controlsPosition), '<div class=\"tns-controls\" aria-label=\"Carousel Navigation\" tabindex=\"0\"><button type=\"button\" data-controls=\"prev\" tabindex=\"-1\" aria-controls=\"' + slideId +'\">' + controlsText[0] + '</button><button type=\"button\" data-controls=\"next\" tabindex=\"-1\" aria-controls=\"' + slideId +'\">' + controlsText[1] + '</button></div>');\n\n        controlsContainer = outerWrapper.querySelector('.tns-controls');\n      }\n\n      if (!prevButton || !nextButton) {\n        prevButton = controlsContainer.children[0];\n        nextButton = controlsContainer.children[1];\n      }\n\n      if (options.controlsContainer) {\n        setAttrs(controlsContainer, {\n          'aria-label': 'Carousel Navigation',\n          'tabindex': '0'\n        });\n      }\n\n      if (options.controlsContainer || (options.prevButton && options.nextButton)) {\n        setAttrs([prevButton, nextButton], {\n          'aria-controls': slideId,\n          'tabindex': '-1',\n        });\n      }\n\n      if (options.controlsContainer || (options.prevButton && options.nextButton)) {\n        setAttrs(prevButton, {'data-controls' : 'prev'});\n        setAttrs(nextButton, {'data-controls' : 'next'});\n      }\n\n      prevIsButton = isButton(prevButton);\n      nextIsButton = isButton(nextButton);\n\n      updateControlsStatus();\n\n      // add events\n      if (controlsContainer) {\n        addEvents(controlsContainer, controlsEvents);\n      } else {\n        addEvents(prevButton, controlsEvents);\n        addEvents(nextButton, controlsEvents);\n      }\n    }\n\n    // hide tools if needed\n    disableUI();\n  }\n\n  function initEvents () {\n    // add events\n    if (carousel && TRANSITIONEND) {\n      var eve = {};\n      eve[TRANSITIONEND] = onTransitionEnd;\n      addEvents(container, eve);\n    }\n\n    if (touch) { addEvents(container, touchEvents, options.preventScrollOnTouch); }\n    if (mouseDrag) { addEvents(container, dragEvents); }\n    if (arrowKeys) { addEvents(doc, docmentKeydownEvent); }\n\n    if (nested === 'inner') {\n      events.on('outerResized', function () {\n        resizeTasks();\n        events.emit('innerLoaded', info());\n      });\n    } else if (responsive || fixedWidth || autoWidth || autoHeight || !horizontal) {\n      addEvents(win, {'resize': onResize});\n    }\n\n    if (autoHeight) {\n      if (nested === 'outer') {\n        events.on('innerLoaded', doAutoHeight);\n      } else if (!disable) { doAutoHeight(); }\n    }\n\n    doLazyLoad();\n    if (disable) { disableSlider(); } else if (freeze) { freezeSlider(); }\n\n    events.on('indexChanged', additionalUpdates);\n    if (nested === 'inner') { events.emit('innerLoaded', info()); }\n    if (typeof onInit === 'function') { onInit(info()); }\n    isOn = true;\n  }\n\n  function destroy () {\n    // sheet\n    sheet.disabled = true;\n    if (sheet.ownerNode) { sheet.ownerNode.remove(); }\n\n    // remove win event listeners\n    removeEvents(win, {'resize': onResize});\n\n    // arrowKeys, controls, nav\n    if (arrowKeys) { removeEvents(doc, docmentKeydownEvent); }\n    if (controlsContainer) { removeEvents(controlsContainer, controlsEvents); }\n    if (navContainer) { removeEvents(navContainer, navEvents); }\n\n    // autoplay\n    removeEvents(container, hoverEvents);\n    removeEvents(container, visibilityEvent);\n    if (autoplayButton) { removeEvents(autoplayButton, {'click': toggleAutoplay}); }\n    if (autoplay) { clearInterval(autoplayTimer); }\n\n    // container\n    if (carousel && TRANSITIONEND) {\n      var eve = {};\n      eve[TRANSITIONEND] = onTransitionEnd;\n      removeEvents(container, eve);\n    }\n    if (touch) { removeEvents(container, touchEvents); }\n    if (mouseDrag) { removeEvents(container, dragEvents); }\n\n    // cache Object values in options && reset HTML\n    var htmlList = [containerHTML, controlsContainerHTML, prevButtonHTML, nextButtonHTML, navContainerHTML, autoplayButtonHTML];\n\n    tnsList.forEach(function(item, i) {\n      var el = item === 'container' ? outerWrapper : options[item];\n\n      if (typeof el === 'object' && el) {\n        var prevEl = el.previousElementSibling ? el.previousElementSibling : false,\n            parentEl = el.parentNode;\n        el.outerHTML = htmlList[i];\n        options[item] = prevEl ? prevEl.nextElementSibling : parentEl.firstElementChild;\n      }\n    });\n\n\n    // reset variables\n    tnsList = animateIn = animateOut = animateDelay = animateNormal = horizontal = outerWrapper = innerWrapper = container = containerParent = containerHTML = slideItems = slideCount = breakpointZone = windowWidth = autoWidth = fixedWidth = edgePadding = gutter = viewport = items = slideBy = viewportMax = arrowKeys = speed = rewind = loop = autoHeight = sheet = lazyload = slidePositions = slideItemsOut = cloneCount = slideCountNew = hasRightDeadZone = rightBoundary = updateIndexBeforeTransform = transformAttr = transformPrefix = transformPostfix = getIndexMax = index = indexCached = indexMin = indexMax = resizeTimer = swipeAngle = moveDirectionExpected = running = onInit = events = newContainerClasses = slideId = disable = disabled = freezable = freeze = frozen = controlsEvents = navEvents = hoverEvents = visibilityEvent = docmentKeydownEvent = touchEvents = dragEvents = hasControls = hasNav = navAsThumbnails = hasAutoplay = hasTouch = hasMouseDrag = slideActiveClass = imgCompleteClass = imgEvents = imgsComplete = controls = controlsText = controlsContainer = controlsContainerHTML = prevButton = nextButton = prevIsButton = nextIsButton = nav = navContainer = navContainerHTML = navItems = pages = pagesCached = navClicked = navCurrentIndex = navCurrentIndexCached = navActiveClass = navStr = navStrCurrent = autoplay = autoplayTimeout = autoplayDirection = autoplayText = autoplayHoverPause = autoplayButton = autoplayButtonHTML = autoplayResetOnVisibility = autoplayHtmlStrings = autoplayTimer = animating = autoplayHoverPaused = autoplayUserPaused = autoplayVisibilityPaused = initPosition = lastPosition = translateInit = disX = disY = panStart = rafIndex = getDist = touch = mouseDrag = null;\n    // check variables\n    // [animateIn, animateOut, animateDelay, animateNormal, horizontal, outerWrapper, innerWrapper, container, containerParent, containerHTML, slideItems, slideCount, breakpointZone, windowWidth, autoWidth, fixedWidth, edgePadding, gutter, viewport, items, slideBy, viewportMax, arrowKeys, speed, rewind, loop, autoHeight, sheet, lazyload, slidePositions, slideItemsOut, cloneCount, slideCountNew, hasRightDeadZone, rightBoundary, updateIndexBeforeTransform, transformAttr, transformPrefix, transformPostfix, getIndexMax, index, indexCached, indexMin, indexMax, resizeTimer, swipeAngle, moveDirectionExpected, running, onInit, events, newContainerClasses, slideId, disable, disabled, freezable, freeze, frozen, controlsEvents, navEvents, hoverEvents, visibilityEvent, docmentKeydownEvent, touchEvents, dragEvents, hasControls, hasNav, navAsThumbnails, hasAutoplay, hasTouch, hasMouseDrag, slideActiveClass, imgCompleteClass, imgEvents, imgsComplete, controls, controlsText, controlsContainer, controlsContainerHTML, prevButton, nextButton, prevIsButton, nextIsButton, nav, navContainer, navContainerHTML, navItems, pages, pagesCached, navClicked, navCurrentIndex, navCurrentIndexCached, navActiveClass, navStr, navStrCurrent, autoplay, autoplayTimeout, autoplayDirection, autoplayText, autoplayHoverPause, autoplayButton, autoplayButtonHTML, autoplayResetOnVisibility, autoplayHtmlStrings, autoplayTimer, animating, autoplayHoverPaused, autoplayUserPaused, autoplayVisibilityPaused, initPosition, lastPosition, translateInit, disX, disY, panStart, rafIndex, getDist, touch, mouseDrag ].forEach(function(item) { if (item !== null) { console.log(item); } });\n\n    for (var a in this) {\n      if (a !== 'rebuild') { this[a] = null; }\n    }\n    isOn = false;\n  }\n\n// === ON RESIZE ===\n  // responsive || fixedWidth || autoWidth || !horizontal\n  function onResize (e) {\n    raf(function(){ resizeTasks(getEvent(e)); });\n  }\n\n  function resizeTasks (e) {\n    if (!isOn) { return; }\n    if (nested === 'outer') { events.emit('outerResized', info(e)); }\n    windowWidth = getWindowWidth();\n    var bpChanged,\n        breakpointZoneTem = breakpointZone,\n        needContainerTransform = false;\n\n    if (responsive) {\n      setBreakpointZone();\n      bpChanged = breakpointZoneTem !== breakpointZone;\n      // if (hasRightDeadZone) { needContainerTransform = true; } // *?\n      if (bpChanged) { events.emit('newBreakpointStart', info(e)); }\n    }\n\n    var indChanged,\n        itemsChanged,\n        itemsTem = items,\n        disableTem = disable,\n        freezeTem = freeze,\n        arrowKeysTem = arrowKeys,\n        controlsTem = controls,\n        navTem = nav,\n        touchTem = touch,\n        mouseDragTem = mouseDrag,\n        autoplayTem = autoplay,\n        autoplayHoverPauseTem = autoplayHoverPause,\n        autoplayResetOnVisibilityTem = autoplayResetOnVisibility,\n        indexTem = index;\n\n    if (bpChanged) {\n      var fixedWidthTem = fixedWidth,\n          autoHeightTem = autoHeight,\n          controlsTextTem = controlsText,\n          centerTem = center,\n          autoplayTextTem = autoplayText;\n\n      if (!CSSMQ) {\n        var gutterTem = gutter,\n            edgePaddingTem = edgePadding;\n      }\n    }\n\n    // get option:\n    // fixed width: viewport, fixedWidth, gutter => items\n    // others: window width => all variables\n    // all: items => slideBy\n    arrowKeys = getOption('arrowKeys');\n    controls = getOption('controls');\n    nav = getOption('nav');\n    touch = getOption('touch');\n    center = getOption('center');\n    mouseDrag = getOption('mouseDrag');\n    autoplay = getOption('autoplay');\n    autoplayHoverPause = getOption('autoplayHoverPause');\n    autoplayResetOnVisibility = getOption('autoplayResetOnVisibility');\n\n    if (bpChanged) {\n      disable = getOption('disable');\n      fixedWidth = getOption('fixedWidth');\n      speed = getOption('speed');\n      autoHeight = getOption('autoHeight');\n      controlsText = getOption('controlsText');\n      autoplayText = getOption('autoplayText');\n      autoplayTimeout = getOption('autoplayTimeout');\n\n      if (!CSSMQ) {\n        edgePadding = getOption('edgePadding');\n        gutter = getOption('gutter');\n      }\n    }\n    // update options\n    resetVariblesWhenDisable(disable);\n\n    viewport = getViewportWidth(); // <= edgePadding, gutter\n    if ((!horizontal || autoWidth) && !disable) {\n      setSlidePositions();\n      if (!horizontal) {\n        updateContentWrapperHeight(); // <= setSlidePositions\n        needContainerTransform = true;\n      }\n    }\n    if (fixedWidth || autoWidth) {\n      rightBoundary = getRightBoundary(); // autoWidth: <= viewport, slidePositions, gutter\n                                          // fixedWidth: <= viewport, fixedWidth, gutter\n      indexMax = getIndexMax(); // autoWidth: <= rightBoundary, slidePositions\n                                // fixedWidth: <= rightBoundary, fixedWidth, gutter\n    }\n\n    if (bpChanged || fixedWidth) {\n      items = getOption('items');\n      slideBy = getOption('slideBy');\n      itemsChanged = items !== itemsTem;\n\n      if (itemsChanged) {\n        if (!fixedWidth && !autoWidth) { indexMax = getIndexMax(); } // <= items\n        // check index before transform in case\n        // slider reach the right edge then items become bigger\n        updateIndex();\n      }\n    }\n\n    if (bpChanged) {\n      if (disable !== disableTem) {\n        if (disable) {\n          disableSlider();\n        } else {\n          enableSlider(); // <= slidePositions, rightBoundary, indexMax\n        }\n      }\n    }\n\n    if (freezable && (bpChanged || fixedWidth || autoWidth)) {\n      freeze = getFreeze(); // <= autoWidth: slidePositions, gutter, viewport, rightBoundary\n                            // <= fixedWidth: fixedWidth, gutter, rightBoundary\n                            // <= others: items\n\n      if (freeze !== freezeTem) {\n        if (freeze) {\n          doContainerTransform(getContainerTransformValue(getStartIndex(0)));\n          freezeSlider();\n        } else {\n          unfreezeSlider();\n          needContainerTransform = true;\n        }\n      }\n    }\n\n    resetVariblesWhenDisable(disable || freeze); // controls, nav, touch, mouseDrag, arrowKeys, autoplay, autoplayHoverPause, autoplayResetOnVisibility\n    if (!autoplay) { autoplayHoverPause = autoplayResetOnVisibility = false; }\n\n    if (arrowKeys !== arrowKeysTem) {\n      arrowKeys ?\n        addEvents(doc, docmentKeydownEvent) :\n        removeEvents(doc, docmentKeydownEvent);\n    }\n    if (controls !== controlsTem) {\n      if (controls) {\n        if (controlsContainer) {\n          showElement(controlsContainer);\n        } else {\n          if (prevButton) { showElement(prevButton); }\n          if (nextButton) { showElement(nextButton); }\n        }\n      } else {\n        if (controlsContainer) {\n          hideElement(controlsContainer);\n        } else {\n          if (prevButton) { hideElement(prevButton); }\n          if (nextButton) { hideElement(nextButton); }\n        }\n      }\n    }\n    if (nav !== navTem) {\n      if (nav) {\n        showElement(navContainer);\n        updateNavVisibility();\n      } else {\n        hideElement(navContainer)\n      }\n    }\n    if (touch !== touchTem) {\n      touch ?\n        addEvents(container, touchEvents, options.preventScrollOnTouch) :\n        removeEvents(container, touchEvents);\n    }\n    if (mouseDrag !== mouseDragTem) {\n      mouseDrag ?\n        addEvents(container, dragEvents) :\n        removeEvents(container, dragEvents);\n    }\n    if (autoplay !== autoplayTem) {\n      if (autoplay) {\n        if (autoplayButton) { showElement(autoplayButton); }\n        if (!animating && !autoplayUserPaused) { startAutoplay(); }\n      } else {\n        if (autoplayButton) { hideElement(autoplayButton); }\n        if (animating) { stopAutoplay(); }\n      }\n    }\n    if (autoplayHoverPause !== autoplayHoverPauseTem) {\n      autoplayHoverPause ?\n        addEvents(container, hoverEvents) :\n        removeEvents(container, hoverEvents);\n    }\n    if (autoplayResetOnVisibility !== autoplayResetOnVisibilityTem) {\n      autoplayResetOnVisibility ?\n        addEvents(doc, visibilityEvent) :\n        removeEvents(doc, visibilityEvent);\n    }\n\n    if (bpChanged) {\n      if (fixedWidth !== fixedWidthTem || center !== centerTem) { needContainerTransform = true; }\n\n      if (autoHeight !== autoHeightTem) {\n        if (!autoHeight) { innerWrapper.style.height = ''; }\n      }\n\n      if (controls && controlsText !== controlsTextTem) {\n        prevButton.innerHTML = controlsText[0];\n        nextButton.innerHTML = controlsText[1];\n      }\n\n      if (autoplayButton && autoplayText !== autoplayTextTem) {\n        var i = autoplay ? 1 : 0,\n            html = autoplayButton.innerHTML,\n            len = html.length - autoplayTextTem[i].length;\n        if (html.substring(len) === autoplayTextTem[i]) {\n          autoplayButton.innerHTML = html.substring(0, len) + autoplayText[i];\n        }\n      }\n    } else {\n      if (center && (fixedWidth || autoWidth)) { needContainerTransform = true; }\n    }\n\n    if (itemsChanged || fixedWidth && !autoWidth) {\n      pages = getPages();\n      updateNavVisibility();\n    }\n\n    indChanged = index !== indexTem;\n    if (indChanged) {\n      events.emit('indexChanged', info());\n      needContainerTransform = true;\n    } else if (itemsChanged) {\n      if (!indChanged) { additionalUpdates(); }\n    } else if (fixedWidth || autoWidth) {\n      doLazyLoad();\n      updateSlideStatus();\n      updateLiveRegion();\n    }\n\n    if (itemsChanged && !carousel) { updateGallerySlidePositions(); }\n\n    if (!disable && !freeze) {\n      // non-mediaqueries: IE8\n      if (bpChanged && !CSSMQ) {\n        // middle wrapper styles\n\n        // inner wrapper styles\n        if (edgePadding !== edgePaddingTem || gutter !== gutterTem) {\n          innerWrapper.style.cssText = getInnerWrapperStyles(edgePadding, gutter, fixedWidth, speed, autoHeight);\n        }\n\n        if (horizontal) {\n          // container styles\n          if (carousel) {\n            container.style.width = getContainerWidth(fixedWidth, gutter, items);\n          }\n\n          // slide styles\n          var str = getSlideWidthStyle(fixedWidth, gutter, items) +\n                    getSlideGutterStyle(gutter);\n\n          // remove the last line and\n          // add new styles\n          removeCSSRule(sheet, getCssRulesLength(sheet) - 1);\n          addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n        }\n      }\n\n      // auto height\n      if (autoHeight) { doAutoHeight(); }\n\n      if (needContainerTransform) {\n        doContainerTransformSilent();\n        indexCached = index;\n      }\n    }\n\n    if (bpChanged) { events.emit('newBreakpointEnd', info(e)); }\n  }\n\n\n\n\n\n  // === INITIALIZATION FUNCTIONS === //\n  function getFreeze () {\n    if (!fixedWidth && !autoWidth) {\n      var a = center ? items - (items - 1) / 2 : items;\n      return  slideCount <= a;\n    }\n\n    var width = fixedWidth ? (fixedWidth + gutter) * slideCount : slidePositions[slideCount],\n        vp = edgePadding ? viewport + edgePadding * 2 : viewport + gutter;\n\n    if (center) {\n      vp -= fixedWidth ? (viewport - fixedWidth) / 2 : (viewport - (slidePositions[index + 1] - slidePositions[index] - gutter)) / 2;\n    }\n\n    return width <= vp;\n  }\n\n  function setBreakpointZone () {\n    breakpointZone = 0;\n    for (var bp in responsive) {\n      bp = parseInt(bp); // convert string to number\n      if (windowWidth >= bp) { breakpointZone = bp; }\n    }\n  }\n\n  // (slideBy, indexMin, indexMax) => index\n  var updateIndex = (function () {\n    return loop ?\n      carousel ?\n        // loop + carousel\n        function () {\n          var leftEdge = indexMin,\n              rightEdge = indexMax;\n\n          leftEdge += slideBy;\n          rightEdge -= slideBy;\n\n          // adjust edges when has edge paddings\n          // or fixed-width slider with extra space on the right side\n          if (edgePadding) {\n            leftEdge += 1;\n            rightEdge -= 1;\n          } else if (fixedWidth) {\n            if ((viewport + gutter)%(fixedWidth + gutter)) { rightEdge -= 1; }\n          }\n\n          if (cloneCount) {\n            if (index > rightEdge) {\n              index -= slideCount;\n            } else if (index < leftEdge) {\n              index += slideCount;\n            }\n          }\n        } :\n        // loop + gallery\n        function() {\n          if (index > indexMax) {\n            while (index >= indexMin + slideCount) { index -= slideCount; }\n          } else if (index < indexMin) {\n            while (index <= indexMax - slideCount) { index += slideCount; }\n          }\n        } :\n      // non-loop\n      function() {\n        index = Math.max(indexMin, Math.min(indexMax, index));\n      };\n  })();\n\n  function disableUI () {\n    if (!autoplay && autoplayButton) { hideElement(autoplayButton); }\n    if (!nav && navContainer) { hideElement(navContainer); }\n    if (!controls) {\n      if (controlsContainer) {\n        hideElement(controlsContainer);\n      } else {\n        if (prevButton) { hideElement(prevButton); }\n        if (nextButton) { hideElement(nextButton); }\n      }\n    }\n  }\n\n  function enableUI () {\n    if (autoplay && autoplayButton) { showElement(autoplayButton); }\n    if (nav && navContainer) { showElement(navContainer); }\n    if (controls) {\n      if (controlsContainer) {\n        showElement(controlsContainer);\n      } else {\n        if (prevButton) { showElement(prevButton); }\n        if (nextButton) { showElement(nextButton); }\n      }\n    }\n  }\n\n  function freezeSlider () {\n    if (frozen) { return; }\n\n    // remove edge padding from inner wrapper\n    if (edgePadding) { innerWrapper.style.margin = '0px'; }\n\n    // add class tns-transparent to cloned slides\n    if (cloneCount) {\n      var str = 'tns-transparent';\n      for (var i = cloneCount; i--;) {\n        if (carousel) { addClass(slideItems[i], str); }\n        addClass(slideItems[slideCountNew - i - 1], str);\n      }\n    }\n\n    // update tools\n    disableUI();\n\n    frozen = true;\n  }\n\n  function unfreezeSlider () {\n    if (!frozen) { return; }\n\n    // restore edge padding for inner wrapper\n    // for mordern browsers\n    if (edgePadding && CSSMQ) { innerWrapper.style.margin = ''; }\n\n    // remove class tns-transparent to cloned slides\n    if (cloneCount) {\n      var str = 'tns-transparent';\n      for (var i = cloneCount; i--;) {\n        if (carousel) { removeClass(slideItems[i], str); }\n        removeClass(slideItems[slideCountNew - i - 1], str);\n      }\n    }\n\n    // update tools\n    enableUI();\n\n    frozen = false;\n  }\n\n  function disableSlider () {\n    if (disabled) { return; }\n\n    sheet.disabled = true;\n    container.className = container.className.replace(newContainerClasses.substring(1), '');\n    removeAttrs(container, ['style']);\n    if (loop) {\n      for (var j = cloneCount; j--;) {\n        if (carousel) { hideElement(slideItems[j]); }\n        hideElement(slideItems[slideCountNew - j - 1]);\n      }\n    }\n\n    // vertical slider\n    if (!horizontal || !carousel) { removeAttrs(innerWrapper, ['style']); }\n\n    // gallery\n    if (!carousel) {\n      for (var i = index, l = index + slideCount; i < l; i++) {\n        var item = slideItems[i];\n        removeAttrs(item, ['style']);\n        removeClass(item, animateIn);\n        removeClass(item, animateNormal);\n      }\n    }\n\n    // update tools\n    disableUI();\n\n    disabled = true;\n  }\n\n  function enableSlider () {\n    if (!disabled) { return; }\n\n    sheet.disabled = false;\n    container.className += newContainerClasses;\n    doContainerTransformSilent();\n\n    if (loop) {\n      for (var j = cloneCount; j--;) {\n        if (carousel) { showElement(slideItems[j]); }\n        showElement(slideItems[slideCountNew - j - 1]);\n      }\n    }\n\n    // gallery\n    if (!carousel) {\n      for (var i = index, l = index + slideCount; i < l; i++) {\n        var item = slideItems[i],\n            classN = i < index + items ? animateIn : animateNormal;\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, classN);\n      }\n    }\n\n    // update tools\n    enableUI();\n\n    disabled = false;\n  }\n\n  function updateLiveRegion () {\n    var str = getLiveRegionStr();\n    if (liveregionCurrent.innerHTML !== str) { liveregionCurrent.innerHTML = str; }\n  }\n\n  function getLiveRegionStr () {\n    var arr = getVisibleSlideRange(),\n        start = arr[0] + 1,\n        end = arr[1] + 1;\n    return start === end ? start + '' : start + ' to ' + end;\n  }\n\n  function getVisibleSlideRange (val) {\n    if (val == null) { val = getContainerTransformValue(); }\n    var start = index, end, rangestart, rangeend;\n\n    // get range start, range end for autoWidth and fixedWidth\n    if (center || edgePadding) {\n      if (autoWidth || fixedWidth) {\n        rangestart = - (parseFloat(val) + edgePadding);\n        rangeend = rangestart + viewport + edgePadding * 2;\n      }\n    } else {\n      if (autoWidth) {\n        rangestart = slidePositions[index];\n        rangeend = rangestart + viewport;\n      }\n    }\n\n    // get start, end\n    // - check auto width\n    if (autoWidth) {\n      slidePositions.forEach(function(point, i) {\n        if (i < slideCountNew) {\n          if ((center || edgePadding) && point <= rangestart + 0.5) { start = i; }\n          if (rangeend - point >= 0.5) { end = i; }\n        }\n      });\n\n    // - check percentage width, fixed width\n    } else {\n\n      if (fixedWidth) {\n        var cell = fixedWidth + gutter;\n        if (center || edgePadding) {\n          start = Math.floor(rangestart/cell);\n          end = Math.ceil(rangeend/cell - 1);\n        } else {\n          end = start + Math.ceil(viewport/cell) - 1;\n        }\n\n      } else {\n        if (center || edgePadding) {\n          var a = items - 1;\n          if (center) {\n            start -= a / 2;\n            end = index + a / 2;\n          } else {\n            end = index + a;\n          }\n\n          if (edgePadding) {\n            var b = edgePadding * items / viewport;\n            start -= b;\n            end += b;\n          }\n\n          start = Math.floor(start);\n          end = Math.ceil(end);\n        } else {\n          end = start + items - 1;\n        }\n      }\n\n      start = Math.max(start, 0);\n      end = Math.min(end, slideCountNew - 1);\n    }\n\n    return [start, end];\n  }\n\n  function doLazyLoad () {\n    if (lazyload && !disable) {\n      var arg = getVisibleSlideRange();\n      arg.push(lazyloadSelector);\n\n      getImageArray.apply(null, arg).forEach(function (img) {\n        if (!hasClass(img, imgCompleteClass)) {\n          // stop propagation transitionend event to container\n          var eve = {};\n          eve[TRANSITIONEND] = function (e) { e.stopPropagation(); };\n          addEvents(img, eve);\n\n          addEvents(img, imgEvents);\n\n          // update src\n          img.src = getAttr(img, 'data-src');\n\n          // update srcset\n          var srcset = getAttr(img, 'data-srcset');\n          if (srcset) { img.srcset = srcset; }\n\n          addClass(img, 'loading');\n        }\n      });\n    }\n  }\n\n  function onImgLoaded (e) {\n    imgLoaded(getTarget(e));\n  }\n\n  function onImgFailed (e) {\n    imgFailed(getTarget(e));\n  }\n\n  function imgLoaded (img) {\n    addClass(img, 'loaded');\n    imgCompleted(img);\n  }\n\n  function imgFailed (img) {\n    addClass(img, 'failed');\n    imgCompleted(img);\n  }\n\n  function imgCompleted (img) {\n    addClass(img, imgCompleteClass);\n    removeClass(img, 'loading');\n    removeEvents(img, imgEvents);\n  }\n\n  function getImageArray (start, end, imgSelector) {\n    var imgs = [];\n    if (!imgSelector) { imgSelector = 'img'; }\n\n    while (start <= end) {\n      forEach(slideItems[start].querySelectorAll(imgSelector), function (img) { imgs.push(img); });\n      start++;\n    }\n\n    return imgs;\n  }\n\n  // check if all visible images are loaded\n  // and update container height if it's done\n  function doAutoHeight () {\n    var imgs = getImageArray.apply(null, getVisibleSlideRange());\n    raf(function(){ imgsLoadedCheck(imgs, updateInnerWrapperHeight); });\n  }\n\n  function imgsLoadedCheck (imgs, cb) {\n    // execute callback function if all images are complete\n    if (imgsComplete) { return cb(); }\n\n    // check image classes\n    imgs.forEach(function (img, index) {\n      if (!lazyload && img.complete) { imgCompleted(img); } // Check image.complete\n      if (hasClass(img, imgCompleteClass)) { imgs.splice(index, 1); }\n    });\n\n    // execute callback function if selected images are all complete\n    if (!imgs.length) { return cb(); }\n\n    // otherwise execute this functiona again\n    raf(function(){ imgsLoadedCheck(imgs, cb); });\n  }\n\n  function additionalUpdates () {\n    doLazyLoad();\n    updateSlideStatus();\n    updateLiveRegion();\n    updateControlsStatus();\n    updateNavStatus();\n  }\n\n\n  function update_carousel_transition_duration () {\n    if (carousel && autoHeight) {\n      middleWrapper.style[TRANSITIONDURATION] = speed / 1000 + 's';\n    }\n  }\n\n  function getMaxSlideHeight (slideStart, slideRange) {\n    var heights = [];\n    for (var i = slideStart, l = Math.min(slideStart + slideRange, slideCountNew); i < l; i++) {\n      heights.push(slideItems[i].offsetHeight);\n    }\n\n    return Math.max.apply(null, heights);\n  }\n\n  // update inner wrapper height\n  // 1. get the max-height of the visible slides\n  // 2. set transitionDuration to speed\n  // 3. update inner wrapper height to max-height\n  // 4. set transitionDuration to 0s after transition done\n  function updateInnerWrapperHeight () {\n    var maxHeight = autoHeight ? getMaxSlideHeight(index, items) : getMaxSlideHeight(cloneCount, slideCount),\n        wp = middleWrapper ? middleWrapper : innerWrapper;\n\n    if (wp.style.height !== maxHeight) { wp.style.height = maxHeight + 'px'; }\n  }\n\n  // get the distance from the top edge of the first slide to each slide\n  // (init) => slidePositions\n  function setSlidePositions () {\n    slidePositions = [0];\n    var attr = horizontal ? 'left' : 'top',\n        attr2 = horizontal ? 'right' : 'bottom',\n        base = slideItems[0].getBoundingClientRect()[attr];\n\n    forEach(slideItems, function(item, i) {\n      // skip the first slide\n      if (i) { slidePositions.push(item.getBoundingClientRect()[attr] - base); }\n      // add the end edge\n      if (i === slideCountNew - 1) { slidePositions.push(item.getBoundingClientRect()[attr2] - base); }\n    });\n  }\n\n  // update slide\n  function updateSlideStatus () {\n    var range = getVisibleSlideRange(),\n        start = range[0],\n        end = range[1];\n\n    forEach(slideItems, function(item, i) {\n      // show slides\n      if (i >= start && i <= end) {\n        if (hasAttr(item, 'aria-hidden')) {\n          removeAttrs(item, ['aria-hidden', 'tabindex']);\n          addClass(item, slideActiveClass);\n        }\n      // hide slides\n      } else {\n        if (!hasAttr(item, 'aria-hidden')) {\n          setAttrs(item, {\n            'aria-hidden': 'true',\n            'tabindex': '-1'\n          });\n          removeClass(item, slideActiveClass);\n        }\n      }\n    });\n  }\n\n  // gallery: update slide position\n  function updateGallerySlidePositions () {\n    var l = index + Math.min(slideCount, items);\n    for (var i = slideCountNew; i--;) {\n      var item = slideItems[i];\n\n      if (i >= index && i < l) {\n        // add transitions to visible slides when adjusting their positions\n        addClass(item, 'tns-moving');\n\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, animateIn);\n        removeClass(item, animateNormal);\n      } else if (item.style.left) {\n        item.style.left = '';\n        addClass(item, animateNormal);\n        removeClass(item, animateIn);\n      }\n\n      // remove outlet animation\n      removeClass(item, animateOut);\n    }\n\n    // removing '.tns-moving'\n    setTimeout(function() {\n      forEach(slideItems, function(el) {\n        removeClass(el, 'tns-moving');\n      });\n    }, 300);\n  }\n\n  // set tabindex on Nav\n  function updateNavStatus () {\n    // get current nav\n    if (nav) {\n      navCurrentIndex = navClicked >= 0 ? navClicked : getCurrentNavIndex();\n      navClicked = -1;\n\n      if (navCurrentIndex !== navCurrentIndexCached) {\n        var navPrev = navItems[navCurrentIndexCached],\n            navCurrent = navItems[navCurrentIndex];\n\n        setAttrs(navPrev, {\n          'tabindex': '-1',\n          'aria-label': navStr + (navCurrentIndexCached + 1)\n        });\n        removeClass(navPrev, navActiveClass);\n\n        setAttrs(navCurrent, {'aria-label': navStr + (navCurrentIndex + 1) + navStrCurrent});\n        removeAttrs(navCurrent, 'tabindex');\n        addClass(navCurrent, navActiveClass);\n\n        navCurrentIndexCached = navCurrentIndex;\n      }\n    }\n  }\n\n  function getLowerCaseNodeName (el) {\n    return el.nodeName.toLowerCase();\n  }\n\n  function isButton (el) {\n    return getLowerCaseNodeName(el) === 'button';\n  }\n\n  function isAriaDisabled (el) {\n    return el.getAttribute('aria-disabled') === 'true';\n  }\n\n  function disEnableElement (isButton, el, val) {\n    if (isButton) {\n      el.disabled = val;\n    } else {\n      el.setAttribute('aria-disabled', val.toString());\n    }\n  }\n\n  // set 'disabled' to true on controls when reach the edges\n  function updateControlsStatus () {\n    if (!controls || rewind || loop) { return; }\n\n    var prevDisabled = (prevIsButton) ? prevButton.disabled : isAriaDisabled(prevButton),\n        nextDisabled = (nextIsButton) ? nextButton.disabled : isAriaDisabled(nextButton),\n        disablePrev = (index <= indexMin) ? true : false,\n        disableNext = (!rewind && index >= indexMax) ? true : false;\n\n    if (disablePrev && !prevDisabled) {\n      disEnableElement(prevIsButton, prevButton, true);\n    }\n    if (!disablePrev && prevDisabled) {\n      disEnableElement(prevIsButton, prevButton, false);\n    }\n    if (disableNext && !nextDisabled) {\n      disEnableElement(nextIsButton, nextButton, true);\n    }\n    if (!disableNext && nextDisabled) {\n      disEnableElement(nextIsButton, nextButton, false);\n    }\n  }\n\n  // set duration\n  function resetDuration (el, str) {\n    if (TRANSITIONDURATION) { el.style[TRANSITIONDURATION] = str; }\n  }\n\n  function getSliderWidth () {\n    return fixedWidth ? (fixedWidth + gutter) * slideCountNew : slidePositions[slideCountNew];\n  }\n\n  function getCenterGap (num) {\n    if (num == null) { num = index; }\n\n    var gap = edgePadding ? gutter : 0;\n    return autoWidth ? ((viewport - gap) - (slidePositions[num + 1] - slidePositions[num] - gutter))/2 :\n      fixedWidth ? (viewport - fixedWidth) / 2 :\n        (items - 1) / 2;\n  }\n\n  function getRightBoundary () {\n    var gap = edgePadding ? gutter : 0,\n        result = (viewport + gap) - getSliderWidth();\n\n    if (center && !loop) {\n      result = fixedWidth ? - (fixedWidth + gutter) * (slideCountNew - 1) - getCenterGap() :\n        getCenterGap(slideCountNew - 1) - slidePositions[slideCountNew - 1];\n    }\n    if (result > 0) { result = 0; }\n\n    return result;\n  }\n\n  function getContainerTransformValue (num) {\n    if (num == null) { num = index; }\n\n    var val;\n    if (horizontal && !autoWidth) {\n      if (fixedWidth) {\n        val = - (fixedWidth + gutter) * num;\n        if (center) { val += getCenterGap(); }\n      } else {\n        var denominator = TRANSFORM ? slideCountNew : items;\n        if (center) { num -= getCenterGap(); }\n        val = - num * 100 / denominator;\n      }\n    } else {\n      val = - slidePositions[num];\n      if (center && autoWidth) {\n        val += getCenterGap();\n      }\n    }\n\n    if (hasRightDeadZone) { val = Math.max(val, rightBoundary); }\n\n    val += (horizontal && !autoWidth && !fixedWidth) ? '%' : 'px';\n\n    return val;\n  }\n\n  function doContainerTransformSilent (val) {\n    resetDuration(container, '0s');\n    doContainerTransform(val);\n  }\n\n  function doContainerTransform (val) {\n    if (val == null) { val = getContainerTransformValue(); }\n    container.style[transformAttr] = transformPrefix + val + transformPostfix;\n  }\n\n  function animateSlide (number, classOut, classIn, isOut) {\n    var l = number + items;\n    if (!loop) { l = Math.min(l, slideCountNew); }\n\n    for (var i = number; i < l; i++) {\n        var item = slideItems[i];\n\n      // set item positions\n      if (!isOut) { item.style.left = (i - index) * 100 / items + '%'; }\n\n      if (animateDelay && TRANSITIONDELAY) {\n        item.style[TRANSITIONDELAY] = item.style[ANIMATIONDELAY] = animateDelay * (i - number) / 1000 + 's';\n      }\n      removeClass(item, classOut);\n      addClass(item, classIn);\n\n      if (isOut) { slideItemsOut.push(item); }\n    }\n  }\n\n  // make transfer after click/drag:\n  // 1. change 'transform' property for mordern browsers\n  // 2. change 'left' property for legacy browsers\n  var transformCore = (function () {\n    return carousel ?\n      function () {\n        resetDuration(container, '');\n        if (TRANSITIONDURATION || !speed) {\n          // for morden browsers with non-zero duration or\n          // zero duration for all browsers\n          doContainerTransform();\n          // run fallback function manually\n          // when duration is 0 / container is hidden\n          if (!speed || !isVisible(container)) { onTransitionEnd(); }\n\n        } else {\n          // for old browser with non-zero duration\n          jsTransform(container, transformAttr, transformPrefix, transformPostfix, getContainerTransformValue(), speed, onTransitionEnd);\n        }\n\n        if (!horizontal) { updateContentWrapperHeight(); }\n      } :\n      function () {\n        slideItemsOut = [];\n\n        var eve = {};\n        eve[TRANSITIONEND] = eve[ANIMATIONEND] = onTransitionEnd;\n        removeEvents(slideItems[indexCached], eve);\n        addEvents(slideItems[index], eve);\n\n        animateSlide(indexCached, animateIn, animateOut, true);\n        animateSlide(index, animateNormal, animateIn);\n\n        // run fallback function manually\n        // when transition or animation not supported / duration is 0\n        if (!TRANSITIONEND || !ANIMATIONEND || !speed || !isVisible(container)) { onTransitionEnd(); }\n      };\n  })();\n\n  function render (e, sliderMoved) {\n    if (updateIndexBeforeTransform) { updateIndex(); }\n\n    // render when slider was moved (touch or drag) even though index may not change\n    if (index !== indexCached || sliderMoved) {\n      // events\n      events.emit('indexChanged', info());\n      events.emit('transitionStart', info());\n      if (autoHeight) { doAutoHeight(); }\n\n      // pause autoplay when click or keydown from user\n      if (animating && e && ['click', 'keydown'].indexOf(e.type) >= 0) { stopAutoplay(); }\n\n      running = true;\n      transformCore();\n    }\n  }\n\n  /*\n   * Transfer prefixed properties to the same format\n   * CSS: -Webkit-Transform => webkittransform\n   * JS: WebkitTransform => webkittransform\n   * @param {string} str - property\n   *\n   */\n  function strTrans (str) {\n    return str.toLowerCase().replace(/-/g, '');\n  }\n\n  // AFTER TRANSFORM\n  // Things need to be done after a transfer:\n  // 1. check index\n  // 2. add classes to visible slide\n  // 3. disable controls buttons when reach the first/last slide in non-loop slider\n  // 4. update nav status\n  // 5. lazyload images\n  // 6. update container height\n  function onTransitionEnd (event) {\n    // check running on gallery mode\n    // make sure trantionend/animationend events run only once\n    if (carousel || running) {\n      events.emit('transitionEnd', info(event));\n\n      if (!carousel && slideItemsOut.length > 0) {\n        for (var i = 0; i < slideItemsOut.length; i++) {\n          var item = slideItemsOut[i];\n          // set item positions\n          item.style.left = '';\n\n          if (ANIMATIONDELAY && TRANSITIONDELAY) {\n            item.style[ANIMATIONDELAY] = '';\n            item.style[TRANSITIONDELAY] = '';\n          }\n          removeClass(item, animateOut);\n          addClass(item, animateNormal);\n        }\n      }\n\n      /* update slides, nav, controls after checking ...\n       * => legacy browsers who don't support 'event'\n       *    have to check event first, otherwise event.target will cause an error\n       * => or 'gallery' mode:\n       *   + event target is slide item\n       * => or 'carousel' mode:\n       *   + event target is container,\n       *   + event.property is the same with transform attribute\n       */\n      if (!event ||\n          !carousel && event.target.parentNode === container ||\n          event.target === container && strTrans(event.propertyName) === strTrans(transformAttr)) {\n\n        if (!updateIndexBeforeTransform) {\n          var indexTem = index;\n          updateIndex();\n          if (index !== indexTem) {\n            events.emit('indexChanged', info());\n\n            doContainerTransformSilent();\n          }\n        }\n\n        if (nested === 'inner') { events.emit('innerLoaded', info()); }\n        running = false;\n        indexCached = index;\n      }\n    }\n\n  }\n\n  // # ACTIONS\n  function goTo (targetIndex, e) {\n    if (freeze) { return; }\n\n    // prev slideBy\n    if (targetIndex === 'prev') {\n      onControlsClick(e, -1);\n\n    // next slideBy\n    } else if (targetIndex === 'next') {\n      onControlsClick(e, 1);\n\n    // go to exact slide\n    } else {\n      if (running) {\n        if (preventActionWhenRunning) { return; } else { onTransitionEnd(); }\n      }\n\n      var absIndex = getAbsIndex(),\n          indexGap = 0;\n\n      if (targetIndex === 'first') {\n        indexGap = - absIndex;\n      } else if (targetIndex === 'last') {\n        indexGap = carousel ? slideCount - items - absIndex : slideCount - 1 - absIndex;\n      } else {\n        if (typeof targetIndex !== 'number') { targetIndex = parseInt(targetIndex); }\n\n        if (!isNaN(targetIndex)) {\n          // from directly called goTo function\n          if (!e) { targetIndex = Math.max(0, Math.min(slideCount - 1, targetIndex)); }\n\n          indexGap = targetIndex - absIndex;\n        }\n      }\n\n      // gallery: make sure new page won't overlap with current page\n      if (!carousel && indexGap && Math.abs(indexGap) < items) {\n        var factor = indexGap > 0 ? 1 : -1;\n        indexGap += (index + indexGap - slideCount) >= indexMin ? slideCount * factor : slideCount * 2 * factor * -1;\n      }\n\n      index += indexGap;\n\n      // make sure index is in range\n      if (carousel && loop) {\n        if (index < indexMin) { index += slideCount; }\n        if (index > indexMax) { index -= slideCount; }\n      }\n\n      // if index is changed, start rendering\n      if (getAbsIndex(index) !== getAbsIndex(indexCached)) {\n        render(e);\n      }\n\n    }\n  }\n\n  // on controls click\n  function onControlsClick (e, dir) {\n    if (running) {\n      if (preventActionWhenRunning) { return; } else { onTransitionEnd(); }\n    }\n    var passEventObject;\n\n    if (!dir) {\n      e = getEvent(e);\n      var target = getTarget(e);\n\n      while (target !== controlsContainer && [prevButton, nextButton].indexOf(target) < 0) { target = target.parentNode; }\n\n      var targetIn = [prevButton, nextButton].indexOf(target);\n      if (targetIn >= 0) {\n        passEventObject = true;\n        dir = targetIn === 0 ? -1 : 1;\n      }\n    }\n\n    if (rewind) {\n      if (index === indexMin && dir === -1) {\n        goTo('last', e);\n        return;\n      } else if (index === indexMax && dir === 1) {\n        goTo('first', e);\n        return;\n      }\n    }\n\n    if (dir) {\n      index += slideBy * dir;\n      if (autoWidth) { index = Math.floor(index); }\n      // pass e when click control buttons or keydown\n      render((passEventObject || (e && e.type === 'keydown')) ? e : null);\n    }\n  }\n\n  // on nav click\n  function onNavClick (e) {\n    if (running) {\n      if (preventActionWhenRunning) { return; } else { onTransitionEnd(); }\n    }\n\n    e = getEvent(e);\n    var target = getTarget(e), navIndex;\n\n    // find the clicked nav item\n    while (target !== navContainer && !hasAttr(target, 'data-nav')) { target = target.parentNode; }\n    if (hasAttr(target, 'data-nav')) {\n      var navIndex = navClicked = Number(getAttr(target, 'data-nav')),\n          targetIndexBase = fixedWidth || autoWidth ? navIndex * slideCount / pages : navIndex * items,\n          targetIndex = navAsThumbnails ? navIndex : Math.min(Math.ceil(targetIndexBase), slideCount - 1);\n      goTo(targetIndex, e);\n\n      if (navCurrentIndex === navIndex) {\n        if (animating) { stopAutoplay(); }\n        navClicked = -1; // reset navClicked\n      }\n    }\n  }\n\n  // autoplay functions\n  function setAutoplayTimer () {\n    autoplayTimer = setInterval(function () {\n      onControlsClick(null, autoplayDirection);\n    }, autoplayTimeout);\n\n    animating = true;\n  }\n\n  function stopAutoplayTimer () {\n    clearInterval(autoplayTimer);\n    animating = false;\n  }\n\n  function updateAutoplayButton (action, txt) {\n    setAttrs(autoplayButton, {'data-action': action});\n    autoplayButton.innerHTML = autoplayHtmlStrings[0] + action + autoplayHtmlStrings[1] + txt;\n  }\n\n  function startAutoplay () {\n    setAutoplayTimer();\n    if (autoplayButton) { updateAutoplayButton('stop', autoplayText[1]); }\n  }\n\n  function stopAutoplay () {\n    stopAutoplayTimer();\n    if (autoplayButton) { updateAutoplayButton('start', autoplayText[0]); }\n  }\n\n  // programaitcally play/pause the slider\n  function play () {\n    if (autoplay && !animating) {\n      startAutoplay();\n      autoplayUserPaused = false;\n    }\n  }\n  function pause () {\n    if (animating) {\n      stopAutoplay();\n      autoplayUserPaused = true;\n    }\n  }\n\n  function toggleAutoplay () {\n    if (animating) {\n      stopAutoplay();\n      autoplayUserPaused = true;\n    } else {\n      startAutoplay();\n      autoplayUserPaused = false;\n    }\n  }\n\n  function onVisibilityChange () {\n    if (doc.hidden) {\n      if (animating) {\n        stopAutoplayTimer();\n        autoplayVisibilityPaused = true;\n      }\n    } else if (autoplayVisibilityPaused) {\n      setAutoplayTimer();\n      autoplayVisibilityPaused = false;\n    }\n  }\n\n  function mouseoverPause () {\n    if (animating) {\n      stopAutoplayTimer();\n      autoplayHoverPaused = true;\n    }\n  }\n\n  function mouseoutRestart () {\n    if (autoplayHoverPaused) {\n      setAutoplayTimer();\n      autoplayHoverPaused = false;\n    }\n  }\n\n  // keydown events on document\n  function onDocumentKeydown (e) {\n    e = getEvent(e);\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT].indexOf(e.keyCode);\n\n    if (keyIndex >= 0) {\n      onControlsClick(e, keyIndex === 0 ? -1 : 1);\n    }\n  }\n\n  // on key control\n  function onControlsKeydown (e) {\n    e = getEvent(e);\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT].indexOf(e.keyCode);\n\n    if (keyIndex >= 0) {\n      if (keyIndex === 0) {\n        if (!prevButton.disabled) { onControlsClick(e, -1); }\n      } else if (!nextButton.disabled) {\n        onControlsClick(e, 1);\n      }\n    }\n  }\n\n  // set focus\n  function setFocus (el) {\n    el.focus();\n  }\n\n  // on key nav\n  function onNavKeydown (e) {\n    e = getEvent(e);\n    var curElement = doc.activeElement;\n    if (!hasAttr(curElement, 'data-nav')) { return; }\n\n    // var code = e.keyCode,\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT, KEYS.ENTER, KEYS.SPACE].indexOf(e.keyCode),\n        navIndex = Number(getAttr(curElement, 'data-nav'));\n\n    if (keyIndex >= 0) {\n      if (keyIndex === 0) {\n        if (navIndex > 0) { setFocus(navItems[navIndex - 1]); }\n      } else if (keyIndex === 1) {\n        if (navIndex < pages - 1) { setFocus(navItems[navIndex + 1]); }\n      } else {\n        navClicked = navIndex;\n        goTo(navIndex, e);\n      }\n    }\n  }\n\n  function getEvent (e) {\n    e = e || win.event;\n    return isTouchEvent(e) ? e.changedTouches[0] : e;\n  }\n  function getTarget (e) {\n    return e.target || win.event.srcElement;\n  }\n\n  function isTouchEvent (e) {\n    return e.type.indexOf('touch') >= 0;\n  }\n\n  function preventDefaultBehavior (e) {\n    e.preventDefault ? e.preventDefault() : e.returnValue = false;\n  }\n\n  function getMoveDirectionExpected () {\n    return getTouchDirection(toDegree(lastPosition.y - initPosition.y, lastPosition.x - initPosition.x), swipeAngle) === options.axis;\n  }\n\n  function onPanStart (e) {\n    if (running) {\n      if (preventActionWhenRunning) { return; } else { onTransitionEnd(); }\n    }\n\n    if (autoplay && animating) { stopAutoplayTimer(); }\n\n    panStart = true;\n    if (rafIndex) {\n      caf(rafIndex);\n      rafIndex = null;\n    }\n\n    var $ = getEvent(e);\n    events.emit(isTouchEvent(e) ? 'touchStart' : 'dragStart', info(e));\n\n    if (!isTouchEvent(e) && ['img', 'a'].indexOf(getLowerCaseNodeName(getTarget(e))) >= 0) {\n      preventDefaultBehavior(e);\n    }\n\n    lastPosition.x = initPosition.x = $.clientX;\n    lastPosition.y = initPosition.y = $.clientY;\n    if (carousel) {\n      translateInit = parseFloat(container.style[transformAttr].replace(transformPrefix, ''));\n      resetDuration(container, '0s');\n    }\n  }\n\n  function onPanMove (e) {\n    if (panStart) {\n      var $ = getEvent(e);\n      lastPosition.x = $.clientX;\n      lastPosition.y = $.clientY;\n\n      if (carousel) {\n        if (!rafIndex) { rafIndex = raf(function(){ panUpdate(e); }); }\n      } else {\n        if (moveDirectionExpected === '?') { moveDirectionExpected = getMoveDirectionExpected(); }\n        if (moveDirectionExpected) { preventScroll = true; }\n      }\n\n      if ((typeof e.cancelable !== 'boolean' || e.cancelable) && preventScroll) {\n        e.preventDefault();\n      }\n    }\n  }\n\n  function panUpdate (e) {\n    if (!moveDirectionExpected) {\n      panStart = false;\n      return;\n    }\n    caf(rafIndex);\n    if (panStart) { rafIndex = raf(function(){ panUpdate(e); }); }\n\n    if (moveDirectionExpected === '?') { moveDirectionExpected = getMoveDirectionExpected(); }\n    if (moveDirectionExpected) {\n      if (!preventScroll && isTouchEvent(e)) { preventScroll = true; }\n\n      try {\n        if (e.type) { events.emit(isTouchEvent(e) ? 'touchMove' : 'dragMove', info(e)); }\n      } catch(err) {}\n\n      var x = translateInit,\n          dist = getDist(lastPosition, initPosition);\n      if (!horizontal || fixedWidth || autoWidth) {\n        x += dist;\n        x += 'px';\n      } else {\n        var percentageX = TRANSFORM ? dist * items * 100 / ((viewport + gutter) * slideCountNew): dist * 100 / (viewport + gutter);\n        x += percentageX;\n        x += '%';\n      }\n\n      container.style[transformAttr] = transformPrefix + x + transformPostfix;\n    }\n  }\n\n  function onPanEnd (e) {\n    if (panStart) {\n      if (rafIndex) {\n        caf(rafIndex);\n        rafIndex = null;\n      }\n      if (carousel) { resetDuration(container, ''); }\n      panStart = false;\n\n      var $ = getEvent(e);\n      lastPosition.x = $.clientX;\n      lastPosition.y = $.clientY;\n      var dist = getDist(lastPosition, initPosition);\n\n      if (Math.abs(dist)) {\n        // drag vs click\n        if (!isTouchEvent(e)) {\n          // prevent \"click\"\n          var target = getTarget(e);\n          addEvents(target, {'click': function preventClick (e) {\n            preventDefaultBehavior(e);\n            removeEvents(target, {'click': preventClick});\n          }});\n        }\n\n        if (carousel) {\n          rafIndex = raf(function() {\n            if (horizontal && !autoWidth) {\n              var indexMoved = - dist * items / (viewport + gutter);\n              indexMoved = dist > 0 ? Math.floor(indexMoved) : Math.ceil(indexMoved);\n              index += indexMoved;\n            } else {\n              var moved = - (translateInit + dist);\n              if (moved <= 0) {\n                index = indexMin;\n              } else if (moved >= slidePositions[slideCountNew - 1]) {\n                index = indexMax;\n              } else {\n                var i = 0;\n                while (i < slideCountNew && moved >= slidePositions[i]) {\n                  index = i;\n                  if (moved > slidePositions[i] && dist < 0) { index += 1; }\n                  i++;\n                }\n              }\n            }\n\n            render(e, dist);\n            events.emit(isTouchEvent(e) ? 'touchEnd' : 'dragEnd', info(e));\n          });\n        } else {\n          if (moveDirectionExpected) {\n            onControlsClick(e, dist > 0 ? -1 : 1);\n          }\n        }\n      }\n    }\n\n    // reset\n    if (options.preventScrollOnTouch === 'auto') { preventScroll = false; }\n    if (swipeAngle) { moveDirectionExpected = '?'; }\n    if (autoplay && !animating) { setAutoplayTimer(); }\n  }\n\n  // === RESIZE FUNCTIONS === //\n  // (slidePositions, index, items) => vertical_conentWrapper.height\n  function updateContentWrapperHeight () {\n    var wp = middleWrapper ? middleWrapper : innerWrapper;\n    wp.style.height = slidePositions[index + items] - slidePositions[index] + 'px';\n  }\n\n  function getPages () {\n    var rough = fixedWidth ? (fixedWidth + gutter) * slideCount / viewport : slideCount / items;\n    return Math.min(Math.ceil(rough), slideCount);\n  }\n\n  /*\n   * 1. update visible nav items list\n   * 2. add \"hidden\" attributes to previous visible nav items\n   * 3. remove \"hidden\" attrubutes to new visible nav items\n   */\n  function updateNavVisibility () {\n    if (!nav || navAsThumbnails) { return; }\n\n    if (pages !== pagesCached) {\n      var min = pagesCached,\n          max = pages,\n          fn = showElement;\n\n      if (pagesCached > pages) {\n        min = pages;\n        max = pagesCached;\n        fn = hideElement;\n      }\n\n      while (min < max) {\n        fn(navItems[min]);\n        min++;\n      }\n\n      // cache pages\n      pagesCached = pages;\n    }\n  }\n\n  function info (e) {\n    return {\n      container: container,\n      slideItems: slideItems,\n      navContainer: navContainer,\n      navItems: navItems,\n      controlsContainer: controlsContainer,\n      hasControls: hasControls,\n      prevButton: prevButton,\n      nextButton: nextButton,\n      items: items,\n      slideBy: slideBy,\n      cloneCount: cloneCount,\n      slideCount: slideCount,\n      slideCountNew: slideCountNew,\n      index: index,\n      indexCached: indexCached,\n      displayIndex: getCurrentSlide(),\n      navCurrentIndex: navCurrentIndex,\n      navCurrentIndexCached: navCurrentIndexCached,\n      pages: pages,\n      pagesCached: pagesCached,\n      sheet: sheet,\n      isOn: isOn,\n      event: e || {},\n    };\n  }\n\n  return {\n    version: '2.9.4',\n    getInfo: info,\n    events: events,\n    goTo: goTo,\n    play: play,\n    pause: pause,\n    isOn: isOn,\n    updateSliderHeight: updateInnerWrapperHeight,\n    refresh: initSliderTransform,\n    destroy: destroy,\n    rebuild: function() {\n      return tns(extend(options, optionsElements));\n    }\n  };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}